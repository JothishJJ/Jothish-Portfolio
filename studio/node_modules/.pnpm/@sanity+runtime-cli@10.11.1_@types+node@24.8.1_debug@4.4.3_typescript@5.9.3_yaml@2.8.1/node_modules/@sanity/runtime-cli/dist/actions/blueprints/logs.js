import config from '../../config.js';
import getHeaders from '../../utils/get-headers.js';
const { apiUrl } = config;
export const logsUrl = `${apiUrl}vX/blueprints/logs`;
export async function getLogs(stackId, auth) {
    const url = new URL(logsUrl);
    url.searchParams.append('stackId', stackId);
    const response = await fetch(url.toString(), {
        headers: getHeaders(auth),
        method: 'GET',
    });
    const result = await response.json();
    return {
        ok: response.ok,
        error: response.ok ? null : result.message || 'Unknown error',
        logs: response.ok ? result : [],
    };
}
// Get most recent logs, up to a limit
export function getRecentLogs(logs, limit = 10) {
    const sortedLogs = [...logs].sort((a, b) => new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime());
    return sortedLogs.slice(-limit);
}
