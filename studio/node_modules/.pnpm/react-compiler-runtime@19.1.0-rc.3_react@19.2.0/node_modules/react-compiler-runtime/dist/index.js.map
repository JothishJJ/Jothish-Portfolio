{"version":3,"sources":["../src/index.ts"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport * as React from 'react';\n\nconst {useRef, useEffect, isValidElement} = React;\nconst ReactSecretInternals =\n  //@ts-ignore\n  React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE ??\n  //@ts-ignore\n  React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\ntype MemoCache = Array<number | typeof $empty>;\n\nconst $empty = Symbol.for('react.memo_cache_sentinel');\n\n// Re-export React.c if present, otherwise fallback to the userspace polyfill for versions of React\n// < 19.\nexport const c =\n  // @ts-expect-error\n  typeof React.__COMPILER_RUNTIME?.c === 'function'\n    ? // @ts-expect-error\n      React.__COMPILER_RUNTIME.c\n    : function c(size: number) {\n        return React.useMemo<Array<unknown>>(() => {\n          const $ = new Array(size);\n          for (let ii = 0; ii < size; ii++) {\n            $[ii] = $empty;\n          }\n          // This symbol is added to tell the react devtools that this array is from\n          // useMemoCache.\n          // @ts-ignore\n          $[$empty] = true;\n          return $;\n        }, []);\n      };\n\nconst LazyGuardDispatcher: {[key: string]: (...args: Array<any>) => any} = {};\n[\n  'readContext',\n  'useCallback',\n  'useContext',\n  'useEffect',\n  'useImperativeHandle',\n  'useInsertionEffect',\n  'useLayoutEffect',\n  'useMemo',\n  'useReducer',\n  'useRef',\n  'useState',\n  'useDebugValue',\n  'useDeferredValue',\n  'useTransition',\n  'useMutableSource',\n  'useSyncExternalStore',\n  'useId',\n  'unstable_isNewReconciler',\n  'getCacheSignal',\n  'getCacheForType',\n  'useCacheRefresh',\n].forEach(name => {\n  LazyGuardDispatcher[name] = () => {\n    throw new Error(\n      `[React] Unexpected React hook call (${name}) from a React compiled function. ` +\n        \"Check that all hooks are called directly and named according to convention ('use[A-Z]') \",\n    );\n  };\n});\n\nlet originalDispatcher: unknown = null;\n\n// Allow guards are not emitted for useMemoCache\nLazyGuardDispatcher['useMemoCache'] = (count: number) => {\n  if (originalDispatcher == null) {\n    throw new Error(\n      'React Compiler internal invariant violation: unexpected null dispatcher',\n    );\n  } else {\n    return (originalDispatcher as any).useMemoCache(count);\n  }\n};\n\nenum GuardKind {\n  PushGuardContext = 0,\n  PopGuardContext = 1,\n  PushExpectHook = 2,\n  PopExpectHook = 3,\n}\n\nfunction setCurrent(newDispatcher: any) {\n  ReactSecretInternals.ReactCurrentDispatcher.current = newDispatcher;\n  return ReactSecretInternals.ReactCurrentDispatcher.current;\n}\n\nconst guardFrames: Array<unknown> = [];\n\n/**\n * When `enableEmitHookGuards` is set, this does runtime validation\n * of the no-conditional-hook-calls rule.\n * As React Compiler needs to statically understand which calls to move out of\n * conditional branches (i.e. React Compiler cannot memoize the results of hook\n * calls), its understanding of \"the rules of React\" are more restrictive.\n * This validation throws on unsound inputs at runtime.\n *\n * Components should only be invoked through React as React Compiler could memoize\n * the call to AnotherComponent, introducing conditional hook calls in its\n * compiled output.\n * ```js\n * function Invalid(props) {\n *  const myJsx = AnotherComponent(props);\n *  return <div> { myJsx } </div>;\n * }\n *\n * Hooks must be named as hooks.\n * ```js\n * const renamedHook = useState;\n * function Invalid() {\n *   const [state, setState] = renamedHook(0);\n * }\n * ```\n *\n * Hooks must be directly called.\n * ```\n * function call(fn) {\n *  return fn();\n * }\n * function Invalid() {\n *   const result = call(useMyHook);\n * }\n * ```\n */\nexport function $dispatcherGuard(kind: GuardKind) {\n  const curr = ReactSecretInternals.ReactCurrentDispatcher.current;\n  if (kind === GuardKind.PushGuardContext) {\n    // Push before checking invariant or errors\n    guardFrames.push(curr);\n\n    if (guardFrames.length === 1) {\n      // save if we're the first guard on the stack\n      originalDispatcher = curr;\n    }\n\n    if (curr === LazyGuardDispatcher) {\n      throw new Error(\n        `[React] Unexpected call to custom hook or component from a React compiled function. ` +\n          \"Check that (1) all hooks are called directly and named according to convention ('use[A-Z]') \" +\n          'and (2) components are returned as JSX instead of being directly invoked.',\n      );\n    }\n    setCurrent(LazyGuardDispatcher);\n  } else if (kind === GuardKind.PopGuardContext) {\n    // Pop before checking invariant or errors\n    const lastFrame = guardFrames.pop();\n\n    if (lastFrame == null) {\n      throw new Error(\n        'React Compiler internal error: unexpected null in guard stack',\n      );\n    }\n    if (guardFrames.length === 0) {\n      originalDispatcher = null;\n    }\n    setCurrent(lastFrame);\n  } else if (kind === GuardKind.PushExpectHook) {\n    // ExpectHooks could be nested, so we save the current dispatcher\n    // for the matching PopExpectHook to restore.\n    guardFrames.push(curr);\n    setCurrent(originalDispatcher);\n  } else if (kind === GuardKind.PopExpectHook) {\n    const lastFrame = guardFrames.pop();\n    if (lastFrame == null) {\n      throw new Error(\n        'React Compiler internal error: unexpected null in guard stack',\n      );\n    }\n    setCurrent(lastFrame);\n  } else {\n    throw new Error('React Compiler internal error: unreachable block' + kind);\n  }\n}\n\nexport function $reset($: MemoCache) {\n  for (let ii = 0; ii < $.length; ii++) {\n    $[ii] = $empty;\n  }\n}\n\nexport function $makeReadOnly() {\n  throw new Error('TODO: implement $makeReadOnly in react-compiler-runtime');\n}\n\n/**\n * Instrumentation to count rerenders in React components\n */\nexport const renderCounterRegistry: Map<\n  string,\n  Set<{count: number}>\n> = new Map();\nexport function clearRenderCounterRegistry() {\n  for (const counters of renderCounterRegistry.values()) {\n    counters.forEach(counter => {\n      counter.count = 0;\n    });\n  }\n}\n\nfunction registerRenderCounter(name: string, val: {count: number}) {\n  let counters = renderCounterRegistry.get(name);\n  if (counters == null) {\n    counters = new Set();\n    renderCounterRegistry.set(name, counters);\n  }\n  counters.add(val);\n}\n\nfunction removeRenderCounter(name: string, val: {count: number}): void {\n  const counters = renderCounterRegistry.get(name);\n  if (counters == null) {\n    return;\n  }\n  counters.delete(val);\n}\n\nexport function useRenderCounter(name: string): void {\n  const val = useRef<{count: number}>(null);\n\n  if (val.current != null) {\n    val.current.count += 1;\n  }\n  useEffect(() => {\n    // Not counting initial render shouldn't be a problem\n    if (val.current == null) {\n      const counter = {count: 0};\n      registerRenderCounter(name, counter);\n      // @ts-ignore\n      val.current = counter;\n    }\n    return () => {\n      if (val.current !== null) {\n        removeRenderCounter(name, val.current);\n      }\n    };\n  });\n}\n\nconst seenErrors = new Set();\n\nexport function $structuralCheck(\n  oldValue: any,\n  newValue: any,\n  variableName: string,\n  fnName: string,\n  kind: string,\n  loc: string,\n): void {\n  function error(l: string, r: string, path: string, depth: number) {\n    const str = `${fnName}:${loc} [${kind}] ${variableName}${path} changed from ${l} to ${r} at depth ${depth}`;\n    if (seenErrors.has(str)) {\n      return;\n    }\n    seenErrors.add(str);\n    console.error(str);\n  }\n  const depthLimit = 2;\n  function recur(oldValue: any, newValue: any, path: string, depth: number) {\n    if (depth > depthLimit) {\n      return;\n    } else if (oldValue === newValue) {\n      return;\n    } else if (typeof oldValue !== typeof newValue) {\n      error(`type ${typeof oldValue}`, `type ${typeof newValue}`, path, depth);\n    } else if (typeof oldValue === 'object') {\n      const oldArray = Array.isArray(oldValue);\n      const newArray = Array.isArray(newValue);\n      if (oldValue === null && newValue !== null) {\n        error('null', `type ${typeof newValue}`, path, depth);\n      } else if (newValue === null) {\n        error(`type ${typeof oldValue}`, 'null', path, depth);\n      } else if (oldValue instanceof Map) {\n        if (!(newValue instanceof Map)) {\n          error(`Map instance`, `other value`, path, depth);\n        } else if (oldValue.size !== newValue.size) {\n          error(\n            `Map instance with size ${oldValue.size}`,\n            `Map instance with size ${newValue.size}`,\n            path,\n            depth,\n          );\n        } else {\n          for (const [k, v] of oldValue) {\n            if (!newValue.has(k)) {\n              error(\n                `Map instance with key ${k}`,\n                `Map instance without key ${k}`,\n                path,\n                depth,\n              );\n            } else {\n              recur(v, newValue.get(k), `${path}.get(${k})`, depth + 1);\n            }\n          }\n        }\n      } else if (newValue instanceof Map) {\n        error('other value', `Map instance`, path, depth);\n      } else if (oldValue instanceof Set) {\n        if (!(newValue instanceof Set)) {\n          error(`Set instance`, `other value`, path, depth);\n        } else if (oldValue.size !== newValue.size) {\n          error(\n            `Set instance with size ${oldValue.size}`,\n            `Set instance with size ${newValue.size}`,\n            path,\n            depth,\n          );\n        } else {\n          for (const v of newValue) {\n            if (!oldValue.has(v)) {\n              error(\n                `Set instance without element ${v}`,\n                `Set instance with element ${v}`,\n                path,\n                depth,\n              );\n            }\n          }\n        }\n      } else if (newValue instanceof Set) {\n        error('other value', `Set instance`, path, depth);\n      } else if (oldArray || newArray) {\n        if (oldArray !== newArray) {\n          error(\n            `type ${oldArray ? 'array' : 'object'}`,\n            `type ${newArray ? 'array' : 'object'}`,\n            path,\n            depth,\n          );\n        } else if (oldValue.length !== newValue.length) {\n          error(\n            `array with length ${oldValue.length}`,\n            `array with length ${newValue.length}`,\n            path,\n            depth,\n          );\n        } else {\n          for (let ii = 0; ii < oldValue.length; ii++) {\n            recur(oldValue[ii], newValue[ii], `${path}[${ii}]`, depth + 1);\n          }\n        }\n      } else if (isValidElement(oldValue) || isValidElement(newValue)) {\n        if (isValidElement(oldValue) !== isValidElement(newValue)) {\n          error(\n            `type ${isValidElement(oldValue) ? 'React element' : 'object'}`,\n            `type ${isValidElement(newValue) ? 'React element' : 'object'}`,\n            path,\n            depth,\n          );\n        } else if (oldValue.type !== newValue.type) {\n          error(\n            `React element of type ${oldValue.type}`,\n            `React element of type ${newValue.type}`,\n            path,\n            depth,\n          );\n        } else {\n          recur(\n            oldValue.props,\n            newValue.props,\n            `[props of ${path}]`,\n            depth + 1,\n          );\n        }\n      } else {\n        for (const key in newValue) {\n          if (!(key in oldValue)) {\n            error(\n              `object without key ${key}`,\n              `object with key ${key}`,\n              path,\n              depth,\n            );\n          }\n        }\n        for (const key in oldValue) {\n          if (!(key in newValue)) {\n            error(\n              `object with key ${key}`,\n              `object without key ${key}`,\n              path,\n              depth,\n            );\n          } else {\n            recur(oldValue[key], newValue[key], `${path}.${key}`, depth + 1);\n          }\n        }\n      }\n    } else if (typeof oldValue === 'function') {\n      // Bail on functions for now\n      return;\n    } else if (isNaN(oldValue) || isNaN(newValue)) {\n      if (isNaN(oldValue) !== isNaN(newValue)) {\n        error(\n          `${isNaN(oldValue) ? 'NaN' : 'non-NaN value'}`,\n          `${isNaN(newValue) ? 'NaN' : 'non-NaN value'}`,\n          path,\n          depth,\n        );\n      }\n    } else if (oldValue !== newValue) {\n      error(oldValue, newValue, path, depth);\n    }\n  }\n  recur(oldValue, newValue, '', 0);\n}\n"],"mappings":"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","names":["_a","c","oldValue","newValue"]}