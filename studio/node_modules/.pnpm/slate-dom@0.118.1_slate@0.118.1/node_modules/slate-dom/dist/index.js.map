{"version":3,"file":"index.js","sources":["../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/iterableToArray.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/nonIterableSpread.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/toConsumableArray.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/arrayWithHoles.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/nonIterableRest.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/slicedToArray.js","../src/utils/dom.ts","../src/utils/environment.ts","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/typeof.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/toPrimitive.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/toPropertyKey.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/createClass.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/classCallCheck.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/defineProperty.js","../src/utils/key.ts","../src/utils/weak-maps.ts","../src/plugin/dom-editor.ts","../src/utils/diff-text.ts","../src/utils/lines.ts","../src/plugin/with-dom.ts","../src/utils/constants.ts","../src/utils/hotkeys.ts","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/objectWithoutProperties.js","../src/utils/range-list.ts"],"sourcesContent":["function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\nvar iterableToArray = require(\"./iterableToArray.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableRest = require(\"./nonIterableRest.js\");\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","/**\n * Types.\n */\n\n// COMPAT: This is required to prevent TypeScript aliases from doing some very\n// weird things for Slate's types with the same name as globals. (2019/11/27)\n// https://github.com/microsoft/TypeScript/issues/35002\nimport DOMNode = globalThis.Node\nimport DOMComment = globalThis.Comment\nimport DOMElement = globalThis.Element\nimport DOMText = globalThis.Text\nimport DOMRange = globalThis.Range\nimport DOMSelection = globalThis.Selection\nimport DOMStaticRange = globalThis.StaticRange\nimport { DOMEditor } from '../plugin/dom-editor'\n\nexport {\n  DOMNode,\n  DOMComment,\n  DOMElement,\n  DOMText,\n  DOMRange,\n  DOMSelection,\n  DOMStaticRange,\n}\n\ndeclare global {\n  interface Window {\n    Selection: (typeof Selection)['constructor']\n    DataTransfer: (typeof DataTransfer)['constructor']\n    Node: (typeof Node)['constructor']\n  }\n}\n\nexport type DOMPoint = [Node, number]\n\n/**\n * Returns the host window of a DOM node\n */\n\nexport const getDefaultView = (value: any): Window | null => {\n  return (\n    (value && value.ownerDocument && value.ownerDocument.defaultView) || null\n  )\n}\n\n/**\n * Check if a DOM node is a comment node.\n */\n\nexport const isDOMComment = (value: any): value is DOMComment => {\n  return isDOMNode(value) && value.nodeType === 8\n}\n\n/**\n * Check if a DOM node is an element node.\n */\n\nexport const isDOMElement = (value: any): value is DOMElement => {\n  return isDOMNode(value) && value.nodeType === 1\n}\n\n/**\n * Check if a value is a DOM node.\n */\n\nexport const isDOMNode = (value: any): value is DOMNode => {\n  const window = getDefaultView(value)\n  return !!window && value instanceof window.Node\n}\n\n/**\n * Check if a value is a DOM selection.\n */\n\nexport const isDOMSelection = (value: any): value is DOMSelection => {\n  const window = value && value.anchorNode && getDefaultView(value.anchorNode)\n  return !!window && value instanceof window.Selection\n}\n\n/**\n * Check if a DOM node is an element node.\n */\n\nexport const isDOMText = (value: any): value is DOMText => {\n  return isDOMNode(value) && value.nodeType === 3\n}\n\n/**\n * Checks whether a paste event is a plaintext-only event.\n */\n\nexport const isPlainTextOnlyPaste = (event: ClipboardEvent) => {\n  return (\n    event.clipboardData &&\n    event.clipboardData.getData('text/plain') !== '' &&\n    event.clipboardData.types.length === 1\n  )\n}\n\n/**\n * Normalize a DOM point so that it always refers to a text node.\n */\n\nexport const normalizeDOMPoint = (domPoint: DOMPoint): DOMPoint => {\n  let [node, offset] = domPoint\n\n  // If it's an element node, its offset refers to the index of its children\n  // including comment nodes, so try to find the right text child node.\n  if (isDOMElement(node) && node.childNodes.length) {\n    let isLast = offset === node.childNodes.length\n    let index = isLast ? offset - 1 : offset\n    ;[node, index] = getEditableChildAndIndex(\n      node,\n      index,\n      isLast ? 'backward' : 'forward'\n    )\n    // If the editable child found is in front of input offset, we instead seek to its end\n    isLast = index < offset\n\n    // If the node has children, traverse until we have a leaf node. Leaf nodes\n    // can be either text nodes, or other void DOM nodes.\n    while (isDOMElement(node) && node.childNodes.length) {\n      const i = isLast ? node.childNodes.length - 1 : 0\n      node = getEditableChild(node, i, isLast ? 'backward' : 'forward')\n    }\n\n    // Determine the new offset inside the text node.\n    offset = isLast && node.textContent != null ? node.textContent.length : 0\n  }\n\n  // Return the node and offset.\n  return [node, offset]\n}\n\n/**\n * Determines whether the active element is nested within a shadowRoot\n */\n\nexport const hasShadowRoot = (node: Node | null) => {\n  let parent = node && node.parentNode\n  while (parent) {\n    if (parent.toString() === '[object ShadowRoot]') {\n      return true\n    }\n    parent = parent.parentNode\n  }\n  return false\n}\n\n/**\n * Get the nearest editable child and index at `index` in a `parent`, preferring\n * `direction`.\n */\n\nexport const getEditableChildAndIndex = (\n  parent: DOMElement,\n  index: number,\n  direction: 'forward' | 'backward'\n): [DOMNode, number] => {\n  const { childNodes } = parent\n  let child = childNodes[index]\n  let i = index\n  let triedForward = false\n  let triedBackward = false\n\n  // While the child is a comment node, or an element node with no children,\n  // keep iterating to find a sibling non-void, non-comment node.\n  while (\n    isDOMComment(child) ||\n    (isDOMElement(child) && child.childNodes.length === 0) ||\n    (isDOMElement(child) && child.getAttribute('contenteditable') === 'false')\n  ) {\n    if (triedForward && triedBackward) {\n      break\n    }\n\n    if (i >= childNodes.length) {\n      triedForward = true\n      i = index - 1\n      direction = 'backward'\n      continue\n    }\n\n    if (i < 0) {\n      triedBackward = true\n      i = index + 1\n      direction = 'forward'\n      continue\n    }\n\n    child = childNodes[i]\n    index = i\n    i += direction === 'forward' ? 1 : -1\n  }\n\n  return [child, index]\n}\n\n/**\n * Get the nearest editable child at `index` in a `parent`, preferring\n * `direction`.\n */\n\nexport const getEditableChild = (\n  parent: DOMElement,\n  index: number,\n  direction: 'forward' | 'backward'\n): DOMNode => {\n  const [child] = getEditableChildAndIndex(parent, index, direction)\n  return child\n}\n\n/**\n * Get a plaintext representation of the content of a node, accounting for block\n * elements which get a newline appended.\n *\n * The domNode must be attached to the DOM.\n */\n\nexport const getPlainText = (domNode: DOMNode) => {\n  let text = ''\n\n  if (isDOMText(domNode) && domNode.nodeValue) {\n    return domNode.nodeValue\n  }\n\n  if (isDOMElement(domNode)) {\n    for (const childNode of Array.from(domNode.childNodes)) {\n      text += getPlainText(childNode)\n    }\n\n    const display = getComputedStyle(domNode).getPropertyValue('display')\n\n    if (display === 'block' || display === 'list' || domNode.tagName === 'BR') {\n      text += '\\n'\n    }\n  }\n\n  return text\n}\n\n/**\n * Get x-slate-fragment attribute from data-slate-fragment\n */\nconst catchSlateFragment = /data-slate-fragment=\"(.+?)\"/m\nexport const getSlateFragmentAttribute = (\n  dataTransfer: DataTransfer\n): string | void => {\n  const htmlData = dataTransfer.getData('text/html')\n  const [, fragment] = htmlData.match(catchSlateFragment) || []\n  return fragment\n}\n\n/**\n * Get the x-slate-fragment attribute that exist in text/html data\n * and append it to the DataTransfer object\n */\nexport const getClipboardData = (\n  dataTransfer: DataTransfer,\n  clipboardFormatKey = 'x-slate-fragment'\n): DataTransfer => {\n  if (!dataTransfer.getData(`application/${clipboardFormatKey}`)) {\n    const fragment = getSlateFragmentAttribute(dataTransfer)\n    if (fragment) {\n      const clipboardData = new DataTransfer()\n      dataTransfer.types.forEach(type => {\n        clipboardData.setData(type, dataTransfer.getData(type))\n      })\n      clipboardData.setData(`application/${clipboardFormatKey}`, fragment)\n      return clipboardData\n    }\n  }\n  return dataTransfer\n}\n\n/**\n * Get the dom selection from Shadow Root if possible, otherwise from the document\n */\nexport const getSelection = (root: Document | ShadowRoot): Selection | null => {\n  if (root.getSelection != null) {\n    return root.getSelection()\n  }\n  return document.getSelection()\n}\n\n/**\n * Check whether a mutation originates from a editable element inside the editor.\n */\n\nexport const isTrackedMutation = (\n  editor: DOMEditor,\n  mutation: MutationRecord,\n  batch: MutationRecord[]\n): boolean => {\n  const { target } = mutation\n  if (isDOMElement(target) && target.matches('[contentEditable=\"false\"]')) {\n    return false\n  }\n\n  const { document } = DOMEditor.getWindow(editor)\n  if (document.contains(target)) {\n    return DOMEditor.hasDOMNode(editor, target, { editable: true })\n  }\n\n  const parentMutation = batch.find(({ addedNodes, removedNodes }) => {\n    for (const node of addedNodes) {\n      if (node === target || node.contains(target)) {\n        return true\n      }\n    }\n\n    for (const node of removedNodes) {\n      if (node === target || node.contains(target)) {\n        return true\n      }\n    }\n  })\n\n  if (!parentMutation || parentMutation === mutation) {\n    return false\n  }\n\n  // Target add/remove is tracked. Track the mutation if we track the parent mutation.\n  return isTrackedMutation(editor, parentMutation, batch)\n}\n\n/**\n * Retrieves the deepest active element in the DOM, considering nested shadow DOMs.\n */\nexport const getActiveElement = () => {\n  let activeElement = document.activeElement\n\n  while (activeElement?.shadowRoot && activeElement.shadowRoot?.activeElement) {\n    activeElement = activeElement?.shadowRoot?.activeElement\n  }\n\n  return activeElement\n}\n\n/**\n * @returns `true` if `otherNode` is before `node` in the document; otherwise, `false`.\n */\nexport const isBefore = (node: DOMNode, otherNode: DOMNode): boolean =>\n  Boolean(\n    node.compareDocumentPosition(otherNode) &\n      DOMNode.DOCUMENT_POSITION_PRECEDING\n  )\n\n/**\n * @returns `true` if `otherNode` is after `node` in the document; otherwise, `false`.\n */\nexport const isAfter = (node: DOMNode, otherNode: DOMNode): boolean =>\n  Boolean(\n    node.compareDocumentPosition(otherNode) &\n      DOMNode.DOCUMENT_POSITION_FOLLOWING\n  )\n","export const IS_IOS =\n  typeof navigator !== 'undefined' &&\n  typeof window !== 'undefined' &&\n  /iPad|iPhone|iPod/.test(navigator.userAgent) &&\n  !window.MSStream\n\nexport const IS_APPLE =\n  typeof navigator !== 'undefined' && /Mac OS X/.test(navigator.userAgent)\n\nexport const IS_ANDROID =\n  typeof navigator !== 'undefined' && /Android/.test(navigator.userAgent)\n\nexport const IS_FIREFOX =\n  typeof navigator !== 'undefined' &&\n  /^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent)\n\nexport const IS_WEBKIT =\n  typeof navigator !== 'undefined' &&\n  /AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent)\n\n// \"modern\" Edge was released at 79.x\nexport const IS_EDGE_LEGACY =\n  typeof navigator !== 'undefined' &&\n  /Edge?\\/(?:[0-6][0-9]|[0-7][0-8])(?:\\.)/i.test(navigator.userAgent)\n\nexport const IS_CHROME =\n  typeof navigator !== 'undefined' && /Chrome/i.test(navigator.userAgent)\n\n// Native `beforeInput` events don't work well with react on Chrome 75\n// and older, Chrome 76+ can use `beforeInput` though.\nexport const IS_CHROME_LEGACY =\n  typeof navigator !== 'undefined' &&\n  /Chrome?\\/(?:[0-7][0-5]|[0-6][0-9])(?:\\.)/i.test(navigator.userAgent)\n\nexport const IS_ANDROID_CHROME_LEGACY =\n  IS_ANDROID &&\n  typeof navigator !== 'undefined' &&\n  /Chrome?\\/(?:[0-5]?\\d)(?:\\.)/i.test(navigator.userAgent)\n\n// Firefox did not support `beforeInput` until `v87`.\nexport const IS_FIREFOX_LEGACY =\n  typeof navigator !== 'undefined' &&\n  /^(?!.*Seamonkey)(?=.*Firefox\\/(?:[0-7][0-9]|[0-8][0-6])(?:\\.)).*/i.test(\n    navigator.userAgent\n  )\n\n// UC mobile browser\nexport const IS_UC_MOBILE =\n  typeof navigator !== 'undefined' && /.*UCBrowser/.test(navigator.userAgent)\n\n// Wechat browser (not including mac wechat)\nexport const IS_WECHATBROWSER =\n  typeof navigator !== 'undefined' &&\n  /.*Wechat/.test(navigator.userAgent) &&\n  !/.*MacWechat/.test(navigator.userAgent) && // avoid lookbehind (buggy in safari < 16.4)\n  (!IS_CHROME || IS_CHROME_LEGACY) // wechat and low chrome is real wechat\n// Check if DOM is available as React does internally.\n// https://github.com/facebook/react/blob/master/packages/shared/ExecutionEnvironment.js\nexport const CAN_USE_DOM = !!(\n  typeof window !== 'undefined' &&\n  typeof window.document !== 'undefined' &&\n  typeof window.document.createElement !== 'undefined'\n)\n\n// Check if the browser is Safari and older than 17\nexport const IS_SAFARI_LEGACY =\n  typeof navigator !== 'undefined' &&\n  /Safari/.test(navigator.userAgent) &&\n  /Version\\/(\\d+)/.test(navigator.userAgent) &&\n  (navigator.userAgent.match(/Version\\/(\\d+)/)?.[1]\n    ? parseInt(navigator.userAgent.match(/Version\\/(\\d+)/)?.[1]!, 10) < 17\n    : false)\n\n// COMPAT: Firefox/Edge Legacy don't support the `beforeinput` event\n// Chrome Legacy doesn't support `beforeinput` correctly\nexport const HAS_BEFORE_INPUT_SUPPORT =\n  (!IS_CHROME_LEGACY || !IS_ANDROID_CHROME_LEGACY) &&\n  !IS_EDGE_LEGACY &&\n  // globalThis is undefined in older browsers\n  typeof globalThis !== 'undefined' &&\n  globalThis.InputEvent &&\n  // @ts-ignore The `getTargetRanges` property isn't recognized.\n  typeof globalThis.InputEvent.prototype.getTargetRanges === 'function'\n","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nmodule.exports = _toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nmodule.exports = _toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","/**\n * An auto-incrementing identifier for keys.\n */\n\nlet n = 0\n\n/**\n * A class that keeps track of a key string. We use a full class here because we\n * want to be able to use them as keys in `WeakMap` objects.\n */\n\nexport class Key {\n  id: string\n\n  constructor() {\n    this.id = `${n++}`\n  }\n}\n","import {\n  Ancestor,\n  Editor,\n  Node,\n  Operation,\n  Point,\n  Range,\n  RangeRef,\n  Text,\n} from 'slate'\nimport { TextDiff } from './diff-text'\nimport { Key } from './key'\n\nexport type Action = { at?: Point | Range; run: () => void }\n\n/**\n * Two weak maps that allow us rebuild a path given a node. They are populated\n * at render time such that after a render occurs we can always backtrack.\n */\nexport const IS_NODE_MAP_DIRTY: WeakMap<Editor, boolean> = new WeakMap()\nexport const NODE_TO_INDEX: WeakMap<Node, number> = new WeakMap()\nexport const NODE_TO_PARENT: WeakMap<Node, Ancestor> = new WeakMap()\n\n/**\n * Weak maps that allow us to go between Slate nodes and DOM nodes. These\n * are used to resolve DOM event-related logic into Slate actions.\n */\nexport const EDITOR_TO_WINDOW: WeakMap<Editor, Window> = new WeakMap()\nexport const EDITOR_TO_ELEMENT: WeakMap<Editor, HTMLElement> = new WeakMap()\nexport const EDITOR_TO_PLACEHOLDER: WeakMap<Editor, string> = new WeakMap()\nexport const EDITOR_TO_PLACEHOLDER_ELEMENT: WeakMap<Editor, HTMLElement> =\n  new WeakMap()\nexport const ELEMENT_TO_NODE: WeakMap<HTMLElement, Node> = new WeakMap()\nexport const NODE_TO_ELEMENT: WeakMap<Node, HTMLElement> = new WeakMap()\nexport const NODE_TO_KEY: WeakMap<Node, Key> = new WeakMap()\nexport const EDITOR_TO_KEY_TO_ELEMENT: WeakMap<\n  Editor,\n  WeakMap<Key, HTMLElement>\n> = new WeakMap()\n\n/**\n * Weak maps for storing editor-related state.\n */\n\nexport const IS_READ_ONLY: WeakMap<Editor, boolean> = new WeakMap()\nexport const IS_FOCUSED: WeakMap<Editor, boolean> = new WeakMap()\nexport const IS_COMPOSING: WeakMap<Editor, boolean> = new WeakMap()\n\nexport const EDITOR_TO_USER_SELECTION: WeakMap<Editor, RangeRef | null> =\n  new WeakMap()\n\n/**\n * Weak map for associating the context `onChange` context with the plugin.\n */\n\nexport const EDITOR_TO_ON_CHANGE = new WeakMap<\n  Editor,\n  (options?: { operation?: Operation }) => void\n>()\n\n/**\n * Weak maps for saving pending state on composition stage.\n */\n\nexport const EDITOR_TO_SCHEDULE_FLUSH: WeakMap<Editor, () => void> =\n  new WeakMap()\n\nexport const EDITOR_TO_PENDING_INSERTION_MARKS: WeakMap<\n  Editor,\n  Partial<Text> | null\n> = new WeakMap()\n\nexport const EDITOR_TO_USER_MARKS: WeakMap<Editor, Partial<Text> | null> =\n  new WeakMap()\n\n/**\n * Android input handling specific weak-maps\n */\n\nexport const EDITOR_TO_PENDING_DIFFS: WeakMap<Editor, TextDiff[]> =\n  new WeakMap()\n\nexport const EDITOR_TO_PENDING_ACTION: WeakMap<Editor, Action | null> =\n  new WeakMap()\n\nexport const EDITOR_TO_PENDING_SELECTION: WeakMap<Editor, Range | null> =\n  new WeakMap()\n\nexport const EDITOR_TO_FORCE_RENDER: WeakMap<Editor, () => void> = new WeakMap()\n\n/**\n * Symbols.\n */\n\nexport const PLACEHOLDER_SYMBOL = Symbol('placeholder') as unknown as string\nexport const MARK_PLACEHOLDER_SYMBOL = Symbol(\n  'mark-placeholder'\n) as unknown as string\n","import {\n  BaseEditor,\n  Editor,\n  Element,\n  Node,\n  Path,\n  Point,\n  Range,\n  Scrubber,\n  Transforms,\n} from 'slate'\nimport { TextDiff } from '../utils/diff-text'\nimport {\n  DOMElement,\n  DOMNode,\n  DOMPoint,\n  DOMRange,\n  DOMSelection,\n  DOMStaticRange,\n  DOMText,\n  getSelection,\n  hasShadowRoot,\n  isAfter,\n  isBefore,\n  isDOMElement,\n  isDOMNode,\n  isDOMSelection,\n  normalizeDOMPoint,\n} from '../utils/dom'\nimport { IS_ANDROID, IS_CHROME, IS_FIREFOX } from '../utils/environment'\n\nimport { Key } from '../utils/key'\nimport {\n  EDITOR_TO_ELEMENT,\n  EDITOR_TO_KEY_TO_ELEMENT,\n  EDITOR_TO_PENDING_DIFFS,\n  EDITOR_TO_SCHEDULE_FLUSH,\n  EDITOR_TO_WINDOW,\n  ELEMENT_TO_NODE,\n  IS_COMPOSING,\n  IS_FOCUSED,\n  IS_READ_ONLY,\n  NODE_TO_INDEX,\n  NODE_TO_KEY,\n  NODE_TO_PARENT,\n} from '../utils/weak-maps'\n\n/**\n * A DOM-specific version of the `Editor` interface.\n */\n\nexport interface DOMEditor extends BaseEditor {\n  hasEditableTarget: (\n    editor: DOMEditor,\n    target: EventTarget | null\n  ) => target is DOMNode\n  hasRange: (editor: DOMEditor, range: Range) => boolean\n  hasSelectableTarget: (\n    editor: DOMEditor,\n    target: EventTarget | null\n  ) => boolean\n  hasTarget: (\n    editor: DOMEditor,\n    target: EventTarget | null\n  ) => target is DOMNode\n  insertData: (data: DataTransfer) => void\n  insertFragmentData: (data: DataTransfer) => boolean\n  insertTextData: (data: DataTransfer) => boolean\n  isTargetInsideNonReadonlyVoid: (\n    editor: DOMEditor,\n    target: EventTarget | null\n  ) => boolean\n  setFragmentData: (\n    data: DataTransfer,\n    originEvent?: 'drag' | 'copy' | 'cut'\n  ) => void\n}\n\nexport interface DOMEditorInterface {\n  /**\n   * Experimental and android specific: Get pending diffs\n   */\n  androidPendingDiffs: (editor: Editor) => TextDiff[] | undefined\n\n  /**\n   * Experimental and android specific: Flush all pending diffs and cancel composition at the next possible time.\n   */\n  androidScheduleFlush: (editor: Editor) => void\n\n  /**\n   * Blur the editor.\n   */\n  blur: (editor: DOMEditor) => void\n\n  /**\n   * Deselect the editor.\n   */\n  deselect: (editor: DOMEditor) => void\n\n  /**\n   * Find the DOM node that implements DocumentOrShadowRoot for the editor.\n   */\n  findDocumentOrShadowRoot: (editor: DOMEditor) => Document | ShadowRoot\n\n  /**\n   * Get the target range from a DOM `event`.\n   */\n  findEventRange: (editor: DOMEditor, event: any) => Range\n\n  /**\n   * Find a key for a Slate node.\n   */\n  findKey: (editor: DOMEditor, node: Node) => Key\n\n  /**\n   * Find the path of Slate node.\n   */\n  findPath: (editor: DOMEditor, node: Node) => Path\n\n  /**\n   * Focus the editor.\n   */\n  focus: (editor: DOMEditor, options?: { retries: number }) => void\n\n  /**\n   * Return the host window of the current editor.\n   */\n  getWindow: (editor: DOMEditor) => Window\n\n  /**\n   * Check if a DOM node is within the editor.\n   */\n  hasDOMNode: (\n    editor: DOMEditor,\n    target: DOMNode,\n    options?: { editable?: boolean }\n  ) => boolean\n\n  /**\n   * Check if the target is editable and in the editor.\n   */\n  hasEditableTarget: (\n    editor: DOMEditor,\n    target: EventTarget | null\n  ) => target is DOMNode\n\n  /**\n   *\n   */\n  hasRange: (editor: DOMEditor, range: Range) => boolean\n\n  /**\n   * Check if the target can be selectable\n   */\n  hasSelectableTarget: (\n    editor: DOMEditor,\n    target: EventTarget | null\n  ) => boolean\n\n  /**\n   * Check if the target is in the editor.\n   */\n  hasTarget: (\n    editor: DOMEditor,\n    target: EventTarget | null\n  ) => target is DOMNode\n\n  /**\n   * Insert data from a `DataTransfer` into the editor.\n   */\n  insertData: (editor: DOMEditor, data: DataTransfer) => void\n\n  /**\n   * Insert fragment data from a `DataTransfer` into the editor.\n   */\n  insertFragmentData: (editor: DOMEditor, data: DataTransfer) => boolean\n\n  /**\n   * Insert text data from a `DataTransfer` into the editor.\n   */\n  insertTextData: (editor: DOMEditor, data: DataTransfer) => boolean\n\n  /**\n   * Check if the user is currently composing inside the editor.\n   */\n  isComposing: (editor: DOMEditor) => boolean\n\n  /**\n   * Check if the editor is focused.\n   */\n  isFocused: (editor: DOMEditor) => boolean\n\n  /**\n   * Check if the editor is in read-only mode.\n   */\n  isReadOnly: (editor: DOMEditor) => boolean\n\n  /**\n   * Check if the target is inside void and in an non-readonly editor.\n   */\n  isTargetInsideNonReadonlyVoid: (\n    editor: DOMEditor,\n    target: EventTarget | null\n  ) => boolean\n\n  /**\n   * Sets data from the currently selected fragment on a `DataTransfer`.\n   */\n  setFragmentData: (\n    editor: DOMEditor,\n    data: DataTransfer,\n    originEvent?: 'drag' | 'copy' | 'cut'\n  ) => void\n\n  /**\n   * Find the native DOM element from a Slate node.\n   */\n  toDOMNode: (editor: DOMEditor, node: Node) => HTMLElement\n\n  /**\n   * Find a native DOM selection point from a Slate point.\n   */\n  toDOMPoint: (editor: DOMEditor, point: Point) => DOMPoint\n\n  /**\n   * Find a native DOM range from a Slate `range`.\n   *\n   * Notice: the returned range will always be ordinal regardless of the direction of Slate `range` due to DOM API limit.\n   *\n   * there is no way to create a reverse DOM Range using Range.setStart/setEnd\n   * according to https://dom.spec.whatwg.org/#concept-range-bp-set.\n   */\n  toDOMRange: (editor: DOMEditor, range: Range) => DOMRange\n\n  /**\n   * Find a Slate node from a native DOM `element`.\n   */\n  toSlateNode: (editor: DOMEditor, domNode: DOMNode) => Node\n\n  /**\n   * Find a Slate point from a DOM selection's `domNode` and `domOffset`.\n   */\n  toSlatePoint: <T extends boolean>(\n    editor: DOMEditor,\n    domPoint: DOMPoint,\n    options: {\n      exactMatch: boolean\n      suppressThrow: T\n      /**\n       * The direction to search for Slate leaf nodes if `domPoint` is\n       * non-editable and non-void.\n       */\n      searchDirection?: 'forward' | 'backward'\n    }\n  ) => T extends true ? Point | null : Point\n\n  /**\n   * Find a Slate range from a DOM range or selection.\n   */\n  toSlateRange: <T extends boolean>(\n    editor: DOMEditor,\n    domRange: DOMRange | DOMStaticRange | DOMSelection,\n    options: {\n      exactMatch: boolean\n      suppressThrow: T\n    }\n  ) => T extends true ? Range | null : Range\n}\n\n// eslint-disable-next-line no-redeclare\nexport const DOMEditor: DOMEditorInterface = {\n  androidPendingDiffs: editor => EDITOR_TO_PENDING_DIFFS.get(editor),\n\n  androidScheduleFlush: editor => {\n    EDITOR_TO_SCHEDULE_FLUSH.get(editor)?.()\n  },\n\n  blur: editor => {\n    const el = DOMEditor.toDOMNode(editor, editor)\n    const root = DOMEditor.findDocumentOrShadowRoot(editor)\n    IS_FOCUSED.set(editor, false)\n\n    if (root.activeElement === el) {\n      el.blur()\n    }\n  },\n\n  deselect: editor => {\n    const { selection } = editor\n    const root = DOMEditor.findDocumentOrShadowRoot(editor)\n    const domSelection = getSelection(root)\n\n    if (domSelection && domSelection.rangeCount > 0) {\n      domSelection.removeAllRanges()\n    }\n\n    if (selection) {\n      Transforms.deselect(editor)\n    }\n  },\n\n  findDocumentOrShadowRoot: editor => {\n    const el = DOMEditor.toDOMNode(editor, editor)\n    const root = el.getRootNode()\n\n    if (root instanceof Document || root instanceof ShadowRoot) {\n      return root\n    }\n\n    return el.ownerDocument\n  },\n\n  findEventRange: (editor, event) => {\n    if ('nativeEvent' in event) {\n      event = event.nativeEvent\n    }\n\n    const { clientX: x, clientY: y, target } = event\n\n    if (x == null || y == null) {\n      throw new Error(`Cannot resolve a Slate range from a DOM event: ${event}`)\n    }\n\n    const node = DOMEditor.toSlateNode(editor, event.target)\n    const path = DOMEditor.findPath(editor, node)\n\n    // If the drop target is inside a void node, move it into either the\n    // next or previous node, depending on which side the `x` and `y`\n    // coordinates are closest to.\n    if (Element.isElement(node) && Editor.isVoid(editor, node)) {\n      const rect = target.getBoundingClientRect()\n      const isPrev = editor.isInline(node)\n        ? x - rect.left < rect.left + rect.width - x\n        : y - rect.top < rect.top + rect.height - y\n\n      const edge = Editor.point(editor, path, {\n        edge: isPrev ? 'start' : 'end',\n      })\n      const point = isPrev\n        ? Editor.before(editor, edge)\n        : Editor.after(editor, edge)\n\n      if (point) {\n        const range = Editor.range(editor, point)\n        return range\n      }\n    }\n\n    // Else resolve a range from the caret position where the drop occured.\n    let domRange\n    const { document } = DOMEditor.getWindow(editor)\n\n    // COMPAT: In Firefox, `caretRangeFromPoint` doesn't exist. (2016/07/25)\n    if (document.caretRangeFromPoint) {\n      domRange = document.caretRangeFromPoint(x, y)\n    } else {\n      const position = document.caretPositionFromPoint(x, y)\n\n      if (position) {\n        domRange = document.createRange()\n        domRange.setStart(position.offsetNode, position.offset)\n        domRange.setEnd(position.offsetNode, position.offset)\n      }\n    }\n\n    if (!domRange) {\n      throw new Error(`Cannot resolve a Slate range from a DOM event: ${event}`)\n    }\n\n    // Resolve a Slate range from the DOM range.\n    const range = DOMEditor.toSlateRange(editor, domRange, {\n      exactMatch: false,\n      suppressThrow: false,\n    })\n    return range\n  },\n\n  findKey: (editor, node) => {\n    let key = NODE_TO_KEY.get(node)\n\n    if (!key) {\n      key = new Key()\n      NODE_TO_KEY.set(node, key)\n    }\n\n    return key\n  },\n\n  findPath: (editor, node) => {\n    const path: Path = []\n    let child = node\n\n    while (true) {\n      const parent = NODE_TO_PARENT.get(child)\n\n      if (parent == null) {\n        if (Editor.isEditor(child)) {\n          return path\n        } else {\n          break\n        }\n      }\n\n      const i = NODE_TO_INDEX.get(child)\n\n      if (i == null) {\n        break\n      }\n\n      path.unshift(i)\n      child = parent\n    }\n\n    throw new Error(\n      `Unable to find the path for Slate node: ${Scrubber.stringify(node)}`\n    )\n  },\n\n  focus: (editor, options = { retries: 5 }) => {\n    // Return if already focused\n    if (IS_FOCUSED.get(editor)) {\n      return\n    }\n\n    // Return if no dom node is associated with the editor, which means the editor is not yet mounted\n    // or has been unmounted. This can happen especially, while retrying to focus the editor.\n    if (!EDITOR_TO_ELEMENT.get(editor)) {\n      return\n    }\n\n    // Retry setting focus if the editor has pending operations.\n    // The DOM (selection) is unstable while changes are applied.\n    // Retry until retries are exhausted or editor is focused.\n    if (options.retries <= 0) {\n      throw new Error(\n        'Could not set focus, editor seems stuck with pending operations'\n      )\n    }\n    if (editor.operations.length > 0) {\n      setTimeout(() => {\n        DOMEditor.focus(editor, { retries: options.retries - 1 })\n      }, 10)\n      return\n    }\n\n    const el = DOMEditor.toDOMNode(editor, editor)\n    const root = DOMEditor.findDocumentOrShadowRoot(editor)\n    if (root.activeElement !== el) {\n      // Ensure that the DOM selection state is set to the editor's selection\n      if (editor.selection && root instanceof Document) {\n        const domSelection = getSelection(root)\n        const domRange = DOMEditor.toDOMRange(editor, editor.selection)\n        domSelection?.removeAllRanges()\n        domSelection?.addRange(domRange)\n      }\n      // Create a new selection in the top of the document if missing\n      if (!editor.selection) {\n        Transforms.select(editor, Editor.start(editor, []))\n      }\n      // IS_FOCUSED should be set before calling el.focus() to ensure that\n      // FocusedContext is updated to the correct value\n      IS_FOCUSED.set(editor, true)\n      el.focus({ preventScroll: true })\n    }\n  },\n\n  getWindow: editor => {\n    const window = EDITOR_TO_WINDOW.get(editor)\n    if (!window) {\n      throw new Error('Unable to find a host window element for this editor')\n    }\n    return window\n  },\n\n  hasDOMNode: (editor, target, options = {}) => {\n    const { editable = false } = options\n    const editorEl = DOMEditor.toDOMNode(editor, editor)\n    let targetEl\n\n    // COMPAT: In Firefox, reading `target.nodeType` will throw an error if\n    // target is originating from an internal \"restricted\" element (e.g. a\n    // stepper arrow on a number input). (2018/05/04)\n    // https://github.com/ianstormtaylor/slate/issues/1819\n    try {\n      targetEl = (\n        isDOMElement(target) ? target : target.parentElement\n      ) as HTMLElement\n    } catch (err) {\n      if (\n        err instanceof Error &&\n        !err.message.includes('Permission denied to access property \"nodeType\"')\n      ) {\n        throw err\n      }\n    }\n\n    if (!targetEl) {\n      return false\n    }\n\n    return (\n      targetEl.closest(`[data-slate-editor]`) === editorEl &&\n      (!editable || targetEl.isContentEditable\n        ? true\n        : (typeof targetEl.isContentEditable === 'boolean' && // isContentEditable exists only on HTMLElement, and on other nodes it will be undefined\n            // this is the core logic that lets you know you got the right editor.selection instead of null when editor is contenteditable=\"false\"(readOnly)\n            targetEl.closest('[contenteditable=\"false\"]') === editorEl) ||\n          !!targetEl.getAttribute('data-slate-zero-width'))\n    )\n  },\n\n  hasEditableTarget: (editor, target): target is DOMNode =>\n    isDOMNode(target) &&\n    DOMEditor.hasDOMNode(editor, target, { editable: true }),\n\n  hasRange: (editor, range) => {\n    const { anchor, focus } = range\n    return (\n      Editor.hasPath(editor, anchor.path) && Editor.hasPath(editor, focus.path)\n    )\n  },\n\n  hasSelectableTarget: (editor, target) =>\n    DOMEditor.hasEditableTarget(editor, target) ||\n    DOMEditor.isTargetInsideNonReadonlyVoid(editor, target),\n\n  hasTarget: (editor, target): target is DOMNode =>\n    isDOMNode(target) && DOMEditor.hasDOMNode(editor, target),\n\n  insertData: (editor, data) => {\n    editor.insertData(data)\n  },\n\n  insertFragmentData: (editor, data) => editor.insertFragmentData(data),\n\n  insertTextData: (editor, data) => editor.insertTextData(data),\n\n  isComposing: editor => {\n    return !!IS_COMPOSING.get(editor)\n  },\n\n  isFocused: editor => !!IS_FOCUSED.get(editor),\n\n  isReadOnly: editor => !!IS_READ_ONLY.get(editor),\n\n  isTargetInsideNonReadonlyVoid: (editor, target) => {\n    if (IS_READ_ONLY.get(editor)) return false\n\n    const slateNode =\n      DOMEditor.hasTarget(editor, target) &&\n      DOMEditor.toSlateNode(editor, target)\n    return Element.isElement(slateNode) && Editor.isVoid(editor, slateNode)\n  },\n\n  setFragmentData: (editor, data, originEvent) =>\n    editor.setFragmentData(data, originEvent),\n\n  toDOMNode: (editor, node) => {\n    const KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor)\n    const domNode = Editor.isEditor(node)\n      ? EDITOR_TO_ELEMENT.get(editor)\n      : KEY_TO_ELEMENT?.get(DOMEditor.findKey(editor, node))\n\n    if (!domNode) {\n      throw new Error(\n        `Cannot resolve a DOM node from Slate node: ${Scrubber.stringify(node)}`\n      )\n    }\n\n    return domNode\n  },\n\n  toDOMPoint: (editor, point) => {\n    const [node] = Editor.node(editor, point.path)\n    const el = DOMEditor.toDOMNode(editor, node)\n    let domPoint: DOMPoint | undefined\n\n    // If we're inside a void node, force the offset to 0, otherwise the zero\n    // width spacing character will result in an incorrect offset of 1\n    if (Editor.void(editor, { at: point })) {\n      point = { path: point.path, offset: 0 }\n    }\n\n    // For each leaf, we need to isolate its content, which means filtering\n    // to its direct text and zero-width spans. (We have to filter out any\n    // other siblings that may have been rendered alongside them.)\n    const selector = `[data-slate-string], [data-slate-zero-width]`\n    const texts = Array.from(el.querySelectorAll(selector))\n    let start = 0\n\n    for (let i = 0; i < texts.length; i++) {\n      const text = texts[i]\n      const domNode = text.childNodes[0] as HTMLElement\n\n      if (domNode == null || domNode.textContent == null) {\n        continue\n      }\n\n      const { length } = domNode.textContent\n      const attr = text.getAttribute('data-slate-length')\n      const trueLength = attr == null ? length : parseInt(attr, 10)\n      const end = start + trueLength\n\n      // Prefer putting the selection inside the mark placeholder to ensure\n      // composed text is displayed with the correct marks.\n      const nextText = texts[i + 1]\n      if (\n        point.offset === end &&\n        nextText?.hasAttribute('data-slate-mark-placeholder')\n      ) {\n        const domText = nextText.childNodes[0]\n\n        domPoint = [\n          // COMPAT: If we don't explicity set the dom point to be on the actual\n          // dom text element, chrome will put the selection behind the actual dom\n          // text element, causing domRange.getBoundingClientRect() calls on a collapsed\n          // selection to return incorrect zero values (https://bugs.chromium.org/p/chromium/issues/detail?id=435438)\n          // which will cause issues when scrolling to it.\n          domText instanceof DOMText ? domText : nextText,\n          nextText.textContent?.startsWith('\\uFEFF') ? 1 : 0,\n        ]\n        break\n      }\n\n      if (point.offset <= end) {\n        const offset = Math.min(length, Math.max(0, point.offset - start))\n        domPoint = [domNode, offset]\n        break\n      }\n\n      start = end\n    }\n\n    if (!domPoint) {\n      throw new Error(\n        `Cannot resolve a DOM point from Slate point: ${Scrubber.stringify(\n          point\n        )}`\n      )\n    }\n\n    return domPoint\n  },\n\n  toDOMRange: (editor, range) => {\n    const { anchor, focus } = range\n    const isBackward = Range.isBackward(range)\n    const domAnchor = DOMEditor.toDOMPoint(editor, anchor)\n    const domFocus = Range.isCollapsed(range)\n      ? domAnchor\n      : DOMEditor.toDOMPoint(editor, focus)\n\n    const window = DOMEditor.getWindow(editor)\n    const domRange = window.document.createRange()\n    const [startNode, startOffset] = isBackward ? domFocus : domAnchor\n    const [endNode, endOffset] = isBackward ? domAnchor : domFocus\n\n    // A slate Point at zero-width Leaf always has an offset of 0 but a native DOM selection at\n    // zero-width node has an offset of 1 so we have to check if we are in a zero-width node and\n    // adjust the offset accordingly.\n    const startEl = (\n      isDOMElement(startNode) ? startNode : startNode.parentElement\n    ) as HTMLElement\n    const isStartAtZeroWidth = !!startEl.getAttribute('data-slate-zero-width')\n    const endEl = (\n      isDOMElement(endNode) ? endNode : endNode.parentElement\n    ) as HTMLElement\n    const isEndAtZeroWidth = !!endEl.getAttribute('data-slate-zero-width')\n\n    domRange.setStart(startNode, isStartAtZeroWidth ? 1 : startOffset)\n    domRange.setEnd(endNode, isEndAtZeroWidth ? 1 : endOffset)\n    return domRange\n  },\n\n  toSlateNode: (editor, domNode) => {\n    let domEl = isDOMElement(domNode) ? domNode : domNode.parentElement\n\n    if (domEl && !domEl.hasAttribute('data-slate-node')) {\n      domEl = domEl.closest(`[data-slate-node]`)\n    }\n\n    const node = domEl ? ELEMENT_TO_NODE.get(domEl as HTMLElement) : null\n\n    if (!node) {\n      throw new Error(`Cannot resolve a Slate node from DOM node: ${domEl}`)\n    }\n\n    return node\n  },\n\n  toSlatePoint: <T extends boolean>(\n    editor: DOMEditor,\n    domPoint: DOMPoint,\n    options: {\n      exactMatch: boolean\n      suppressThrow: T\n      searchDirection?: 'forward' | 'backward'\n    }\n  ): T extends true ? Point | null : Point => {\n    const { exactMatch, suppressThrow, searchDirection } = options\n    const [nearestNode, nearestOffset] = exactMatch\n      ? domPoint\n      : normalizeDOMPoint(domPoint)\n    const parentNode = nearestNode.parentNode as DOMElement\n    let textNode: DOMElement | null = null\n    let offset = 0\n\n    if (parentNode) {\n      const editorEl = DOMEditor.toDOMNode(editor, editor)\n      const potentialVoidNode = parentNode.closest('[data-slate-void=\"true\"]')\n      // Need to ensure that the closest void node is actually a void node\n      // within this editor, and not a void node within some parent editor. This can happen\n      // if this editor is within a void node of another editor (\"nested editors\", like in\n      // the \"Editable Voids\" example on the docs site).\n      const voidNode =\n        potentialVoidNode && editorEl.contains(potentialVoidNode)\n          ? potentialVoidNode\n          : null\n      const potentialNonEditableNode = parentNode.closest(\n        '[contenteditable=\"false\"]'\n      )\n      const nonEditableNode =\n        potentialNonEditableNode && editorEl.contains(potentialNonEditableNode)\n          ? potentialNonEditableNode\n          : null\n      let leafNode = parentNode.closest('[data-slate-leaf]')\n      let domNode: DOMElement | null = null\n\n      // Calculate how far into the text node the `nearestNode` is, so that we\n      // can determine what the offset relative to the text node is.\n      if (leafNode) {\n        textNode = leafNode.closest('[data-slate-node=\"text\"]')\n\n        if (textNode) {\n          const window = DOMEditor.getWindow(editor)\n          const range = window.document.createRange()\n          range.setStart(textNode, 0)\n          range.setEnd(nearestNode, nearestOffset)\n\n          const contents = range.cloneContents()\n          const removals = [\n            ...Array.prototype.slice.call(\n              contents.querySelectorAll('[data-slate-zero-width]')\n            ),\n            ...Array.prototype.slice.call(\n              contents.querySelectorAll('[contenteditable=false]')\n            ),\n          ]\n\n          removals.forEach(el => {\n            // COMPAT: While composing at the start of a text node, some keyboards put\n            // the text content inside the zero width space.\n            if (\n              IS_ANDROID &&\n              !exactMatch &&\n              el.hasAttribute('data-slate-zero-width') &&\n              el.textContent.length > 0 &&\n              el.textContext !== '\\uFEFF'\n            ) {\n              if (el.textContent.startsWith('\\uFEFF')) {\n                el.textContent = el.textContent.slice(1)\n              }\n\n              return\n            }\n\n            el!.parentNode!.removeChild(el)\n          })\n\n          // COMPAT: Edge has a bug where Range.prototype.toString() will\n          // convert \\n into \\r\\n. The bug causes a loop when slate-dom\n          // attempts to reposition its cursor to match the native position. Use\n          // textContent.length instead.\n          // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10291116/\n          offset = contents.textContent!.length\n          domNode = textNode\n        }\n      } else if (voidNode) {\n        // For void nodes, the element with the offset key will be a cousin, not an\n        // ancestor, so find it by going down from the nearest void parent and taking the\n        // first one that isn't inside a nested editor.\n        const leafNodes = voidNode.querySelectorAll('[data-slate-leaf]')\n        for (let index = 0; index < leafNodes.length; index++) {\n          const current = leafNodes[index]\n          if (DOMEditor.hasDOMNode(editor, current)) {\n            leafNode = current\n            break\n          }\n        }\n\n        // COMPAT: In read-only editors the leaf is not rendered.\n        if (!leafNode) {\n          offset = 1\n        } else {\n          textNode = leafNode.closest('[data-slate-node=\"text\"]')!\n          domNode = leafNode\n          offset = domNode.textContent!.length\n          domNode.querySelectorAll('[data-slate-zero-width]').forEach(el => {\n            offset -= el.textContent!.length\n          })\n        }\n      } else if (nonEditableNode) {\n        // Find the edge of the nearest leaf in `searchDirection`\n        const getLeafNodes = (node: DOMElement | null | undefined) =>\n          node\n            ? node.querySelectorAll(\n                // Exclude leaf nodes in nested editors\n                '[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])'\n              )\n            : []\n        const elementNode = nonEditableNode.closest(\n          '[data-slate-node=\"element\"]'\n        )\n\n        if (searchDirection === 'backward' || !searchDirection) {\n          const leafNodes = [\n            ...getLeafNodes(elementNode?.previousElementSibling),\n            ...getLeafNodes(elementNode),\n          ]\n\n          leafNode =\n            leafNodes.findLast(leaf => isBefore(nonEditableNode, leaf)) ?? null\n\n          if (leafNode) {\n            searchDirection === 'backward'\n          }\n        }\n\n        if (searchDirection === 'forward' || !searchDirection) {\n          const leafNodes = [\n            ...getLeafNodes(elementNode),\n            ...getLeafNodes(elementNode?.nextElementSibling),\n          ]\n\n          leafNode =\n            leafNodes.find(leaf => isAfter(nonEditableNode, leaf)) ?? null\n\n          if (leafNode) {\n            searchDirection === 'forward'\n          }\n        }\n\n        if (leafNode) {\n          textNode = leafNode.closest('[data-slate-node=\"text\"]')!\n          domNode = leafNode\n          if (searchDirection === 'forward') {\n            offset = 0\n          } else {\n            offset = domNode.textContent!.length\n            domNode.querySelectorAll('[data-slate-zero-width]').forEach(el => {\n              offset -= el.textContent!.length\n            })\n          }\n        }\n      }\n\n      if (\n        domNode &&\n        offset === domNode.textContent!.length &&\n        // COMPAT: Android IMEs might remove the zero width space while composing,\n        // and we don't add it for line-breaks.\n        IS_ANDROID &&\n        domNode.getAttribute('data-slate-zero-width') === 'z' &&\n        domNode.textContent?.startsWith('\\uFEFF') &&\n        // COMPAT: If the parent node is a Slate zero-width space, editor is\n        // because the text node should have no characters. However, during IME\n        // composition the ASCII characters will be prepended to the zero-width\n        // space, so subtract 1 from the offset to account for the zero-width\n        // space character.\n        (parentNode.hasAttribute('data-slate-zero-width') ||\n          // COMPAT: In Firefox, `range.cloneContents()` returns an extra trailing '\\n'\n          // when the document ends with a new-line character. This results in the offset\n          // length being off by one, so we need to subtract one to account for this.\n          (IS_FIREFOX && domNode.textContent?.endsWith('\\n\\n')))\n      ) {\n        offset--\n      }\n    }\n\n    if (IS_ANDROID && !textNode && !exactMatch) {\n      const node = parentNode.hasAttribute('data-slate-node')\n        ? parentNode\n        : parentNode.closest('[data-slate-node]')\n\n      if (node && DOMEditor.hasDOMNode(editor, node, { editable: true })) {\n        const slateNode = DOMEditor.toSlateNode(editor, node)\n        let { path, offset } = Editor.start(\n          editor,\n          DOMEditor.findPath(editor, slateNode)\n        )\n\n        if (!node.querySelector('[data-slate-leaf]')) {\n          offset = nearestOffset\n        }\n\n        return { path, offset } as T extends true ? Point | null : Point\n      }\n    }\n\n    if (!textNode) {\n      if (suppressThrow) {\n        return null as T extends true ? Point | null : Point\n      }\n      throw new Error(\n        `Cannot resolve a Slate point from DOM point: ${domPoint}`\n      )\n    }\n\n    // COMPAT: If someone is clicking from one Slate editor into another,\n    // the select event fires twice, once for the old editor's `element`\n    // first, and then afterwards for the correct `element`. (2017/03/03)\n    const slateNode = DOMEditor.toSlateNode(editor, textNode!)\n    const path = DOMEditor.findPath(editor, slateNode)\n    return { path, offset } as T extends true ? Point | null : Point\n  },\n\n  toSlateRange: <T extends boolean>(\n    editor: DOMEditor,\n    domRange: DOMRange | DOMStaticRange | DOMSelection,\n    options: {\n      exactMatch: boolean\n      suppressThrow: T\n    }\n  ): T extends true ? Range | null : Range => {\n    const { exactMatch, suppressThrow } = options\n    const el = isDOMSelection(domRange)\n      ? domRange.anchorNode\n      : domRange.startContainer\n    let anchorNode\n    let anchorOffset\n    let focusNode\n    let focusOffset\n    let isCollapsed\n\n    if (el) {\n      if (isDOMSelection(domRange)) {\n        // COMPAT: In firefox the normal seletion way does not work\n        // (https://github.com/ianstormtaylor/slate/pull/5486#issue-1820720223)\n        if (IS_FIREFOX && domRange.rangeCount > 1) {\n          focusNode = domRange.focusNode // Focus node works fine\n          const firstRange = domRange.getRangeAt(0)\n          const lastRange = domRange.getRangeAt(domRange.rangeCount - 1)\n\n          // Here we are in the contenteditable mode of a table in firefox\n          if (\n            focusNode instanceof HTMLTableRowElement &&\n            firstRange.startContainer instanceof HTMLTableRowElement &&\n            lastRange.startContainer instanceof HTMLTableRowElement\n          ) {\n            // HTMLElement, becouse Element is a slate element\n            function getLastChildren(element: HTMLElement): HTMLElement {\n              if (element.childElementCount > 0) {\n                return getLastChildren(<HTMLElement>element.children[0])\n              } else {\n                return element\n              }\n            }\n\n            const firstNodeRow = <HTMLTableRowElement>firstRange.startContainer\n            const lastNodeRow = <HTMLTableRowElement>lastRange.startContainer\n\n            // This should never fail as \"The HTMLElement interface represents any HTML element.\"\n            const firstNode = getLastChildren(\n              <HTMLElement>firstNodeRow.children[firstRange.startOffset]\n            )\n            const lastNode = getLastChildren(\n              <HTMLElement>lastNodeRow.children[lastRange.startOffset]\n            )\n\n            // Zero, as we allways take the right one as the anchor point\n            focusOffset = 0\n\n            if (lastNode.childNodes.length > 0) {\n              anchorNode = lastNode.childNodes[0]\n            } else {\n              anchorNode = lastNode\n            }\n\n            if (firstNode.childNodes.length > 0) {\n              focusNode = firstNode.childNodes[0]\n            } else {\n              focusNode = firstNode\n            }\n\n            if (lastNode instanceof HTMLElement) {\n              anchorOffset = (<HTMLElement>lastNode).innerHTML.length\n            } else {\n              // Fallback option\n              anchorOffset = 0\n            }\n          } else {\n            // This is the read only mode of a firefox table\n            // Right to left\n            if (firstRange.startContainer === focusNode) {\n              anchorNode = lastRange.endContainer\n              anchorOffset = lastRange.endOffset\n              focusOffset = firstRange.startOffset\n            } else {\n              // Left to right\n              anchorNode = firstRange.startContainer\n              anchorOffset = firstRange.endOffset\n              focusOffset = lastRange.startOffset\n            }\n          }\n        } else {\n          anchorNode = domRange.anchorNode\n          anchorOffset = domRange.anchorOffset\n          focusNode = domRange.focusNode\n          focusOffset = domRange.focusOffset\n        }\n\n        // COMPAT: There's a bug in chrome that always returns `true` for\n        // `isCollapsed` for a Selection that comes from a ShadowRoot.\n        // (2020/08/08)\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=447523\n        // IsCollapsed might not work in firefox, but this will\n        if ((IS_CHROME && hasShadowRoot(anchorNode)) || IS_FIREFOX) {\n          isCollapsed =\n            domRange.anchorNode === domRange.focusNode &&\n            domRange.anchorOffset === domRange.focusOffset\n        } else {\n          isCollapsed = domRange.isCollapsed\n        }\n      } else {\n        anchorNode = domRange.startContainer\n        anchorOffset = domRange.startOffset\n        focusNode = domRange.endContainer\n        focusOffset = domRange.endOffset\n        isCollapsed = domRange.collapsed\n      }\n    }\n\n    if (\n      anchorNode == null ||\n      focusNode == null ||\n      anchorOffset == null ||\n      focusOffset == null\n    ) {\n      throw new Error(\n        `Cannot resolve a Slate range from DOM range: ${domRange}`\n      )\n    }\n\n    // COMPAT: Firefox sometimes includes an extra \\n (rendered by TextString\n    // when isTrailing is true) in the focusOffset, resulting in an invalid\n    // Slate point. (2023/11/01)\n    if (\n      IS_FIREFOX &&\n      focusNode.textContent?.endsWith('\\n\\n') &&\n      focusOffset === focusNode.textContent.length\n    ) {\n      focusOffset--\n    }\n\n    const anchor = DOMEditor.toSlatePoint(editor, [anchorNode, anchorOffset], {\n      exactMatch,\n      suppressThrow,\n    })\n    if (!anchor) {\n      return null as T extends true ? Range | null : Range\n    }\n\n    const focusBeforeAnchor =\n      isBefore(anchorNode, focusNode) ||\n      (anchorNode === focusNode && focusOffset < anchorOffset)\n    const focus = isCollapsed\n      ? anchor\n      : DOMEditor.toSlatePoint(editor, [focusNode, focusOffset], {\n          exactMatch,\n          suppressThrow,\n          searchDirection: focusBeforeAnchor ? 'forward' : 'backward',\n        })\n    if (!focus) {\n      return null as T extends true ? Range | null : Range\n    }\n\n    let range: Range = { anchor: anchor as Point, focus: focus as Point }\n    // if the selection is a hanging range that ends in a void\n    // and the DOM focus is an Element\n    // (meaning that the selection ends before the element)\n    // unhang the range to avoid mistakenly including the void\n    if (\n      Range.isExpanded(range) &&\n      Range.isForward(range) &&\n      isDOMElement(focusNode) &&\n      Editor.void(editor, { at: range.focus, mode: 'highest' })\n    ) {\n      range = Editor.unhangRange(editor, range, { voids: true })\n    }\n\n    return range as unknown as T extends true ? Range | null : Range\n  },\n}\n","import {\n  Editor,\n  Node,\n  Operation,\n  Path,\n  Point,\n  Range,\n  Text,\n  Element,\n} from 'slate'\nimport { EDITOR_TO_PENDING_DIFFS } from './weak-maps'\n\nexport type StringDiff = {\n  start: number\n  end: number\n  text: string\n}\n\nexport type TextDiff = {\n  id: number\n  path: Path\n  diff: StringDiff\n}\n\n/**\n * Check whether a text diff was applied in a way we can perform the pending action on /\n * recover the pending selection.\n */\nexport function verifyDiffState(editor: Editor, textDiff: TextDiff): boolean {\n  const { path, diff } = textDiff\n  if (!Editor.hasPath(editor, path)) {\n    return false\n  }\n\n  const node = Node.get(editor, path)\n  if (!Text.isText(node)) {\n    return false\n  }\n\n  if (diff.start !== node.text.length || diff.text.length === 0) {\n    return (\n      node.text.slice(diff.start, diff.start + diff.text.length) === diff.text\n    )\n  }\n\n  const nextPath = Path.next(path)\n  if (!Editor.hasPath(editor, nextPath)) {\n    return false\n  }\n\n  const nextNode = Node.get(editor, nextPath)\n  return Text.isText(nextNode) && nextNode.text.startsWith(diff.text)\n}\n\nexport function applyStringDiff(text: string, ...diffs: StringDiff[]) {\n  return diffs.reduce(\n    (text, diff) =>\n      text.slice(0, diff.start) + diff.text + text.slice(diff.end),\n    text\n  )\n}\n\nfunction longestCommonPrefixLength(str: string, another: string) {\n  const length = Math.min(str.length, another.length)\n\n  for (let i = 0; i < length; i++) {\n    if (str.charAt(i) !== another.charAt(i)) {\n      return i\n    }\n  }\n\n  return length\n}\n\nfunction longestCommonSuffixLength(\n  str: string,\n  another: string,\n  max: number\n): number {\n  const length = Math.min(str.length, another.length, max)\n\n  for (let i = 0; i < length; i++) {\n    if (\n      str.charAt(str.length - i - 1) !== another.charAt(another.length - i - 1)\n    ) {\n      return i\n    }\n  }\n\n  return length\n}\n\n/**\n * Remove redundant changes from the diff so that it spans the minimal possible range\n */\nexport function normalizeStringDiff(targetText: string, diff: StringDiff) {\n  const { start, end, text } = diff\n  const removedText = targetText.slice(start, end)\n\n  const prefixLength = longestCommonPrefixLength(removedText, text)\n  const max = Math.min(\n    removedText.length - prefixLength,\n    text.length - prefixLength\n  )\n  const suffixLength = longestCommonSuffixLength(removedText, text, max)\n\n  const normalized: StringDiff = {\n    start: start + prefixLength,\n    end: end - suffixLength,\n    text: text.slice(prefixLength, text.length - suffixLength),\n  }\n\n  if (normalized.start === normalized.end && normalized.text.length === 0) {\n    return null\n  }\n\n  return normalized\n}\n\n/**\n * Return a string diff that is equivalent to applying b after a spanning the range of\n * both changes\n */\nexport function mergeStringDiffs(\n  targetText: string,\n  a: StringDiff,\n  b: StringDiff\n): StringDiff | null {\n  const start = Math.min(a.start, b.start)\n  const overlap = Math.max(\n    0,\n    Math.min(a.start + a.text.length, b.end) - b.start\n  )\n\n  const applied = applyStringDiff(targetText, a, b)\n  const sliceEnd = Math.max(\n    b.start + b.text.length,\n    a.start +\n      a.text.length +\n      (a.start + a.text.length > b.start ? b.text.length : 0) -\n      overlap\n  )\n\n  const text = applied.slice(start, sliceEnd)\n  const end = Math.max(a.end, b.end - a.text.length + (a.end - a.start))\n  return normalizeStringDiff(targetText, { start, end, text })\n}\n\n/**\n * Get the slate range the text diff spans.\n */\nexport function targetRange(textDiff: TextDiff): Range {\n  const { path, diff } = textDiff\n  return {\n    anchor: { path, offset: diff.start },\n    focus: { path, offset: diff.end },\n  }\n}\n\n/**\n * Normalize a 'pending point' a.k.a a point based on the dom state before applying\n * the pending diffs. Since the pending diffs might have been inserted with different\n * marks we have to 'walk' the offset from the starting position to ensure we still\n * have a valid point inside the document\n */\nexport function normalizePoint(editor: Editor, point: Point): Point | null {\n  let { path, offset } = point\n  if (!Editor.hasPath(editor, path)) {\n    return null\n  }\n\n  let leaf = Node.get(editor, path)\n  if (!Text.isText(leaf)) {\n    return null\n  }\n\n  const parentBlock = Editor.above(editor, {\n    match: n => Element.isElement(n) && Editor.isBlock(editor, n),\n    at: path,\n  })\n\n  if (!parentBlock) {\n    return null\n  }\n\n  while (offset > leaf.text.length) {\n    const entry = Editor.next(editor, { at: path, match: Text.isText })\n    if (!entry || !Path.isDescendant(entry[1], parentBlock[1])) {\n      return null\n    }\n\n    offset -= leaf.text.length\n    leaf = entry[0]\n    path = entry[1]\n  }\n\n  return { path, offset }\n}\n\n/**\n * Normalize a 'pending selection' to ensure it's valid in the current document state.\n */\nexport function normalizeRange(editor: Editor, range: Range): Range | null {\n  const anchor = normalizePoint(editor, range.anchor)\n  if (!anchor) {\n    return null\n  }\n\n  if (Range.isCollapsed(range)) {\n    return { anchor, focus: anchor }\n  }\n\n  const focus = normalizePoint(editor, range.focus)\n  if (!focus) {\n    return null\n  }\n\n  return { anchor, focus }\n}\n\nexport function transformPendingPoint(\n  editor: Editor,\n  point: Point,\n  op: Operation\n): Point | null {\n  const pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(editor)\n  const textDiff = pendingDiffs?.find(({ path }) =>\n    Path.equals(path, point.path)\n  )\n\n  if (!textDiff || point.offset <= textDiff.diff.start) {\n    return Point.transform(point, op, { affinity: 'backward' })\n  }\n\n  const { diff } = textDiff\n  // Point references location inside the diff => transform the point based on the location\n  // the diff will be applied to and add the offset inside the diff.\n  if (point.offset <= diff.start + diff.text.length) {\n    const anchor = { path: point.path, offset: diff.start }\n    const transformed = Point.transform(anchor, op, {\n      affinity: 'backward',\n    })\n\n    if (!transformed) {\n      return null\n    }\n\n    return {\n      path: transformed.path,\n      offset: transformed.offset + point.offset - diff.start,\n    }\n  }\n\n  // Point references location after the diff\n  const anchor = {\n    path: point.path,\n    offset: point.offset - diff.text.length + diff.end - diff.start,\n  }\n  const transformed = Point.transform(anchor, op, {\n    affinity: 'backward',\n  })\n  if (!transformed) {\n    return null\n  }\n\n  if (\n    op.type === 'split_node' &&\n    Path.equals(op.path, point.path) &&\n    anchor.offset < op.position &&\n    diff.start < op.position\n  ) {\n    return transformed\n  }\n\n  return {\n    path: transformed.path,\n    offset: transformed.offset + diff.text.length - diff.end + diff.start,\n  }\n}\n\nexport function transformPendingRange(\n  editor: Editor,\n  range: Range,\n  op: Operation\n): Range | null {\n  const anchor = transformPendingPoint(editor, range.anchor, op)\n  if (!anchor) {\n    return null\n  }\n\n  if (Range.isCollapsed(range)) {\n    return { anchor, focus: anchor }\n  }\n\n  const focus = transformPendingPoint(editor, range.focus, op)\n  if (!focus) {\n    return null\n  }\n\n  return { anchor, focus }\n}\n\nexport function transformTextDiff(\n  textDiff: TextDiff,\n  op: Operation\n): TextDiff | null {\n  const { path, diff, id } = textDiff\n\n  switch (op.type) {\n    case 'insert_text': {\n      if (!Path.equals(op.path, path) || op.offset >= diff.end) {\n        return textDiff\n      }\n\n      if (op.offset <= diff.start) {\n        return {\n          diff: {\n            start: op.text.length + diff.start,\n            end: op.text.length + diff.end,\n            text: diff.text,\n          },\n          id,\n          path,\n        }\n      }\n\n      return {\n        diff: {\n          start: diff.start,\n          end: diff.end + op.text.length,\n          text: diff.text,\n        },\n        id,\n        path,\n      }\n    }\n    case 'remove_text': {\n      if (!Path.equals(op.path, path) || op.offset >= diff.end) {\n        return textDiff\n      }\n\n      if (op.offset + op.text.length <= diff.start) {\n        return {\n          diff: {\n            start: diff.start - op.text.length,\n            end: diff.end - op.text.length,\n            text: diff.text,\n          },\n          id,\n          path,\n        }\n      }\n\n      return {\n        diff: {\n          start: diff.start,\n          end: diff.end - op.text.length,\n          text: diff.text,\n        },\n        id,\n        path,\n      }\n    }\n    case 'split_node': {\n      if (!Path.equals(op.path, path) || op.position >= diff.end) {\n        return {\n          diff,\n          id,\n          path: Path.transform(path, op, { affinity: 'backward' })!,\n        }\n      }\n\n      if (op.position > diff.start) {\n        return {\n          diff: {\n            start: diff.start,\n            end: Math.min(op.position, diff.end),\n            text: diff.text,\n          },\n          id,\n          path,\n        }\n      }\n\n      return {\n        diff: {\n          start: diff.start - op.position,\n          end: diff.end - op.position,\n          text: diff.text,\n        },\n        id,\n        path: Path.transform(path, op, { affinity: 'forward' })!,\n      }\n    }\n    case 'merge_node': {\n      if (!Path.equals(op.path, path)) {\n        return {\n          diff,\n          id,\n          path: Path.transform(path, op)!,\n        }\n      }\n\n      return {\n        diff: {\n          start: diff.start + op.position,\n          end: diff.end + op.position,\n          text: diff.text,\n        },\n        id,\n        path: Path.transform(path, op)!,\n      }\n    }\n  }\n\n  const newPath = Path.transform(path, op)\n  if (!newPath) {\n    return null\n  }\n\n  return {\n    diff,\n    path: newPath,\n    id,\n  }\n}\n","/**\n * Utilities for single-line deletion\n */\n\nimport { Editor, Range } from 'slate'\nimport { DOMEditor } from '../plugin/dom-editor'\n\nconst doRectsIntersect = (rect: DOMRect, compareRect: DOMRect) => {\n  const middle = (compareRect.top + compareRect.bottom) / 2\n\n  return rect.top <= middle && rect.bottom >= middle\n}\n\nconst areRangesSameLine = (editor: DOMEditor, range1: Range, range2: Range) => {\n  const rect1 = DOMEditor.toDOMRange(editor, range1).getBoundingClientRect()\n  const rect2 = DOMEditor.toDOMRange(editor, range2).getBoundingClientRect()\n\n  return doRectsIntersect(rect1, rect2) && doRectsIntersect(rect2, rect1)\n}\n\n/**\n * A helper utility that returns the end portion of a `Range`\n * which is located on a single line.\n *\n * @param {Editor} editor The editor object to compare against\n * @param {Range} parentRange The parent range to compare against\n * @returns {Range} A valid portion of the parentRange which is one a single line\n */\nexport const findCurrentLineRange = (\n  editor: DOMEditor,\n  parentRange: Range\n): Range => {\n  const parentRangeBoundary = Editor.range(editor, Range.end(parentRange))\n  const positions = Array.from(Editor.positions(editor, { at: parentRange }))\n\n  let left = 0\n  let right = positions.length\n  let middle = Math.floor(right / 2)\n\n  if (\n    areRangesSameLine(\n      editor,\n      Editor.range(editor, positions[left]),\n      parentRangeBoundary\n    )\n  ) {\n    return Editor.range(editor, positions[left], parentRangeBoundary)\n  }\n\n  if (positions.length < 2) {\n    return Editor.range(\n      editor,\n      positions[positions.length - 1],\n      parentRangeBoundary\n    )\n  }\n\n  while (middle !== positions.length && middle !== left) {\n    if (\n      areRangesSameLine(\n        editor,\n        Editor.range(editor, positions[middle]),\n        parentRangeBoundary\n      )\n    ) {\n      right = middle\n    } else {\n      left = middle\n    }\n\n    middle = Math.floor((left + right) / 2)\n  }\n\n  return Editor.range(editor, positions[left], parentRangeBoundary)\n}\n","import {\n  BaseEditor,\n  Editor,\n  Element,\n  Node,\n  Operation,\n  Path,\n  PathRef,\n  Point,\n  Range,\n  Transforms,\n} from 'slate'\nimport {\n  TextDiff,\n  transformPendingPoint,\n  transformPendingRange,\n  transformTextDiff,\n} from '../utils/diff-text'\nimport {\n  getPlainText,\n  getSlateFragmentAttribute,\n  isDOMText,\n} from '../utils/dom'\nimport { Key } from '../utils/key'\nimport { findCurrentLineRange } from '../utils/lines'\nimport {\n  IS_NODE_MAP_DIRTY,\n  EDITOR_TO_KEY_TO_ELEMENT,\n  EDITOR_TO_ON_CHANGE,\n  EDITOR_TO_PENDING_ACTION,\n  EDITOR_TO_PENDING_DIFFS,\n  EDITOR_TO_PENDING_INSERTION_MARKS,\n  EDITOR_TO_PENDING_SELECTION,\n  EDITOR_TO_SCHEDULE_FLUSH,\n  EDITOR_TO_USER_MARKS,\n  EDITOR_TO_USER_SELECTION,\n  NODE_TO_KEY,\n} from '../utils/weak-maps'\nimport { DOMEditor } from './dom-editor'\n\n/**\n * `withDOM` adds DOM specific behaviors to the editor.\n *\n * If you are using TypeScript, you must extend Slate's CustomTypes to use\n * this plugin.\n *\n * See https://docs.slatejs.org/concepts/11-typescript to learn how.\n */\n\nexport const withDOM = <T extends BaseEditor>(\n  editor: T,\n  clipboardFormatKey = 'x-slate-fragment'\n): T & DOMEditor => {\n  const e = editor as T & DOMEditor\n  const { apply, onChange, deleteBackward, addMark, removeMark } = e\n\n  // The WeakMap which maps a key to a specific HTMLElement must be scoped to the editor instance to\n  // avoid collisions between editors in the DOM that share the same value.\n  EDITOR_TO_KEY_TO_ELEMENT.set(e, new WeakMap())\n\n  e.addMark = (key, value) => {\n    EDITOR_TO_SCHEDULE_FLUSH.get(e)?.()\n\n    if (\n      !EDITOR_TO_PENDING_INSERTION_MARKS.get(e) &&\n      EDITOR_TO_PENDING_DIFFS.get(e)?.length\n    ) {\n      // Ensure the current pending diffs originating from changes before the addMark\n      // are applied with the current formatting\n      EDITOR_TO_PENDING_INSERTION_MARKS.set(e, null)\n    }\n\n    EDITOR_TO_USER_MARKS.delete(e)\n\n    addMark(key, value)\n  }\n\n  e.removeMark = key => {\n    if (\n      !EDITOR_TO_PENDING_INSERTION_MARKS.get(e) &&\n      EDITOR_TO_PENDING_DIFFS.get(e)?.length\n    ) {\n      // Ensure the current pending diffs originating from changes before the addMark\n      // are applied with the current formatting\n      EDITOR_TO_PENDING_INSERTION_MARKS.set(e, null)\n    }\n\n    EDITOR_TO_USER_MARKS.delete(e)\n\n    removeMark(key)\n  }\n\n  e.deleteBackward = unit => {\n    if (unit !== 'line') {\n      return deleteBackward(unit)\n    }\n\n    if (e.selection && Range.isCollapsed(e.selection)) {\n      const parentBlockEntry = Editor.above(e, {\n        match: n => Element.isElement(n) && Editor.isBlock(e, n),\n        at: e.selection,\n      })\n\n      if (parentBlockEntry) {\n        const [, parentBlockPath] = parentBlockEntry\n        const parentElementRange = Editor.range(\n          e,\n          parentBlockPath,\n          e.selection.anchor\n        )\n\n        const currentLineRange = findCurrentLineRange(e, parentElementRange)\n\n        if (!Range.isCollapsed(currentLineRange)) {\n          Transforms.delete(e, { at: currentLineRange })\n        }\n      }\n    }\n  }\n\n  // This attempts to reset the NODE_TO_KEY entry to the correct value\n  // as apply() changes the object reference and hence invalidates the NODE_TO_KEY entry\n  e.apply = (op: Operation) => {\n    const matches: [Path, Key][] = []\n    const pathRefMatches: [PathRef, Key][] = []\n\n    const pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(e)\n    if (pendingDiffs?.length) {\n      const transformed = pendingDiffs\n        .map(textDiff => transformTextDiff(textDiff, op))\n        .filter(Boolean) as TextDiff[]\n\n      EDITOR_TO_PENDING_DIFFS.set(e, transformed)\n    }\n\n    const pendingSelection = EDITOR_TO_PENDING_SELECTION.get(e)\n    if (pendingSelection) {\n      EDITOR_TO_PENDING_SELECTION.set(\n        e,\n        transformPendingRange(e, pendingSelection, op)\n      )\n    }\n\n    const pendingAction = EDITOR_TO_PENDING_ACTION.get(e)\n    if (pendingAction?.at) {\n      const at = Point.isPoint(pendingAction?.at)\n        ? transformPendingPoint(e, pendingAction.at, op)\n        : transformPendingRange(e, pendingAction.at, op)\n\n      EDITOR_TO_PENDING_ACTION.set(e, at ? { ...pendingAction, at } : null)\n    }\n\n    switch (op.type) {\n      case 'insert_text':\n      case 'remove_text':\n      case 'set_node':\n      case 'split_node': {\n        matches.push(...getMatches(e, op.path))\n        break\n      }\n\n      case 'set_selection': {\n        // Selection was manually set, don't restore the user selection after the change.\n        EDITOR_TO_USER_SELECTION.get(e)?.unref()\n        EDITOR_TO_USER_SELECTION.delete(e)\n        break\n      }\n\n      case 'insert_node':\n      case 'remove_node': {\n        matches.push(...getMatches(e, Path.parent(op.path)))\n        break\n      }\n\n      case 'merge_node': {\n        const prevPath = Path.previous(op.path)\n        matches.push(...getMatches(e, prevPath))\n        break\n      }\n\n      case 'move_node': {\n        const commonPath = Path.common(\n          Path.parent(op.path),\n          Path.parent(op.newPath)\n        )\n        matches.push(...getMatches(e, commonPath))\n\n        let changedPath: Path\n        if (Path.isBefore(op.path, op.newPath)) {\n          matches.push(...getMatches(e, Path.parent(op.path)))\n          changedPath = op.newPath\n        } else {\n          matches.push(...getMatches(e, Path.parent(op.newPath)))\n          changedPath = op.path\n        }\n\n        const changedNode = Node.get(editor, Path.parent(changedPath))\n        const changedNodeKey = DOMEditor.findKey(e, changedNode)\n        const changedPathRef = Editor.pathRef(e, Path.parent(changedPath))\n        pathRefMatches.push([changedPathRef, changedNodeKey])\n\n        break\n      }\n    }\n\n    apply(op)\n\n    switch (op.type) {\n      case 'insert_node':\n      case 'remove_node':\n      case 'merge_node':\n      case 'move_node':\n      case 'split_node':\n      case 'insert_text':\n      case 'remove_text':\n      case 'set_selection': {\n        // FIXME: Rename to something like IS_DOM_EDITOR_DESYNCED\n        // to better reflect reality, see #5792\n        IS_NODE_MAP_DIRTY.set(e, true)\n      }\n    }\n\n    for (const [path, key] of matches) {\n      const [node] = Editor.node(e, path)\n      NODE_TO_KEY.set(node, key)\n    }\n\n    for (const [pathRef, key] of pathRefMatches) {\n      if (pathRef.current) {\n        const [node] = Editor.node(e, pathRef.current)\n        NODE_TO_KEY.set(node, key)\n      }\n\n      pathRef.unref()\n    }\n  }\n\n  e.setFragmentData = (data: Pick<DataTransfer, 'getData' | 'setData'>) => {\n    const { selection } = e\n\n    if (!selection) {\n      return\n    }\n\n    const [start, end] = Range.edges(selection)\n    const startVoid = Editor.void(e, { at: start.path })\n    const endVoid = Editor.void(e, { at: end.path })\n\n    if (Range.isCollapsed(selection) && !startVoid) {\n      return\n    }\n\n    // Create a fake selection so that we can add a Base64-encoded copy of the\n    // fragment to the HTML, to decode on future pastes.\n    const domRange = DOMEditor.toDOMRange(e, selection)\n    let contents = domRange.cloneContents()\n    let attach = contents.childNodes[0] as HTMLElement\n\n    // Make sure attach is non-empty, since empty nodes will not get copied.\n    contents.childNodes.forEach(node => {\n      if (node.textContent && node.textContent.trim() !== '') {\n        attach = node as HTMLElement\n      }\n    })\n\n    // COMPAT: If the end node is a void node, we need to move the end of the\n    // range from the void node's spacer span, to the end of the void node's\n    // content, since the spacer is before void's content in the DOM.\n    if (endVoid) {\n      const [voidNode] = endVoid\n      const r = domRange.cloneRange()\n      const domNode = DOMEditor.toDOMNode(e, voidNode)\n      r.setEndAfter(domNode)\n      contents = r.cloneContents()\n    }\n\n    // COMPAT: If the start node is a void node, we need to attach the encoded\n    // fragment to the void node's content node instead of the spacer, because\n    // attaching it to empty `<div>/<span>` nodes will end up having it erased by\n    // most browsers. (2018/04/27)\n    if (startVoid) {\n      attach = contents.querySelector('[data-slate-spacer]')! as HTMLElement\n    }\n\n    // Remove any zero-width space spans from the cloned DOM so that they don't\n    // show up elsewhere when pasted.\n    Array.from(contents.querySelectorAll('[data-slate-zero-width]')).forEach(\n      zw => {\n        const isNewline = zw.getAttribute('data-slate-zero-width') === 'n'\n        zw.textContent = isNewline ? '\\n' : ''\n      }\n    )\n\n    // Set a `data-slate-fragment` attribute on a non-empty node, so it shows up\n    // in the HTML, and can be used for intra-Slate pasting. If it's a text\n    // node, wrap it in a `<span>` so we have something to set an attribute on.\n    if (isDOMText(attach)) {\n      const span = attach.ownerDocument.createElement('span')\n      // COMPAT: In Chrome and Safari, if we don't add the `white-space` style\n      // then leading and trailing spaces will be ignored. (2017/09/21)\n      span.style.whiteSpace = 'pre'\n      span.appendChild(attach)\n      contents.appendChild(span)\n      attach = span\n    }\n\n    const fragment = e.getFragment()\n    const string = JSON.stringify(fragment)\n    const encoded = window.btoa(encodeURIComponent(string))\n    attach.setAttribute('data-slate-fragment', encoded)\n    data.setData(`application/${clipboardFormatKey}`, encoded)\n\n    // Add the content to a <div> so that we can get its inner HTML.\n    const div = contents.ownerDocument.createElement('div')\n    div.appendChild(contents)\n    div.setAttribute('hidden', 'true')\n    contents.ownerDocument.body.appendChild(div)\n    data.setData('text/html', div.innerHTML)\n    data.setData('text/plain', getPlainText(div))\n    contents.ownerDocument.body.removeChild(div)\n    return data\n  }\n\n  e.insertData = (data: DataTransfer) => {\n    if (!e.insertFragmentData(data)) {\n      e.insertTextData(data)\n    }\n  }\n\n  e.insertFragmentData = (data: DataTransfer): boolean => {\n    /**\n     * Checking copied fragment from application/x-slate-fragment or data-slate-fragment\n     */\n    const fragment =\n      data.getData(`application/${clipboardFormatKey}`) ||\n      getSlateFragmentAttribute(data)\n\n    if (fragment) {\n      const decoded = decodeURIComponent(window.atob(fragment))\n      const parsed = JSON.parse(decoded) as Node[]\n      e.insertFragment(parsed)\n      return true\n    }\n    return false\n  }\n\n  e.insertTextData = (data: DataTransfer): boolean => {\n    const text = data.getData('text/plain')\n\n    if (text) {\n      const lines = text.split(/\\r\\n|\\r|\\n/)\n      let split = false\n\n      for (const line of lines) {\n        if (split) {\n          Transforms.splitNodes(e, { always: true })\n        }\n\n        e.insertText(line)\n        split = true\n      }\n      return true\n    }\n    return false\n  }\n\n  e.onChange = options => {\n    const onContextChange = EDITOR_TO_ON_CHANGE.get(e)\n\n    if (onContextChange) {\n      onContextChange(options)\n    }\n\n    onChange(options)\n  }\n\n  return e\n}\n\nconst getMatches = (e: Editor, path: Path) => {\n  const matches: [Path, Key][] = []\n  for (const [n, p] of Editor.levels(e, { at: path })) {\n    const key = DOMEditor.findKey(e, n)\n    matches.push([p, key])\n  }\n  return matches\n}\n","export const TRIPLE_CLICK = 3\n","import { isHotkey } from 'is-hotkey'\nimport { IS_APPLE } from './environment'\n\n/**\n * Hotkey mappings for each platform.\n */\n\nconst HOTKEYS = {\n  bold: 'mod+b',\n  compose: ['down', 'left', 'right', 'up', 'backspace', 'enter'],\n  moveBackward: 'left',\n  moveForward: 'right',\n  moveWordBackward: 'ctrl+left',\n  moveWordForward: 'ctrl+right',\n  deleteBackward: 'shift?+backspace',\n  deleteForward: 'shift?+delete',\n  extendBackward: 'shift+left',\n  extendForward: 'shift+right',\n  italic: 'mod+i',\n  insertSoftBreak: 'shift+enter',\n  splitBlock: 'enter',\n  undo: 'mod+z',\n}\n\nconst APPLE_HOTKEYS = {\n  moveLineBackward: 'opt+up',\n  moveLineForward: 'opt+down',\n  moveWordBackward: 'opt+left',\n  moveWordForward: 'opt+right',\n  deleteBackward: ['ctrl+backspace', 'ctrl+h'],\n  deleteForward: ['ctrl+delete', 'ctrl+d'],\n  deleteLineBackward: 'cmd+shift?+backspace',\n  deleteLineForward: ['cmd+shift?+delete', 'ctrl+k'],\n  deleteWordBackward: 'opt+shift?+backspace',\n  deleteWordForward: 'opt+shift?+delete',\n  extendLineBackward: 'opt+shift+up',\n  extendLineForward: 'opt+shift+down',\n  redo: 'cmd+shift+z',\n  transposeCharacter: 'ctrl+t',\n}\n\nconst WINDOWS_HOTKEYS = {\n  deleteWordBackward: 'ctrl+shift?+backspace',\n  deleteWordForward: 'ctrl+shift?+delete',\n  redo: ['ctrl+y', 'ctrl+shift+z'],\n}\n\n/**\n * Create a platform-aware hotkey checker.\n */\n\nconst create = (key: string) => {\n  const generic = HOTKEYS[<keyof typeof HOTKEYS>key]\n  const apple = APPLE_HOTKEYS[<keyof typeof APPLE_HOTKEYS>key]\n  const windows = WINDOWS_HOTKEYS[<keyof typeof WINDOWS_HOTKEYS>key]\n  const isGeneric = generic && isHotkey(generic)\n  const isApple = apple && isHotkey(apple)\n  const isWindows = windows && isHotkey(windows)\n\n  return (event: KeyboardEvent) => {\n    if (isGeneric && isGeneric(event)) return true\n    if (IS_APPLE && isApple && isApple(event)) return true\n    if (!IS_APPLE && isWindows && isWindows(event)) return true\n    return false\n  }\n}\n\n/**\n * Hotkeys.\n */\n\nexport default {\n  isBold: create('bold'),\n  isCompose: create('compose'),\n  isMoveBackward: create('moveBackward'),\n  isMoveForward: create('moveForward'),\n  isDeleteBackward: create('deleteBackward'),\n  isDeleteForward: create('deleteForward'),\n  isDeleteLineBackward: create('deleteLineBackward'),\n  isDeleteLineForward: create('deleteLineForward'),\n  isDeleteWordBackward: create('deleteWordBackward'),\n  isDeleteWordForward: create('deleteWordForward'),\n  isExtendBackward: create('extendBackward'),\n  isExtendForward: create('extendForward'),\n  isExtendLineBackward: create('extendLineBackward'),\n  isExtendLineForward: create('extendLineForward'),\n  isItalic: create('italic'),\n  isMoveLineBackward: create('moveLineBackward'),\n  isMoveLineForward: create('moveLineForward'),\n  isMoveWordBackward: create('moveWordBackward'),\n  isMoveWordForward: create('moveWordForward'),\n  isRedo: create('redo'),\n  isSoftBreak: create('insertSoftBreak'),\n  isSplitBlock: create('splitBlock'),\n  isTransposeCharacter: create('transposeCharacter'),\n  isUndo: create('undo'),\n}\n","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nmodule.exports = _objectWithoutPropertiesLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose.js\");\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nmodule.exports = _objectWithoutProperties, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import { Ancestor, DecoratedRange, Editor, Range } from 'slate'\nimport { PLACEHOLDER_SYMBOL } from './weak-maps'\nimport { DOMEditor } from '../plugin/dom-editor'\n\nexport const shallowCompare = (\n  obj1: { [key: string]: unknown },\n  obj2: { [key: string]: unknown }\n) =>\n  Object.keys(obj1).length === Object.keys(obj2).length &&\n  Object.keys(obj1).every(\n    key => obj2.hasOwnProperty(key) && obj1[key] === obj2[key]\n  )\n\nconst isDecorationFlagsEqual = (range: Range, other: Range) => {\n  const { anchor: rangeAnchor, focus: rangeFocus, ...rangeOwnProps } = range\n  const { anchor: otherAnchor, focus: otherFocus, ...otherOwnProps } = other\n\n  return (\n    range[PLACEHOLDER_SYMBOL] === other[PLACEHOLDER_SYMBOL] &&\n    shallowCompare(rangeOwnProps, otherOwnProps)\n  )\n}\n\n/**\n * Check if a list of decorator ranges are equal to another.\n *\n * PERF: this requires the two lists to also have the ranges inside them in the\n * same order, but this is an okay constraint for us since decorations are\n * kept in order, and the odd case where they aren't is okay to re-render for.\n */\n\nexport const isElementDecorationsEqual = (\n  list: Range[] | null,\n  another: Range[] | null\n): boolean => {\n  if (list === another) {\n    return true\n  }\n\n  if (!list || !another) {\n    return false\n  }\n\n  if (list.length !== another.length) {\n    return false\n  }\n\n  for (let i = 0; i < list.length; i++) {\n    const range = list[i]\n    const other = another[i]\n\n    if (!Range.equals(range, other) || !isDecorationFlagsEqual(range, other)) {\n      return false\n    }\n  }\n\n  return true\n}\n\n/**\n * Check if a list of decorator ranges are equal to another.\n *\n * PERF: this requires the two lists to also have the ranges inside them in the\n * same order, but this is an okay constraint for us since decorations are\n * kept in order, and the odd case where they aren't is okay to re-render for.\n */\n\nexport const isTextDecorationsEqual = (\n  list: Range[] | null,\n  another: Range[] | null\n): boolean => {\n  if (list === another) {\n    return true\n  }\n\n  if (!list || !another) {\n    return false\n  }\n\n  if (list.length !== another.length) {\n    return false\n  }\n\n  for (let i = 0; i < list.length; i++) {\n    const range = list[i]\n    const other = another[i]\n\n    // compare only offsets because paths doesn't matter for text\n    if (\n      range.anchor.offset !== other.anchor.offset ||\n      range.focus.offset !== other.focus.offset ||\n      !isDecorationFlagsEqual(range, other)\n    ) {\n      return false\n    }\n  }\n\n  return true\n}\n\n/**\n * Split and group decorations by each child of a node.\n *\n * @returns An array with length equal to that of `node.children`. Each index\n * corresponds to a child of `node`, and the value is an array of decorations\n * for that child.\n */\n\nexport const splitDecorationsByChild = (\n  editor: Editor,\n  node: Ancestor,\n  decorations: DecoratedRange[]\n): DecoratedRange[][] => {\n  const decorationsByChild = Array.from(\n    node.children,\n    (): DecoratedRange[] => []\n  )\n\n  if (decorations.length === 0) {\n    return decorationsByChild\n  }\n\n  const path = DOMEditor.findPath(editor, node)\n  const level = path.length\n  const ancestorRange = Editor.range(editor, path)\n\n  const cachedChildRanges = new Array<Range | undefined>(node.children.length)\n\n  const getChildRange = (index: number) => {\n    const cachedRange = cachedChildRanges[index]\n    if (cachedRange) return cachedRange\n    const childRange = Editor.range(editor, [...path, index])\n    cachedChildRanges[index] = childRange\n    return childRange\n  }\n\n  for (const decoration of decorations) {\n    const decorationRange = Range.intersection(ancestorRange, decoration)\n    if (!decorationRange) continue\n\n    const [startPoint, endPoint] = Range.edges(decorationRange)\n    const startIndex = startPoint.path[level]\n    const endIndex = endPoint.path[level]\n\n    for (let i = startIndex; i <= endIndex; i++) {\n      const ds = decorationsByChild[i]\n      if (!ds) continue\n\n      const childRange = getChildRange(i)\n      const childDecorationRange = Range.intersection(childRange, decoration)\n      if (!childDecorationRange) continue\n\n      ds.push({\n        ...decoration,\n        ...childDecorationRange,\n      })\n    }\n  }\n\n  return decorationsByChild\n}\n"],"names":["DOMNode","globalThis","Node","DOMElement","Element","DOMText","Text","DOMRange","Range","DOMSelection","Selection","DOMStaticRange","StaticRange","getDefaultView","value","ownerDocument","defaultView","isDOMComment","isDOMNode","nodeType","isDOMElement","window","isDOMSelection","anchorNode","isDOMText","isPlainTextOnlyPaste","event","clipboardData","getData","types","length","normalizeDOMPoint","domPoint","_domPoint","_slicedToArray","node","offset","childNodes","isLast","index","_getEditableChildAndI","getEditableChildAndIndex","_getEditableChildAndI2","i","getEditableChild","textContent","hasShadowRoot","parent","parentNode","toString","direction","child","triedForward","triedBackward","getAttribute","_getEditableChildAndI3","_getEditableChildAndI4","getPlainText","domNode","text","nodeValue","_i","_Array$from","Array","from","childNode","display","getComputedStyle","getPropertyValue","tagName","catchSlateFragment","getSlateFragmentAttribute","dataTransfer","htmlData","_ref","match","_ref2","fragment","getSelection","root","document","isTrackedMutation","editor","mutation","batch","target","matches","_DOMEditor$getWindow","DOMEditor","getWindow","contains","hasDOMNode","editable","parentMutation","find","_ref3","addedNodes","removedNodes","_iterator","_createForOfIteratorHelper","_step","s","n","done","err","e","f","_iterator2","_step2","getActiveElement","activeElement","_activeElement","shadowRoot","_activeElement$shadow","_activeElement2","isBefore","otherNode","Boolean","compareDocumentPosition","DOCUMENT_POSITION_PRECEDING","isAfter","DOCUMENT_POSITION_FOLLOWING","IS_IOS","navigator","test","userAgent","MSStream","IS_APPLE","IS_ANDROID","IS_FIREFOX","IS_WEBKIT","IS_EDGE_LEGACY","IS_CHROME","IS_CHROME_LEGACY","IS_ANDROID_CHROME_LEGACY","IS_FIREFOX_LEGACY","IS_UC_MOBILE","IS_WECHATBROWSER","CAN_USE_DOM","createElement","_navigator$userAgent$","parseInt","_navigator$userAgent$2","HAS_BEFORE_INPUT_SUPPORT","InputEvent","prototype","getTargetRanges","require$$0","Key","_createClass","_classCallCheck","_defineProperty","id","concat","IS_NODE_MAP_DIRTY","WeakMap","NODE_TO_INDEX","NODE_TO_PARENT","EDITOR_TO_WINDOW","EDITOR_TO_ELEMENT","EDITOR_TO_PLACEHOLDER_ELEMENT","ELEMENT_TO_NODE","NODE_TO_ELEMENT","NODE_TO_KEY","EDITOR_TO_KEY_TO_ELEMENT","IS_READ_ONLY","IS_FOCUSED","IS_COMPOSING","EDITOR_TO_USER_SELECTION","EDITOR_TO_ON_CHANGE","EDITOR_TO_SCHEDULE_FLUSH","EDITOR_TO_PENDING_INSERTION_MARKS","EDITOR_TO_USER_MARKS","EDITOR_TO_PENDING_DIFFS","EDITOR_TO_PENDING_ACTION","EDITOR_TO_PENDING_SELECTION","EDITOR_TO_FORCE_RENDER","PLACEHOLDER_SYMBOL","Symbol","MARK_PLACEHOLDER_SYMBOL","androidPendingDiffs","get","androidScheduleFlush","_EDITOR_TO_SCHEDULE_F","blur","el","toDOMNode","findDocumentOrShadowRoot","set","deselect","selection","domSelection","rangeCount","removeAllRanges","Transforms","getRootNode","Document","ShadowRoot","findEventRange","nativeEvent","_event","x","clientX","y","clientY","Error","toSlateNode","path","findPath","isElement","Editor","isVoid","rect","getBoundingClientRect","isPrev","isInline","left","width","top","height","edge","point","before","after","range","domRange","caretRangeFromPoint","position","caretPositionFromPoint","createRange","setStart","offsetNode","setEnd","toSlateRange","exactMatch","suppressThrow","findKey","key","isEditor","unshift","Scrubber","stringify","focus","options","arguments","undefined","retries","operations","setTimeout","toDOMRange","addRange","select","start","preventScroll","_options$editable","editorEl","targetEl","parentElement","message","includes","closest","isContentEditable","hasEditableTarget","hasRange","anchor","hasPath","hasSelectableTarget","isTargetInsideNonReadonlyVoid","hasTarget","insertData","data","insertFragmentData","insertTextData","isComposing","isFocused","isReadOnly","slateNode","setFragmentData","originEvent","KEY_TO_ELEMENT","toDOMPoint","_Editor$node","_Editor$node2","at","selector","texts","querySelectorAll","attr","trueLength","end","nextText","hasAttribute","_nextText$textContent","domText","startsWith","Math","min","max","isBackward","domAnchor","domFocus","isCollapsed","startNode","startOffset","_ref4","endNode","endOffset","startEl","isStartAtZeroWidth","endEl","isEndAtZeroWidth","domEl","toSlatePoint","searchDirection","_ref5","_ref6","nearestNode","nearestOffset","textNode","_domNode$textContent","_domNode$textContent2","potentialVoidNode","voidNode","potentialNonEditableNode","nonEditableNode","leafNode","contents","cloneContents","removals","_toConsumableArray","slice","call","forEach","textContext","removeChild","leafNodes","current","getLeafNodes","elementNode","_leafNodes$findLast","previousElementSibling","findLast","leaf","_leafNodes2$find","nextElementSibling","endsWith","_Editor$start","querySelector","_focusNode$textConten","startContainer","anchorOffset","focusNode","focusOffset","firstRange","getRangeAt","lastRange","HTMLTableRowElement","getLastChildren","element","childElementCount","children","firstNodeRow","lastNodeRow","firstNode","lastNode","HTMLElement","innerHTML","endContainer","collapsed","focusBeforeAnchor","isExpanded","isForward","mode","unhangRange","voids","verifyDiffState","textDiff","diff","isText","nextPath","Path","next","nextNode","applyStringDiff","_len","diffs","_key","reduce","longestCommonPrefixLength","str","another","charAt","longestCommonSuffixLength","normalizeStringDiff","targetText","removedText","prefixLength","suffixLength","normalized","mergeStringDiffs","a","b","overlap","applied","sliceEnd","targetRange","normalizePoint","parentBlock","above","isBlock","entry","isDescendant","normalizeRange","transformPendingPoint","op","pendingDiffs","equals","Point","transform","affinity","transformed","type","transformPendingRange","transformTextDiff","newPath","doRectsIntersect","compareRect","middle","bottom","areRangesSameLine","range1","range2","rect1","rect2","findCurrentLineRange","parentRange","parentRangeBoundary","positions","right","floor","withDOM","clipboardFormatKey","apply","onChange","deleteBackward","addMark","removeMark","_EDITOR_TO_PENDING_DI","_EDITOR_TO_PENDING_DI2","unit","parentBlockEntry","_parentBlockEntry","parentBlockPath","parentElementRange","currentLineRange","pathRefMatches","map","filter","pendingSelection","pendingAction","isPoint","_objectSpread","push","getMatches","_EDITOR_TO_USER_SELEC","unref","prevPath","previous","commonPath","common","changedPath","changedNode","changedNodeKey","changedPathRef","pathRef","_matches","_matches$_i","_i2","_pathRefMatches","_pathRefMatches$_i","_Editor$node3","_Editor$node4","_Range$edges","edges","_Range$edges2","startVoid","endVoid","attach","trim","_endVoid","r","cloneRange","setEndAfter","zw","isNewline","span","style","whiteSpace","appendChild","getFragment","string","JSON","encoded","btoa","encodeURIComponent","setAttribute","setData","div","body","decoded","decodeURIComponent","atob","parsed","parse","insertFragment","lines","split","line","splitNodes","always","insertText","onContextChange","levels","_step2$value","p","TRIPLE_CLICK","HOTKEYS","bold","compose","moveBackward","moveForward","moveWordBackward","moveWordForward","deleteForward","extendBackward","extendForward","italic","insertSoftBreak","splitBlock","undo","APPLE_HOTKEYS","moveLineBackward","moveLineForward","deleteLineBackward","deleteLineForward","deleteWordBackward","deleteWordForward","extendLineBackward","extendLineForward","redo","transposeCharacter","WINDOWS_HOTKEYS","create","generic","apple","windows","isGeneric","isHotkey","isApple","isWindows","isBold","isCompose","isMoveBackward","isMoveForward","isDeleteBackward","isDeleteForward","isDeleteLineBackward","isDeleteLineForward","isDeleteWordBackward","isDeleteWordForward","isExtendBackward","isExtendForward","isExtendLineBackward","isExtendLineForward","isItalic","isMoveLineBackward","isMoveLineForward","isMoveWordBackward","isMoveWordForward","isRedo","isSoftBreak","isSplitBlock","isTransposeCharacter","isUndo","shallowCompare","obj1","obj2","Object","keys","every","hasOwnProperty","isDecorationFlagsEqual","other","rangeOwnProps","_objectWithoutProperties","_excluded","otherOwnProps","_excluded2","isElementDecorationsEqual","list","isTextDecorationsEqual","splitDecorationsByChild","decorations","decorationsByChild","level","ancestorRange","cachedChildRanges","getChildRange","cachedRange","childRange","decoration","decorationRange","intersection","startPoint","endPoint","startIndex","endIndex","ds","childDecorationRange"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,12,13,14,15,16,17,26,27]}