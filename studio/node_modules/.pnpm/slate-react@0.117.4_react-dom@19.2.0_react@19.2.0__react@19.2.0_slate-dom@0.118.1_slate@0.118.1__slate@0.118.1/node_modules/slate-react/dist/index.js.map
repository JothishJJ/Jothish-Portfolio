{"version":3,"file":"index.js","sources":["../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/arrayWithHoles.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/nonIterableRest.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/slicedToArray.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/objectWithoutProperties.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/typeof.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/toPrimitive.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/toPropertyKey.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/defineProperty.js","../src/hooks/use-slate-static.tsx","../src/plugin/react-editor.ts","../src/hooks/android-input-manager/android-input-manager.ts","../src/hooks/use-is-mounted.tsx","../src/hooks/use-isomorphic-layout-effect.ts","../src/hooks/use-mutation-observer.ts","../src/hooks/android-input-manager/use-android-input-manager.ts","../src/components/string.tsx","../src/components/leaf.tsx","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/iterableToArray.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/nonIterableSpread.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/toConsumableArray.js","../src/hooks/use-generic-selector.tsx","../src/hooks/use-decorations.ts","../src/components/text.tsx","../src/components/element.tsx","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/classCallCheck.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/createClass.js","../src/chunking/chunk-tree-helper.ts","../src/chunking/children-helper.ts","../src/chunking/reconcile-children.ts","../src/chunking/get-chunk-tree-for-node.ts","../src/components/chunk-tree.tsx","../src/hooks/use-element.ts","../src/hooks/use-children.tsx","../src/hooks/use-read-only.ts","../src/hooks/use-slate-selector.tsx","../src/hooks/use-slate.tsx","../src/hooks/use-track-user-input.ts","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/assertThisInitialized.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/setPrototypeOf.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/inherits.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/getPrototypeOf.js","../src/components/restore-dom/restore-dom-manager.ts","../src/components/restore-dom/restore-dom.tsx","../src/hooks/use-composing.ts","../src/components/editable.tsx","../src/hooks/use-focused.ts","../src/utils/environment.ts","../src/components/slate.tsx","../src/hooks/use-editor.tsx","../src/hooks/use-selected.ts","../src/hooks/use-slate-selection.tsx","../src/plugin/with-react.ts"],"sourcesContent":["function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableRest = require(\"./nonIterableRest.js\");\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nmodule.exports = _objectWithoutPropertiesLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose.js\");\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nmodule.exports = _objectWithoutProperties, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nmodule.exports = _toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nmodule.exports = _toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import { createContext, useContext } from 'react'\nimport { Editor } from 'slate'\nimport { ReactEditor } from '../plugin/react-editor'\n\n/**\n * A React context for sharing the editor object.\n */\n\nexport const EditorContext = createContext<ReactEditor | null>(null)\n\n/**\n * Get the current editor object from the React context.\n */\n\nexport const useSlateStatic = (): Editor => {\n  const editor = useContext(EditorContext)\n\n  if (!editor) {\n    throw new Error(\n      `The \\`useSlateStatic\\` hook must be used inside the <Slate> component's context.`\n    )\n  }\n\n  return editor\n}\n","import { Ancestor } from 'slate'\nimport { DOMEditor, type DOMEditorInterface } from 'slate-dom'\n\n/**\n * A React and DOM-specific version of the `Editor` interface.\n */\n\nexport interface ReactEditor extends DOMEditor {\n  /**\n   * Determines the chunk size used by the children chunking optimization. If\n   * null is returned (which is the default), the chunking optimization is\n   * disabled.\n   */\n  getChunkSize: (node: Ancestor) => number | null\n}\n\nexport interface ReactEditorInterface extends DOMEditorInterface {}\n\n// eslint-disable-next-line no-redeclare\nexport const ReactEditor: ReactEditorInterface = DOMEditor\n","import { DebouncedFunc } from 'lodash'\nimport { Editor, Node, Path, Point, Range, Text, Transforms } from 'slate'\nimport { ReactEditor } from '../../plugin/react-editor'\nimport {\n  applyStringDiff,\n  mergeStringDiffs,\n  normalizePoint,\n  normalizeRange,\n  normalizeStringDiff,\n  StringDiff,\n  targetRange,\n  TextDiff,\n  verifyDiffState,\n} from 'slate-dom'\nimport { isDOMSelection, isTrackedMutation } from 'slate-dom'\nimport {\n  EDITOR_TO_FORCE_RENDER,\n  EDITOR_TO_PENDING_ACTION,\n  EDITOR_TO_PENDING_DIFFS,\n  EDITOR_TO_PENDING_INSERTION_MARKS,\n  EDITOR_TO_PENDING_SELECTION,\n  EDITOR_TO_PLACEHOLDER_ELEMENT,\n  EDITOR_TO_USER_MARKS,\n  IS_COMPOSING,\n  IS_NODE_MAP_DIRTY,\n} from 'slate-dom'\n\nexport type Action = { at?: Point | Range; run: () => void }\n\n// https://github.com/facebook/draft-js/blob/main/src/component/handlers/composition/DraftEditorCompositionHandler.js#L41\n// When using keyboard English association function, conpositionEnd triggered too fast, resulting in after `insertText` still maintain association state.\nconst RESOLVE_DELAY = 25\n\n// Time with no user interaction before the current user action is considered as done.\nconst FLUSH_DELAY = 200\n\n// Replace with `const debug = console.log` to debug\nconst debug = (..._: unknown[]) => {}\n\n// Type guard to check if a value is a DataTransfer\nconst isDataTransfer = (value: any): value is DataTransfer =>\n  value?.constructor.name === 'DataTransfer'\n\nexport type CreateAndroidInputManagerOptions = {\n  editor: ReactEditor\n\n  scheduleOnDOMSelectionChange: DebouncedFunc<() => void>\n  onDOMSelectionChange: DebouncedFunc<() => void>\n}\n\nexport type AndroidInputManager = {\n  flush: () => void\n  scheduleFlush: () => void\n\n  hasPendingDiffs: () => boolean\n  hasPendingAction: () => boolean\n  hasPendingChanges: () => boolean\n  isFlushing: () => boolean | 'action'\n\n  handleUserSelect: (range: Range | null) => void\n  handleCompositionEnd: (event: React.CompositionEvent<HTMLDivElement>) => void\n  handleCompositionStart: (\n    event: React.CompositionEvent<HTMLDivElement>\n  ) => void\n  handleDOMBeforeInput: (event: InputEvent) => void\n  handleKeyDown: (event: React.KeyboardEvent<HTMLDivElement>) => void\n\n  handleDomMutations: (mutations: MutationRecord[]) => void\n  handleInput: () => void\n}\n\nexport function createAndroidInputManager({\n  editor,\n  scheduleOnDOMSelectionChange,\n  onDOMSelectionChange,\n}: CreateAndroidInputManagerOptions): AndroidInputManager {\n  let flushing: 'action' | boolean = false\n  let compositionEndTimeoutId: ReturnType<typeof setTimeout> | null = null\n  let flushTimeoutId: ReturnType<typeof setTimeout> | null = null\n  let actionTimeoutId: ReturnType<typeof setTimeout> | null = null\n\n  let idCounter = 0\n  let insertPositionHint: StringDiff | null | false = false\n\n  const applyPendingSelection = () => {\n    const pendingSelection = EDITOR_TO_PENDING_SELECTION.get(editor)\n    EDITOR_TO_PENDING_SELECTION.delete(editor)\n\n    if (pendingSelection) {\n      const { selection } = editor\n      const normalized = normalizeRange(editor, pendingSelection)\n\n      debug('apply pending selection', pendingSelection, normalized)\n\n      if (normalized && (!selection || !Range.equals(normalized, selection))) {\n        Transforms.select(editor, normalized)\n      }\n    }\n  }\n\n  const performAction = () => {\n    const action = EDITOR_TO_PENDING_ACTION.get(editor)\n    EDITOR_TO_PENDING_ACTION.delete(editor)\n    if (!action) {\n      return\n    }\n\n    if (action.at) {\n      const target = Point.isPoint(action.at)\n        ? normalizePoint(editor, action.at)\n        : normalizeRange(editor, action.at)\n\n      if (!target) {\n        return\n      }\n\n      const targetRange = Editor.range(editor, target)\n      if (!editor.selection || !Range.equals(editor.selection, targetRange)) {\n        Transforms.select(editor, target)\n      }\n    }\n\n    action.run()\n  }\n\n  const flush = () => {\n    if (flushTimeoutId) {\n      clearTimeout(flushTimeoutId)\n      flushTimeoutId = null\n    }\n\n    if (actionTimeoutId) {\n      clearTimeout(actionTimeoutId)\n      actionTimeoutId = null\n    }\n\n    if (!hasPendingDiffs() && !hasPendingAction()) {\n      applyPendingSelection()\n      return\n    }\n\n    if (!flushing) {\n      flushing = true\n      setTimeout(() => (flushing = false))\n    }\n\n    if (hasPendingAction()) {\n      flushing = 'action'\n    }\n\n    const selectionRef =\n      editor.selection &&\n      Editor.rangeRef(editor, editor.selection, { affinity: 'forward' })\n    EDITOR_TO_USER_MARKS.set(editor, editor.marks)\n\n    debug(\n      'flush',\n      EDITOR_TO_PENDING_ACTION.get(editor),\n      EDITOR_TO_PENDING_DIFFS.get(editor)\n    )\n\n    let scheduleSelectionChange = hasPendingDiffs()\n\n    let diff: TextDiff | undefined\n    while ((diff = EDITOR_TO_PENDING_DIFFS.get(editor)?.[0])) {\n      const pendingMarks = EDITOR_TO_PENDING_INSERTION_MARKS.get(editor)\n\n      if (pendingMarks !== undefined) {\n        EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor)\n        editor.marks = pendingMarks\n      }\n\n      if (pendingMarks && insertPositionHint === false) {\n        insertPositionHint = null\n        debug('insert after mark placeholder')\n      }\n\n      const range = targetRange(diff)\n      if (!editor.selection || !Range.equals(editor.selection, range)) {\n        Transforms.select(editor, range)\n      }\n\n      if (diff.diff.text) {\n        Editor.insertText(editor, diff.diff.text)\n      } else {\n        Editor.deleteFragment(editor)\n      }\n\n      // Remove diff only after we have applied it to account for it when transforming\n      // pending ranges.\n      EDITOR_TO_PENDING_DIFFS.set(\n        editor,\n        EDITOR_TO_PENDING_DIFFS.get(editor)?.filter(\n          ({ id }) => id !== diff!.id\n        )!\n      )\n\n      if (!verifyDiffState(editor, diff)) {\n        debug('invalid diff state')\n        scheduleSelectionChange = false\n        EDITOR_TO_PENDING_ACTION.delete(editor)\n        EDITOR_TO_USER_MARKS.delete(editor)\n        flushing = 'action'\n\n        // Ensure we don't restore the pending user (dom) selection\n        // since the document and dom state do not match.\n        EDITOR_TO_PENDING_SELECTION.delete(editor)\n        scheduleOnDOMSelectionChange.cancel()\n        onDOMSelectionChange.cancel()\n        selectionRef?.unref()\n      }\n    }\n\n    const selection = selectionRef?.unref()\n    if (\n      selection &&\n      !EDITOR_TO_PENDING_SELECTION.get(editor) &&\n      (!editor.selection || !Range.equals(selection, editor.selection))\n    ) {\n      Transforms.select(editor, selection)\n    }\n\n    if (hasPendingAction()) {\n      performAction()\n      return\n    }\n\n    // COMPAT: The selectionChange event is fired after the action is performed,\n    // so we have to manually schedule it to ensure we don't 'throw away' the selection\n    // while rendering if we have pending changes.\n    if (scheduleSelectionChange) {\n      debug('scheduleOnDOMSelectionChange pending changes')\n      scheduleOnDOMSelectionChange()\n    }\n\n    scheduleOnDOMSelectionChange.flush()\n    onDOMSelectionChange.flush()\n\n    applyPendingSelection()\n\n    const userMarks = EDITOR_TO_USER_MARKS.get(editor)\n    EDITOR_TO_USER_MARKS.delete(editor)\n    if (userMarks !== undefined) {\n      editor.marks = userMarks\n      editor.onChange()\n    }\n  }\n\n  const handleCompositionEnd = (\n    _event: React.CompositionEvent<HTMLDivElement>\n  ) => {\n    if (compositionEndTimeoutId) {\n      clearTimeout(compositionEndTimeoutId)\n    }\n\n    compositionEndTimeoutId = setTimeout(() => {\n      IS_COMPOSING.set(editor, false)\n      flush()\n    }, RESOLVE_DELAY)\n  }\n\n  const handleCompositionStart = (\n    _event: React.CompositionEvent<HTMLDivElement>\n  ) => {\n    debug('composition start')\n\n    IS_COMPOSING.set(editor, true)\n\n    if (compositionEndTimeoutId) {\n      clearTimeout(compositionEndTimeoutId)\n      compositionEndTimeoutId = null\n    }\n  }\n\n  const updatePlaceholderVisibility = (forceHide = false) => {\n    const placeholderElement = EDITOR_TO_PLACEHOLDER_ELEMENT.get(editor)\n    if (!placeholderElement) {\n      return\n    }\n\n    if (hasPendingDiffs() || forceHide) {\n      placeholderElement.style.display = 'none'\n      return\n    }\n\n    placeholderElement.style.removeProperty('display')\n  }\n\n  const storeDiff = (path: Path, diff: StringDiff) => {\n    debug('storeDiff', path, diff)\n\n    const pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(editor) ?? []\n    EDITOR_TO_PENDING_DIFFS.set(editor, pendingDiffs)\n\n    const target = Node.leaf(editor, path)\n    const idx = pendingDiffs.findIndex(change => Path.equals(change.path, path))\n    if (idx < 0) {\n      const normalized = normalizeStringDiff(target.text, diff)\n      if (normalized) {\n        pendingDiffs.push({ path, diff, id: idCounter++ })\n      }\n\n      updatePlaceholderVisibility()\n      return\n    }\n\n    const merged = mergeStringDiffs(target.text, pendingDiffs[idx].diff, diff)\n    if (!merged) {\n      pendingDiffs.splice(idx, 1)\n      updatePlaceholderVisibility()\n      return\n    }\n\n    pendingDiffs[idx] = {\n      ...pendingDiffs[idx],\n      diff: merged,\n    }\n  }\n\n  const scheduleAction = (\n    run: () => void,\n    { at }: { at?: Point | Range } = {}\n  ): void => {\n    insertPositionHint = false\n    debug('scheduleAction', { at, run })\n\n    EDITOR_TO_PENDING_SELECTION.delete(editor)\n    scheduleOnDOMSelectionChange.cancel()\n    onDOMSelectionChange.cancel()\n\n    if (hasPendingAction()) {\n      flush()\n    }\n\n    EDITOR_TO_PENDING_ACTION.set(editor, { at, run })\n\n    // COMPAT: When deleting before a non-contenteditable element chrome only fires a beforeinput,\n    // (no input) and doesn't perform any dom mutations. Without a flush timeout we would never flush\n    // in this case and thus never actually perform the action.\n    actionTimeoutId = setTimeout(flush)\n  }\n\n  const handleDOMBeforeInput = (event: InputEvent): void => {\n    if (flushTimeoutId) {\n      clearTimeout(flushTimeoutId)\n      flushTimeoutId = null\n    }\n\n    if (IS_NODE_MAP_DIRTY.get(editor)) {\n      return\n    }\n\n    const { inputType: type } = event\n    let targetRange: Range | null = null\n    const data: DataTransfer | string | undefined =\n      (event as any).dataTransfer || event.data || undefined\n\n    if (\n      insertPositionHint !== false &&\n      type !== 'insertText' &&\n      type !== 'insertCompositionText'\n    ) {\n      insertPositionHint = false\n    }\n\n    let [nativeTargetRange] = (event as any).getTargetRanges()\n    if (nativeTargetRange) {\n      targetRange = ReactEditor.toSlateRange(editor, nativeTargetRange, {\n        exactMatch: false,\n        suppressThrow: true,\n      })\n    }\n\n    // COMPAT: SelectionChange event is fired after the action is performed, so we\n    // have to manually get the selection here to ensure it's up-to-date.\n    const window = ReactEditor.getWindow(editor)\n    const domSelection = window.getSelection()\n    if (!targetRange && domSelection) {\n      nativeTargetRange = domSelection\n      targetRange = ReactEditor.toSlateRange(editor, domSelection, {\n        exactMatch: false,\n        suppressThrow: true,\n      })\n    }\n\n    targetRange = targetRange ?? editor.selection\n    if (!targetRange) {\n      return\n    }\n\n    // By default, the input manager tries to store text diffs so that we can\n    // defer flushing them at a later point in time. We don't want to flush\n    // for every input event as this can be expensive. However, there are some\n    // scenarios where we cannot safely store the text diff and must instead\n    // schedule an action to let Slate normalize the editor state.\n    let canStoreDiff = true\n\n    if (type.startsWith('delete')) {\n      const direction = type.endsWith('Backward') ? 'backward' : 'forward'\n      let [start, end] = Range.edges(targetRange)\n      let [leaf, path] = Editor.leaf(editor, start.path)\n\n      if (Range.isExpanded(targetRange)) {\n        if (leaf.text.length === start.offset && end.offset === 0) {\n          const next = Editor.next(editor, {\n            at: start.path,\n            match: Text.isText,\n          })\n          if (next && Path.equals(next[1], end.path)) {\n            // when deleting a linebreak, targetRange will span across the break (ie start in the node before and end in the node after)\n            // if the node before is empty, this will look like a hanging range and get unhung later--which will take the break we want to remove out of the range\n            // so to avoid this we collapse the target range to default to single character deletion\n            if (direction === 'backward') {\n              targetRange = { anchor: end, focus: end }\n              start = end\n              ;[leaf, path] = next\n            } else {\n              targetRange = { anchor: start, focus: start }\n              end = start\n            }\n          }\n        }\n      }\n\n      const diff = {\n        text: '',\n        start: start.offset,\n        end: end.offset,\n      }\n      const pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(editor)\n      const relevantPendingDiffs = pendingDiffs?.find(change =>\n        Path.equals(change.path, path)\n      )\n      const diffs = relevantPendingDiffs\n        ? [relevantPendingDiffs.diff, diff]\n        : [diff]\n      const text = applyStringDiff(leaf.text, ...diffs)\n\n      if (text.length === 0) {\n        // Text leaf will be removed, so we need to schedule an\n        // action to remove it so that Slate can normalize instead\n        // of storing as a diff\n        canStoreDiff = false\n      }\n\n      if (Range.isExpanded(targetRange)) {\n        if (\n          canStoreDiff &&\n          Path.equals(targetRange.anchor.path, targetRange.focus.path)\n        ) {\n          const point = { path: targetRange.anchor.path, offset: start.offset }\n          const range = Editor.range(editor, point, point)\n          handleUserSelect(range)\n\n          return storeDiff(targetRange.anchor.path, {\n            text: '',\n            end: end.offset,\n            start: start.offset,\n          })\n        }\n\n        return scheduleAction(\n          () => Editor.deleteFragment(editor, { direction }),\n          { at: targetRange }\n        )\n      }\n    }\n\n    switch (type) {\n      case 'deleteByComposition':\n      case 'deleteByCut':\n      case 'deleteByDrag': {\n        return scheduleAction(() => Editor.deleteFragment(editor), {\n          at: targetRange,\n        })\n      }\n\n      case 'deleteContent':\n      case 'deleteContentForward': {\n        const { anchor } = targetRange\n        if (canStoreDiff && Range.isCollapsed(targetRange)) {\n          const targetNode = Node.leaf(editor, anchor.path)\n\n          if (anchor.offset < targetNode.text.length) {\n            return storeDiff(anchor.path, {\n              text: '',\n              start: anchor.offset,\n              end: anchor.offset + 1,\n            })\n          }\n        }\n\n        return scheduleAction(() => Editor.deleteForward(editor), {\n          at: targetRange,\n        })\n      }\n\n      case 'deleteContentBackward': {\n        const { anchor } = targetRange\n\n        // If we have a mismatch between the native and slate selection being collapsed\n        // we are most likely deleting a zero-width placeholder and thus should perform it\n        // as an action to ensure correct behavior (mostly happens with mark placeholders)\n        const nativeCollapsed = isDOMSelection(nativeTargetRange)\n          ? nativeTargetRange.isCollapsed\n          : !!nativeTargetRange?.collapsed\n\n        if (\n          canStoreDiff &&\n          nativeCollapsed &&\n          Range.isCollapsed(targetRange) &&\n          anchor.offset > 0\n        ) {\n          return storeDiff(anchor.path, {\n            text: '',\n            start: anchor.offset - 1,\n            end: anchor.offset,\n          })\n        }\n\n        return scheduleAction(() => Editor.deleteBackward(editor), {\n          at: targetRange,\n        })\n      }\n\n      case 'deleteEntireSoftLine': {\n        return scheduleAction(\n          () => {\n            Editor.deleteBackward(editor, { unit: 'line' })\n            Editor.deleteForward(editor, { unit: 'line' })\n          },\n          { at: targetRange }\n        )\n      }\n\n      case 'deleteHardLineBackward': {\n        return scheduleAction(\n          () => Editor.deleteBackward(editor, { unit: 'block' }),\n          { at: targetRange }\n        )\n      }\n\n      case 'deleteSoftLineBackward': {\n        return scheduleAction(\n          () => Editor.deleteBackward(editor, { unit: 'line' }),\n          { at: targetRange }\n        )\n      }\n\n      case 'deleteHardLineForward': {\n        return scheduleAction(\n          () => Editor.deleteForward(editor, { unit: 'block' }),\n          { at: targetRange }\n        )\n      }\n\n      case 'deleteSoftLineForward': {\n        return scheduleAction(\n          () => Editor.deleteForward(editor, { unit: 'line' }),\n          { at: targetRange }\n        )\n      }\n\n      case 'deleteWordBackward': {\n        return scheduleAction(\n          () => Editor.deleteBackward(editor, { unit: 'word' }),\n          { at: targetRange }\n        )\n      }\n\n      case 'deleteWordForward': {\n        return scheduleAction(\n          () => Editor.deleteForward(editor, { unit: 'word' }),\n          { at: targetRange }\n        )\n      }\n\n      case 'insertLineBreak': {\n        return scheduleAction(() => Editor.insertSoftBreak(editor), {\n          at: targetRange,\n        })\n      }\n\n      case 'insertParagraph': {\n        return scheduleAction(() => Editor.insertBreak(editor), {\n          at: targetRange,\n        })\n      }\n      case 'insertCompositionText':\n      case 'deleteCompositionText':\n      case 'insertFromComposition':\n      case 'insertFromDrop':\n      case 'insertFromPaste':\n      case 'insertFromYank':\n      case 'insertReplacementText':\n      case 'insertText': {\n        if (isDataTransfer(data)) {\n          return scheduleAction(() => ReactEditor.insertData(editor, data), {\n            at: targetRange,\n          })\n        }\n\n        let text = data ?? ''\n\n        // COMPAT: If we are writing inside a placeholder, the ime inserts the text inside\n        // the placeholder itself and thus includes the zero-width space inside edit events.\n        if (EDITOR_TO_PENDING_INSERTION_MARKS.get(editor)) {\n          text = text.replace('\\uFEFF', '')\n        }\n\n        // Pastes from the Android clipboard will generate `insertText` events.\n        // If the copied text contains any newlines, Android will append an\n        // extra newline to the end of the copied text.\n        if (type === 'insertText' && /.*\\n.*\\n$/.test(text)) {\n          text = text.slice(0, -1)\n        }\n\n        // If the text includes a newline, split it at newlines and paste each component\n        // string, with soft breaks in between each.\n        if (text.includes('\\n')) {\n          return scheduleAction(\n            () => {\n              const parts = text.split('\\n')\n              parts.forEach((line, i) => {\n                if (line) {\n                  Editor.insertText(editor, line)\n                }\n                if (i !== parts.length - 1) {\n                  Editor.insertSoftBreak(editor)\n                }\n              })\n            },\n            {\n              at: targetRange,\n            }\n          )\n        }\n\n        if (Path.equals(targetRange.anchor.path, targetRange.focus.path)) {\n          const [start, end] = Range.edges(targetRange)\n\n          const diff = {\n            start: start.offset,\n            end: end.offset,\n            text,\n          }\n\n          // COMPAT: Swiftkey has a weird bug where the target range of the 2nd word\n          // inserted after a mark placeholder is inserted with an anchor offset off by 1.\n          // So writing 'some text' will result in 'some ttext'. Luckily all 'normal' insert\n          // text events are fired with the correct target ranges, only the final 'insertComposition'\n          // isn't, so we can adjust the target range start offset if we are confident this is the\n          // swiftkey insert causing the issue.\n          if (text && insertPositionHint && type === 'insertCompositionText') {\n            const hintPosition =\n              insertPositionHint.start + insertPositionHint.text.search(/\\S|$/)\n            const diffPosition = diff.start + diff.text.search(/\\S|$/)\n\n            if (\n              diffPosition === hintPosition + 1 &&\n              diff.end ===\n                insertPositionHint.start + insertPositionHint.text.length\n            ) {\n              debug('adjusting swiftKey insert position using hint')\n              diff.start -= 1\n              insertPositionHint = null\n              scheduleFlush()\n            } else {\n              insertPositionHint = false\n            }\n          } else if (type === 'insertText') {\n            if (insertPositionHint === null) {\n              insertPositionHint = diff\n            } else if (\n              insertPositionHint &&\n              Range.isCollapsed(targetRange) &&\n              insertPositionHint.end + insertPositionHint.text.length ===\n                start.offset\n            ) {\n              insertPositionHint = {\n                ...insertPositionHint,\n                text: insertPositionHint.text + text,\n              }\n            } else {\n              insertPositionHint = false\n            }\n          } else {\n            insertPositionHint = false\n          }\n\n          if (canStoreDiff) {\n            const currentSelection = editor.selection\n            storeDiff(start.path, diff)\n\n            if (currentSelection) {\n              const newPoint = {\n                path: start.path,\n                offset: start.offset + text.length,\n              }\n\n              scheduleAction(\n                () => {\n                  Transforms.select(editor, {\n                    anchor: newPoint,\n                    focus: newPoint,\n                  })\n                },\n                { at: newPoint }\n              )\n            }\n            return\n          }\n        }\n\n        return scheduleAction(() => Editor.insertText(editor, text), {\n          at: targetRange,\n        })\n      }\n    }\n  }\n\n  const hasPendingAction = () => {\n    return !!EDITOR_TO_PENDING_ACTION.get(editor)\n  }\n\n  const hasPendingDiffs = () => {\n    return !!EDITOR_TO_PENDING_DIFFS.get(editor)?.length\n  }\n\n  const hasPendingChanges = () => {\n    return hasPendingAction() || hasPendingDiffs()\n  }\n\n  const isFlushing = () => {\n    return flushing\n  }\n\n  const handleUserSelect = (range: Range | null) => {\n    EDITOR_TO_PENDING_SELECTION.set(editor, range)\n\n    if (flushTimeoutId) {\n      clearTimeout(flushTimeoutId)\n      flushTimeoutId = null\n    }\n\n    const { selection } = editor\n    if (!range) {\n      return\n    }\n\n    const pathChanged =\n      !selection || !Path.equals(selection.anchor.path, range.anchor.path)\n    const parentPathChanged =\n      !selection ||\n      !Path.equals(\n        selection.anchor.path.slice(0, -1),\n        range.anchor.path.slice(0, -1)\n      )\n\n    if ((pathChanged && insertPositionHint) || parentPathChanged) {\n      insertPositionHint = false\n    }\n\n    if (pathChanged || hasPendingDiffs()) {\n      flushTimeoutId = setTimeout(flush, FLUSH_DELAY)\n    }\n  }\n\n  const handleInput = () => {\n    if (hasPendingAction() || !hasPendingDiffs()) {\n      debug('flush input')\n      flush()\n    }\n  }\n\n  const handleKeyDown = (_: React.KeyboardEvent) => {\n    // COMPAT: Swiftkey closes the keyboard when typing inside a empty node\n    // directly next to a non-contenteditable element (= the placeholder).\n    // The only event fired soon enough for us to allow hiding the placeholder\n    // without swiftkey picking it up is the keydown event, so we have to hide it\n    // here. See https://github.com/ianstormtaylor/slate/pull/4988#issuecomment-1201050535\n    if (!hasPendingDiffs()) {\n      updatePlaceholderVisibility(true)\n      setTimeout(updatePlaceholderVisibility)\n    }\n  }\n\n  const scheduleFlush = () => {\n    if (!hasPendingAction()) {\n      actionTimeoutId = setTimeout(flush)\n    }\n  }\n\n  const handleDomMutations = (mutations: MutationRecord[]) => {\n    if (hasPendingDiffs() || hasPendingAction()) {\n      return\n    }\n\n    if (\n      mutations.some(mutation => isTrackedMutation(editor, mutation, mutations))\n    ) {\n      // Cause a re-render to restore the dom state if we encounter tracked mutations without\n      // a corresponding pending action.\n      EDITOR_TO_FORCE_RENDER.get(editor)?.()\n    }\n  }\n\n  return {\n    flush,\n    scheduleFlush,\n\n    hasPendingDiffs,\n    hasPendingAction,\n    hasPendingChanges,\n\n    isFlushing,\n\n    handleUserSelect,\n    handleCompositionEnd,\n    handleCompositionStart,\n    handleDOMBeforeInput,\n    handleKeyDown,\n\n    handleDomMutations,\n    handleInput,\n  }\n}\n","import { useEffect, useRef } from 'react'\n\nexport function useIsMounted() {\n  const isMountedRef = useRef(false)\n\n  useEffect(() => {\n    isMountedRef.current = true\n    return () => {\n      isMountedRef.current = false\n    }\n  }, [])\n\n  return isMountedRef.current\n}\n","import { useLayoutEffect, useEffect } from 'react'\nimport { CAN_USE_DOM } from 'slate-dom'\n\n/**\n * Prevent warning on SSR by falling back to useEffect when DOM isn't available\n */\n\nexport const useIsomorphicLayoutEffect = CAN_USE_DOM\n  ? useLayoutEffect\n  : useEffect\n","import { RefObject, useEffect, useState } from 'react'\nimport { useIsomorphicLayoutEffect } from './use-isomorphic-layout-effect'\n\nexport function useMutationObserver(\n  node: RefObject<HTMLElement>,\n  callback: MutationCallback,\n  options: MutationObserverInit\n) {\n  const [mutationObserver] = useState(() => new MutationObserver(callback))\n\n  useIsomorphicLayoutEffect(() => {\n    // Discard mutations caused during render phase. This works due to react calling\n    // useLayoutEffect synchronously after the render phase before the next tick.\n    mutationObserver.takeRecords()\n  })\n\n  useEffect(() => {\n    if (!node.current) {\n      throw new Error('Failed to attach MutationObserver, `node` is undefined')\n    }\n\n    mutationObserver.observe(node.current, options)\n    return () => mutationObserver.disconnect()\n  }, [mutationObserver, node, options])\n}\n","import { RefObject, useState } from 'react'\nimport { useSlateStatic } from '../use-slate-static'\nimport { IS_ANDROID } from 'slate-dom'\nimport { EDITOR_TO_SCHEDULE_FLUSH } from 'slate-dom'\nimport {\n  createAndroidInputManager,\n  CreateAndroidInputManagerOptions,\n} from './android-input-manager'\nimport { useIsMounted } from '../use-is-mounted'\nimport { useMutationObserver } from '../use-mutation-observer'\n\ntype UseAndroidInputManagerOptions = {\n  node: RefObject<HTMLElement>\n} & Omit<\n  CreateAndroidInputManagerOptions,\n  'editor' | 'onUserInput' | 'receivedUserInput'\n>\n\nconst MUTATION_OBSERVER_CONFIG: MutationObserverInit = {\n  subtree: true,\n  childList: true,\n  characterData: true,\n}\n\nexport const useAndroidInputManager = !IS_ANDROID\n  ? () => null\n  : ({ node, ...options }: UseAndroidInputManagerOptions) => {\n      if (!IS_ANDROID) {\n        return null\n      }\n\n      const editor = useSlateStatic()\n      const isMounted = useIsMounted()\n\n      const [inputManager] = useState(() =>\n        createAndroidInputManager({\n          editor,\n          ...options,\n        })\n      )\n\n      useMutationObserver(\n        node,\n        inputManager.handleDomMutations,\n        MUTATION_OBSERVER_CONFIG\n      )\n\n      EDITOR_TO_SCHEDULE_FLUSH.set(editor, inputManager.scheduleFlush)\n      if (isMounted) {\n        inputManager.flush()\n      }\n\n      return inputManager\n    }\n","import React, { forwardRef, memo, useRef, useState } from 'react'\nimport { Editor, Text, Path, Element, Node } from 'slate'\n\nimport { ReactEditor, useSlateStatic } from '..'\nimport { useIsomorphicLayoutEffect } from '../hooks/use-isomorphic-layout-effect'\nimport { IS_ANDROID } from 'slate-dom'\nimport { MARK_PLACEHOLDER_SYMBOL } from 'slate-dom'\n\n/**\n * Leaf content strings.\n */\n\nconst String = (props: {\n  isLast: boolean\n  leaf: Text\n  parent: Element\n  text: Text\n}) => {\n  const { isLast, leaf, parent, text } = props\n  const editor = useSlateStatic()\n  const path = ReactEditor.findPath(editor, text)\n  const parentPath = Path.parent(path)\n  const isMarkPlaceholder = Boolean(leaf[MARK_PLACEHOLDER_SYMBOL])\n\n  // COMPAT: Render text inside void nodes with a zero-width space.\n  // So the node can contain selection but the text is not visible.\n  if (editor.isVoid(parent)) {\n    return <ZeroWidthString length={Node.string(parent).length} />\n  }\n\n  // COMPAT: If this is the last text node in an empty block, render a zero-\n  // width space that will convert into a line break when copying and pasting\n  // to support expected plain text.\n  if (\n    leaf.text === '' &&\n    parent.children[parent.children.length - 1] === text &&\n    !editor.isInline(parent) &&\n    Editor.string(editor, parentPath) === ''\n  ) {\n    return <ZeroWidthString isLineBreak isMarkPlaceholder={isMarkPlaceholder} />\n  }\n\n  // COMPAT: If the text is empty, it's because it's on the edge of an inline\n  // node, so we render a zero-width space so that the selection can be\n  // inserted next to it still.\n  if (leaf.text === '') {\n    return <ZeroWidthString isMarkPlaceholder={isMarkPlaceholder} />\n  }\n\n  // COMPAT: Browsers will collapse trailing new lines at the end of blocks,\n  // so we need to add an extra trailing new lines to prevent that.\n  if (isLast && leaf.text.slice(-1) === '\\n') {\n    return <TextString isTrailing text={leaf.text} />\n  }\n\n  return <TextString text={leaf.text} />\n}\n\n/**\n * Leaf strings with text in them.\n */\nconst TextString = (props: { text: string; isTrailing?: boolean }) => {\n  const { text, isTrailing = false } = props\n  const ref = useRef<HTMLSpanElement>(null)\n  const getTextContent = () => {\n    return `${text ?? ''}${isTrailing ? '\\n' : ''}`\n  }\n  const [initialText] = useState(getTextContent)\n\n  // This is the actual text rendering boundary where we interface with the DOM\n  // The text is not rendered as part of the virtual DOM, as since we handle basic character insertions natively,\n  // updating the DOM is not a one way dataflow anymore. What we need here is not reconciliation and diffing\n  // with previous version of the virtual DOM, but rather diffing with the actual DOM element, and replace the DOM <span> content\n  // exactly if and only if its current content does not match our current virtual DOM.\n  // Otherwise the DOM TextNode would always be replaced by React as the user types, which interferes with native text features,\n  // eg makes native spellcheck opt out from checking the text node.\n\n  // useLayoutEffect: updating our span before browser paint\n  useIsomorphicLayoutEffect(() => {\n    // null coalescing text to make sure we're not outputing \"null\" as a string in the extreme case it is nullish at runtime\n    const textWithTrailing = getTextContent()\n\n    if (ref.current && ref.current.textContent !== textWithTrailing) {\n      ref.current.textContent = textWithTrailing\n    }\n\n    // intentionally not specifying dependencies, so that this effect runs on every render\n    // as this effectively replaces \"specifying the text in the virtual DOM under the <span> below\" on each render\n  })\n\n  // We intentionally render a memoized <span> that only receives the initial text content when the component is mounted.\n  // We defer to the layout effect above to update the `textContent` of the span element when needed.\n  return <MemoizedText ref={ref}>{initialText}</MemoizedText>\n}\n\nconst MemoizedText = memo(\n  forwardRef<HTMLSpanElement, { children: string }>((props, ref) => {\n    return (\n      <span data-slate-string ref={ref}>\n        {props.children}\n      </span>\n    )\n  })\n)\n\n/**\n * Leaf strings without text, render as zero-width strings.\n */\n\nexport const ZeroWidthString = (props: {\n  length?: number\n  isLineBreak?: boolean\n  isMarkPlaceholder?: boolean\n}) => {\n  const { length = 0, isLineBreak = false, isMarkPlaceholder = false } = props\n\n  const attributes: {\n    'data-slate-zero-width': string\n    'data-slate-length': number\n    'data-slate-mark-placeholder'?: boolean\n  } = {\n    'data-slate-zero-width': isLineBreak ? 'n' : 'z',\n    'data-slate-length': length,\n  }\n\n  if (isMarkPlaceholder) {\n    attributes['data-slate-mark-placeholder'] = true\n  }\n\n  // FIXME: Inserting the \\uFEFF on iOS breaks capitalization at the start of an\n  // empty editor (https://github.com/ianstormtaylor/slate/issues/5199).\n  //\n  // However, not inserting the \\uFEFF on iOS causes the editor to crash when\n  // inserting any text using an IME at the start of a block. This appears to\n  // be because accepting an IME suggestion when at the start of a block (no\n  // preceding \\uFEFF) removes one or more DOM elements that `toSlateRange`\n  // depends on. (https://github.com/ianstormtaylor/slate/issues/5703)\n  return (\n    <span {...attributes}>\n      {!IS_ANDROID || !isLineBreak ? '\\uFEFF' : null}\n      {isLineBreak ? <br /> : null}\n    </span>\n  )\n}\n\nexport default String\n","import React, {\n  useRef,\n  useCallback,\n  MutableRefObject,\n  useState,\n  useEffect,\n} from 'react'\nimport { JSX } from 'react'\nimport { Element, LeafPosition, Text } from 'slate'\nimport { ResizeObserver as ResizeObserverPolyfill } from '@juggle/resize-observer'\nimport String from './string'\nimport { PLACEHOLDER_SYMBOL, EDITOR_TO_PLACEHOLDER_ELEMENT } from 'slate-dom'\nimport { RenderLeafProps, RenderPlaceholderProps } from './editable'\nimport { useSlateStatic } from '../hooks/use-slate-static'\nimport { IS_WEBKIT, IS_ANDROID } from 'slate-dom'\n\n// Delay the placeholder on Android to prevent the keyboard from closing.\n// (https://github.com/ianstormtaylor/slate/pull/5368)\nconst PLACEHOLDER_DELAY = IS_ANDROID ? 300 : 0\n\nfunction disconnectPlaceholderResizeObserver(\n  placeholderResizeObserver: MutableRefObject<ResizeObserver | null>,\n  releaseObserver: boolean\n) {\n  if (placeholderResizeObserver.current) {\n    placeholderResizeObserver.current.disconnect()\n    if (releaseObserver) {\n      placeholderResizeObserver.current = null\n    }\n  }\n}\n\ntype TimerId = ReturnType<typeof setTimeout> | null\n\nfunction clearTimeoutRef(timeoutRef: MutableRefObject<TimerId>) {\n  if (timeoutRef.current) {\n    clearTimeout(timeoutRef.current)\n    timeoutRef.current = null\n  }\n}\n\nconst defaultRenderLeaf = (props: RenderLeafProps) => <DefaultLeaf {...props} />\n\n/**\n * Individual leaves in a text node with unique formatting.\n */\nconst Leaf = (props: {\n  isLast: boolean\n  leaf: Text\n  parent: Element\n  renderPlaceholder: (props: RenderPlaceholderProps) => JSX.Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n  text: Text\n  leafPosition?: LeafPosition\n}) => {\n  const {\n    leaf,\n    isLast,\n    text,\n    parent,\n    renderPlaceholder,\n    renderLeaf = defaultRenderLeaf,\n    leafPosition,\n  } = props\n\n  const editor = useSlateStatic()\n  const placeholderResizeObserver = useRef<ResizeObserver | null>(null)\n  const placeholderRef = useRef<HTMLElement | null>(null)\n  const [showPlaceholder, setShowPlaceholder] = useState(false)\n  const showPlaceholderTimeoutRef = useRef<TimerId>(null)\n\n  const callbackPlaceholderRef = useCallback(\n    (placeholderEl: HTMLElement | null) => {\n      disconnectPlaceholderResizeObserver(\n        placeholderResizeObserver,\n        placeholderEl == null\n      )\n\n      if (placeholderEl == null) {\n        EDITOR_TO_PLACEHOLDER_ELEMENT.delete(editor)\n        leaf.onPlaceholderResize?.(null)\n      } else {\n        EDITOR_TO_PLACEHOLDER_ELEMENT.set(editor, placeholderEl)\n\n        if (!placeholderResizeObserver.current) {\n          // Create a new observer and observe the placeholder element.\n          const ResizeObserver = window.ResizeObserver || ResizeObserverPolyfill\n          placeholderResizeObserver.current = new ResizeObserver(() => {\n            leaf.onPlaceholderResize?.(placeholderEl)\n          })\n        }\n        placeholderResizeObserver.current.observe(placeholderEl)\n        placeholderRef.current = placeholderEl\n      }\n    },\n    [placeholderRef, leaf, editor]\n  )\n\n  let children = (\n    <String isLast={isLast} leaf={leaf} parent={parent} text={text} />\n  )\n\n  const leafIsPlaceholder = Boolean(leaf[PLACEHOLDER_SYMBOL])\n  useEffect(() => {\n    if (leafIsPlaceholder) {\n      if (!showPlaceholderTimeoutRef.current) {\n        // Delay the placeholder, so it will not render in a selection\n        showPlaceholderTimeoutRef.current = setTimeout(() => {\n          setShowPlaceholder(true)\n          showPlaceholderTimeoutRef.current = null\n        }, PLACEHOLDER_DELAY)\n      }\n    } else {\n      clearTimeoutRef(showPlaceholderTimeoutRef)\n      setShowPlaceholder(false)\n    }\n    return () => clearTimeoutRef(showPlaceholderTimeoutRef)\n  }, [leafIsPlaceholder, setShowPlaceholder])\n\n  if (leafIsPlaceholder && showPlaceholder) {\n    const placeholderProps: RenderPlaceholderProps = {\n      children: leaf.placeholder,\n      attributes: {\n        'data-slate-placeholder': true,\n        style: {\n          position: 'absolute',\n          top: 0,\n          pointerEvents: 'none',\n          width: '100%',\n          maxWidth: '100%',\n          display: 'block',\n          opacity: '0.333',\n          userSelect: 'none',\n          textDecoration: 'none',\n          // Fixes https://github.com/udecode/plate/issues/2315\n          WebkitUserModify: IS_WEBKIT ? 'inherit' : undefined,\n        },\n        contentEditable: false,\n        ref: callbackPlaceholderRef,\n      },\n    }\n\n    children = (\n      <React.Fragment>\n        {children}\n        {renderPlaceholder(placeholderProps)}\n      </React.Fragment>\n    )\n  }\n\n  // COMPAT: Having the `data-` attributes on these leaf elements ensures that\n  // in certain misbehaving browsers they aren't weirdly cloned/destroyed by\n  // contenteditable behaviors. (2019/05/08)\n  const attributes: {\n    'data-slate-leaf': true\n  } = {\n    'data-slate-leaf': true,\n  }\n\n  return renderLeaf({\n    attributes,\n    children,\n    leaf,\n    text,\n    leafPosition,\n  })\n}\n\nconst MemoizedLeaf = React.memo(Leaf, (prev, next) => {\n  return (\n    next.parent === prev.parent &&\n    next.isLast === prev.isLast &&\n    next.renderLeaf === prev.renderLeaf &&\n    next.renderPlaceholder === prev.renderPlaceholder &&\n    next.text === prev.text &&\n    Text.equals(next.leaf, prev.leaf) &&\n    next.leaf[PLACEHOLDER_SYMBOL] === prev.leaf[PLACEHOLDER_SYMBOL]\n  )\n})\n\nexport const DefaultLeaf = (props: RenderLeafProps) => {\n  const { attributes, children } = props\n  return <span {...attributes}>{children}</span>\n}\n\nexport default MemoizedLeaf\n","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\nvar iterableToArray = require(\"./iterableToArray.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import { useCallback, useReducer, useRef } from 'react'\n\n/**\n * Create a selector that updates when an `update` function is called, and\n * which only causes the component to render when the result of `selector`\n * differs from the previous result according to `equalityFn`.\n *\n * If `selector` is memoized using `useCallback`, then it will only be called\n * when it changes or when `update` is called. Otherwise, `selector` will be\n * called every time the component renders.\n *\n * @example\n * const [state, update] = useGenericSelector(selector, equalityFn)\n *\n * useIsomorphicLayoutEffect(() => {\n *   return addEventListener(update)\n * }, [addEventListener, update])\n *\n * return state\n */\n\nexport function useGenericSelector<T>(\n  selector: () => T,\n  equalityFn: (a: T | null, b: T) => boolean\n): [state: T, update: () => void] {\n  const [, forceRender] = useReducer(s => s + 1, 0)\n\n  const latestSubscriptionCallbackError = useRef<Error | undefined>()\n  const latestSelector = useRef<() => T>(() => null as any)\n  const latestSelectedState = useRef<T | null>(null)\n  let selectedState: T\n\n  try {\n    if (\n      selector !== latestSelector.current ||\n      latestSubscriptionCallbackError.current\n    ) {\n      const selectorResult = selector()\n\n      if (equalityFn(latestSelectedState.current, selectorResult)) {\n        selectedState = latestSelectedState.current as T\n      } else {\n        selectedState = selectorResult\n      }\n    } else {\n      selectedState = latestSelectedState.current as T\n    }\n  } catch (err) {\n    if (latestSubscriptionCallbackError.current && isError(err)) {\n      err.message += `\\nThe error may be correlated with this previous error:\\n${latestSubscriptionCallbackError.current.stack}\\n\\n`\n    }\n\n    throw err\n  }\n\n  latestSelector.current = selector\n  latestSelectedState.current = selectedState\n  latestSubscriptionCallbackError.current = undefined\n\n  const update = useCallback(() => {\n    try {\n      const newSelectedState = latestSelector.current()\n\n      if (equalityFn(latestSelectedState.current, newSelectedState)) {\n        return\n      }\n\n      latestSelectedState.current = newSelectedState\n    } catch (err) {\n      // we ignore all errors here, since when the component\n      // is re-rendered, the selectors are called again, and\n      // will throw again, if neither props nor store state\n      // changed\n      if (err instanceof Error) {\n        latestSubscriptionCallbackError.current = err\n      } else {\n        latestSubscriptionCallbackError.current = new Error(String(err))\n      }\n    }\n\n    forceRender()\n\n    // don't rerender on equalityFn change since we want to be able to define it inline\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  return [selectedState, update]\n}\n\nfunction isError(error: any): error is Error {\n  return error instanceof Error\n}\n","import { createContext, useCallback, useContext, useMemo, useRef } from 'react'\nimport { DecoratedRange, Descendant, NodeEntry, Text } from 'slate'\nimport { isTextDecorationsEqual, isElementDecorationsEqual } from 'slate-dom'\nimport { useSlateStatic } from './use-slate-static'\nimport { ReactEditor } from '../plugin/react-editor'\nimport { useGenericSelector } from './use-generic-selector'\nimport { useIsomorphicLayoutEffect } from './use-isomorphic-layout-effect'\n\ntype Callback = () => void\n\n/**\n * A React context for sharing the `decorate` prop of the editable and\n * subscribing to changes on this prop.\n */\n\nexport const DecorateContext = createContext<{\n  decorate: (entry: NodeEntry) => DecoratedRange[]\n  addEventListener: (callback: Callback) => () => void\n}>({} as any)\n\nexport const useDecorations = (\n  node: Descendant,\n  parentDecorations: DecoratedRange[]\n): DecoratedRange[] => {\n  const editor = useSlateStatic()\n  const { decorate, addEventListener } = useContext(DecorateContext)\n\n  // Not memoized since we want nodes to be decorated on each render\n  const selector = () => {\n    const path = ReactEditor.findPath(editor, node)\n    return decorate([node, path])\n  }\n\n  const equalityFn = Text.isText(node)\n    ? isTextDecorationsEqual\n    : isElementDecorationsEqual\n\n  const [decorations, update] = useGenericSelector(selector, equalityFn)\n\n  useIsomorphicLayoutEffect(() => {\n    const unsubscribe = addEventListener(update)\n    update()\n    return unsubscribe\n  }, [addEventListener, update])\n\n  return useMemo(\n    () => [...decorations, ...parentDecorations],\n    [decorations, parentDecorations]\n  )\n}\n\nexport const useDecorateContext = (\n  decorateProp: (entry: NodeEntry) => DecoratedRange[]\n) => {\n  const eventListeners = useRef(new Set<Callback>())\n\n  const latestDecorate = useRef(decorateProp)\n\n  useIsomorphicLayoutEffect(() => {\n    latestDecorate.current = decorateProp\n    eventListeners.current.forEach(listener => listener())\n  }, [decorateProp])\n\n  const decorate = useCallback(\n    (entry: NodeEntry) => latestDecorate.current(entry),\n    []\n  )\n\n  const addEventListener = useCallback((callback: Callback) => {\n    eventListeners.current.add(callback)\n\n    return () => {\n      eventListeners.current.delete(callback)\n    }\n  }, [])\n\n  return useMemo(\n    () => ({ decorate, addEventListener }),\n    [decorate, addEventListener]\n  )\n}\n","import React, { useCallback, useRef } from 'react'\nimport { Element, Text as SlateText, DecoratedRange } from 'slate'\nimport { ReactEditor, useSlateStatic } from '..'\nimport { isTextDecorationsEqual } from 'slate-dom'\nimport {\n  EDITOR_TO_KEY_TO_ELEMENT,\n  ELEMENT_TO_NODE,\n  NODE_TO_ELEMENT,\n} from 'slate-dom'\nimport {\n  RenderLeafProps,\n  RenderPlaceholderProps,\n  RenderTextProps,\n} from './editable'\nimport Leaf from './leaf'\nimport { useDecorations } from '../hooks/use-decorations'\n\nconst defaultRenderText = (props: RenderTextProps) => <DefaultText {...props} />\n\n/**\n * Text.\n */\n\nconst Text = (props: {\n  decorations: DecoratedRange[]\n  isLast: boolean\n  parent: Element\n  renderPlaceholder: (props: RenderPlaceholderProps) => JSX.Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n  renderText?: (props: RenderTextProps) => JSX.Element\n  text: SlateText\n}) => {\n  const {\n    decorations: parentDecorations,\n    isLast,\n    parent,\n    renderPlaceholder,\n    renderLeaf,\n    renderText = defaultRenderText,\n    text,\n  } = props\n\n  const editor = useSlateStatic()\n  const ref = useRef<HTMLSpanElement | null>(null)\n  const decorations = useDecorations(text, parentDecorations)\n  const decoratedLeaves = SlateText.decorations(text, decorations)\n  const key = ReactEditor.findKey(editor, text)\n  const children = []\n\n  for (let i = 0; i < decoratedLeaves.length; i++) {\n    const { leaf, position } = decoratedLeaves[i]\n\n    children.push(\n      <Leaf\n        isLast={isLast && i === decoratedLeaves.length - 1}\n        key={`${key.id}-${i}`}\n        renderPlaceholder={renderPlaceholder}\n        leaf={leaf}\n        leafPosition={position}\n        text={text}\n        parent={parent}\n        renderLeaf={renderLeaf}\n      />\n    )\n  }\n\n  // Update element-related weak maps with the DOM element ref.\n  const callbackRef = useCallback(\n    (span: HTMLSpanElement | null) => {\n      const KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor)\n      if (span) {\n        KEY_TO_ELEMENT?.set(key, span)\n        NODE_TO_ELEMENT.set(text, span)\n        ELEMENT_TO_NODE.set(span, text)\n      } else {\n        KEY_TO_ELEMENT?.delete(key)\n        NODE_TO_ELEMENT.delete(text)\n        if (ref.current) {\n          ELEMENT_TO_NODE.delete(ref.current)\n        }\n      }\n      ref.current = span\n    },\n    [ref, editor, key, text]\n  )\n\n  const attributes: {\n    'data-slate-node': 'text'\n    ref: any\n  } = {\n    'data-slate-node': 'text',\n    ref: callbackRef,\n  }\n\n  return renderText({\n    text,\n    children,\n    attributes,\n  })\n}\n\nconst MemoizedText = React.memo(Text, (prev, next) => {\n  return (\n    next.parent === prev.parent &&\n    next.isLast === prev.isLast &&\n    next.renderText === prev.renderText &&\n    next.renderLeaf === prev.renderLeaf &&\n    next.renderPlaceholder === prev.renderPlaceholder &&\n    next.text === prev.text &&\n    isTextDecorationsEqual(next.decorations, prev.decorations)\n  )\n})\n\nexport const DefaultText = (props: RenderTextProps) => {\n  const { attributes, children } = props\n  return <span {...attributes}>{children}</span>\n}\n\nexport default MemoizedText\n","import getDirection from 'direction'\nimport React, { useCallback } from 'react'\nimport { JSX } from 'react'\nimport { Editor, Element as SlateElement, Node, DecoratedRange } from 'slate'\nimport { ReactEditor, useReadOnly, useSlateStatic } from '..'\nimport useChildren from '../hooks/use-children'\nimport { isElementDecorationsEqual } from 'slate-dom'\nimport {\n  EDITOR_TO_KEY_TO_ELEMENT,\n  ELEMENT_TO_NODE,\n  NODE_TO_ELEMENT,\n  NODE_TO_INDEX,\n  NODE_TO_PARENT,\n} from 'slate-dom'\nimport {\n  RenderChunkProps,\n  RenderElementProps,\n  RenderLeafProps,\n  RenderPlaceholderProps,\n  RenderTextProps,\n} from './editable'\n\nimport Text from './text'\nimport { useDecorations } from '../hooks/use-decorations'\n\nconst defaultRenderElement = (props: RenderElementProps) => (\n  <DefaultElement {...props} />\n)\n\n/**\n * Element.\n */\n\nconst Element = (props: {\n  decorations: DecoratedRange[]\n  element: SlateElement\n  renderElement?: (props: RenderElementProps) => JSX.Element\n  renderChunk?: (props: RenderChunkProps) => JSX.Element\n  renderPlaceholder: (props: RenderPlaceholderProps) => JSX.Element\n  renderText?: (props: RenderTextProps) => JSX.Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n}) => {\n  const {\n    decorations: parentDecorations,\n    element,\n    renderElement = defaultRenderElement,\n    renderChunk,\n    renderPlaceholder,\n    renderLeaf,\n    renderText,\n  } = props\n  const editor = useSlateStatic()\n  const readOnly = useReadOnly()\n  const isInline = editor.isInline(element)\n  const decorations = useDecorations(element, parentDecorations)\n  const key = ReactEditor.findKey(editor, element)\n  const ref = useCallback(\n    (ref: HTMLElement | null) => {\n      // Update element-related weak maps with the DOM element ref.\n      const KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor)\n      if (ref) {\n        KEY_TO_ELEMENT?.set(key, ref)\n        NODE_TO_ELEMENT.set(element, ref)\n        ELEMENT_TO_NODE.set(ref, element)\n      } else {\n        KEY_TO_ELEMENT?.delete(key)\n        NODE_TO_ELEMENT.delete(element)\n      }\n    },\n    [editor, key, element]\n  )\n  let children: React.ReactNode = useChildren({\n    decorations,\n    node: element,\n    renderElement,\n    renderChunk,\n    renderPlaceholder,\n    renderLeaf,\n    renderText,\n  })\n\n  // Attributes that the developer must mix into the element in their\n  // custom node renderer component.\n  const attributes: {\n    'data-slate-node': 'element'\n    'data-slate-void'?: true\n    'data-slate-inline'?: true\n    contentEditable?: false\n    dir?: 'rtl'\n    ref: any\n  } = {\n    'data-slate-node': 'element',\n    ref,\n  }\n\n  if (isInline) {\n    attributes['data-slate-inline'] = true\n  }\n\n  // If it's a block node with inline children, add the proper `dir` attribute\n  // for text direction.\n  if (!isInline && Editor.hasInlines(editor, element)) {\n    const text = Node.string(element)\n    const dir = getDirection(text)\n\n    if (dir === 'rtl') {\n      attributes.dir = dir\n    }\n  }\n\n  // If it's a void node, wrap the children in extra void-specific elements.\n  if (Editor.isVoid(editor, element)) {\n    attributes['data-slate-void'] = true\n\n    if (!readOnly && isInline) {\n      attributes.contentEditable = false\n    }\n\n    const Tag = isInline ? 'span' : 'div'\n    const [[text]] = Node.texts(element)\n\n    children = (\n      <Tag\n        data-slate-spacer\n        style={{\n          height: '0',\n          color: 'transparent',\n          outline: 'none',\n          position: 'absolute',\n        }}\n      >\n        <Text\n          renderPlaceholder={renderPlaceholder}\n          decorations={[]}\n          isLast={false}\n          parent={element}\n          text={text}\n        />\n      </Tag>\n    )\n\n    NODE_TO_INDEX.set(text, 0)\n    NODE_TO_PARENT.set(text, element)\n  }\n\n  return renderElement({ attributes, children, element })\n}\n\nconst MemoizedElement = React.memo(Element, (prev, next) => {\n  return (\n    prev.element === next.element &&\n    prev.renderElement === next.renderElement &&\n    prev.renderChunk === next.renderChunk &&\n    prev.renderText === next.renderText &&\n    prev.renderLeaf === next.renderLeaf &&\n    prev.renderPlaceholder === next.renderPlaceholder &&\n    isElementDecorationsEqual(prev.decorations, next.decorations)\n  )\n})\n\n/**\n * The default element renderer.\n */\n\nexport const DefaultElement = (props: RenderElementProps) => {\n  const { attributes, children, element } = props\n  const editor = useSlateStatic()\n  const Tag = editor.isInline(element) ? 'span' : 'div'\n  return (\n    <Tag {...attributes} style={{ position: 'relative' }}>\n      {children}\n    </Tag>\n  )\n}\n\nexport default MemoizedElement\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import { Path } from 'slate'\nimport { Key } from 'slate-dom'\nimport {\n  Chunk,\n  ChunkTree,\n  ChunkLeaf,\n  ChunkDescendant,\n  ChunkAncestor,\n} from './types'\n\ntype SavedPointer =\n  | 'start'\n  | {\n      chunk: ChunkAncestor\n      node: ChunkDescendant\n    }\n\nexport interface ChunkTreeHelperOptions {\n  chunkSize: number\n  debug?: boolean\n}\n\n/**\n * Traverse and modify a chunk tree\n */\nexport class ChunkTreeHelper {\n  /**\n   * The root of the chunk tree\n   */\n  private root: ChunkTree\n\n  /**\n   * The ideal size of a chunk\n   */\n  private chunkSize: number\n\n  /**\n   * Whether debug mode is enabled\n   *\n   * If enabled, the pointer state will be checked for internal consistency\n   * after each mutating operation.\n   */\n  private debug: boolean\n\n  /**\n   * Whether the traversal has reached the end of the chunk tree\n   *\n   * When this is true, the pointerChunk and pointerIndex point to the last\n   * top-level node in the chunk tree, although pointerNode returns null.\n   */\n  private reachedEnd: boolean\n\n  /**\n   * The chunk containing the current node\n   */\n  private pointerChunk: ChunkAncestor\n\n  /**\n   * The index of the current node within pointerChunk\n   *\n   * Can be -1 to indicate that the pointer is before the start of the tree.\n   */\n  private pointerIndex: number\n\n  /**\n   * Similar to a Slate path; tracks the path of pointerChunk relative to the\n   * root.\n   *\n   * Used to move the pointer from the current chunk to the parent chunk more\n   * efficiently.\n   */\n  private pointerIndexStack: number[]\n\n  /**\n   * Indexing the current chunk's children has a slight time cost, which adds up\n   * when traversing very large trees, so the current node is cached.\n   *\n   * A value of undefined means that the current node is not cached. This\n   * property must be set to undefined whenever the pointer is moved, unless\n   * the pointer is guaranteed to point to the same node that it did previously.\n   */\n  private cachedPointerNode: ChunkDescendant | null | undefined\n\n  constructor(\n    chunkTree: ChunkTree,\n    { chunkSize, debug }: ChunkTreeHelperOptions\n  ) {\n    this.root = chunkTree\n    this.chunkSize = chunkSize\n    // istanbul ignore next\n    this.debug = debug ?? false\n    this.pointerChunk = chunkTree\n    this.pointerIndex = -1\n    this.pointerIndexStack = []\n    this.reachedEnd = false\n    this.validateState()\n  }\n\n  /**\n   * Move the pointer to the next leaf in the chunk tree\n   */\n  public readLeaf(): ChunkLeaf | null {\n    // istanbul ignore next\n    if (this.reachedEnd) return null\n\n    // Get the next sibling or aunt node\n    while (true) {\n      if (this.pointerIndex + 1 < this.pointerSiblings.length) {\n        this.pointerIndex++\n        this.cachedPointerNode = undefined\n        break\n      } else if (this.pointerChunk.type === 'root') {\n        this.reachedEnd = true\n        return null\n      } else {\n        this.exitChunk()\n      }\n    }\n\n    this.validateState()\n\n    // If the next sibling or aunt is a chunk, descend into it\n    this.enterChunkUntilLeaf(false)\n\n    return this.pointerNode as ChunkLeaf\n  }\n\n  /**\n   * Move the pointer to the previous leaf in the chunk tree\n   */\n  public returnToPreviousLeaf() {\n    // If we were at the end of the tree, descend into the end of the last\n    // chunk in the tree\n    if (this.reachedEnd) {\n      this.reachedEnd = false\n      this.enterChunkUntilLeaf(true)\n      return\n    }\n\n    // Get the previous sibling or aunt node\n    while (true) {\n      if (this.pointerIndex >= 1) {\n        this.pointerIndex--\n        this.cachedPointerNode = undefined\n        break\n      } else if (this.pointerChunk.type === 'root') {\n        this.pointerIndex = -1\n        return\n      } else {\n        this.exitChunk()\n      }\n    }\n\n    this.validateState()\n\n    // If the previous sibling or aunt is a chunk, descend into it\n    this.enterChunkUntilLeaf(true)\n  }\n\n  /**\n   * Insert leaves before the current leaf, leaving the pointer unchanged\n   */\n  public insertBefore(leaves: ChunkLeaf[]) {\n    this.returnToPreviousLeaf()\n    this.insertAfter(leaves)\n    this.readLeaf()\n  }\n\n  /**\n   * Insert leaves after the current leaf, leaving the pointer on the last\n   * inserted leaf\n   *\n   * The insertion algorithm first checks for any chunk we're currently at the\n   * end of that can receive additional leaves. Next, it tries to insert leaves\n   * at the starts of any subsequent chunks.\n   *\n   * Any remaining leaves are passed to rawInsertAfter to be chunked and\n   * inserted at the highest possible level.\n   */\n  public insertAfter(leaves: ChunkLeaf[]) {\n    // istanbul ignore next\n    if (leaves.length === 0) return\n\n    let beforeDepth = 0\n    let afterDepth = 0\n\n    // While at the end of a chunk, insert any leaves that will fit, and then\n    // exit the chunk\n    while (\n      this.pointerChunk.type === 'chunk' &&\n      this.pointerIndex === this.pointerSiblings.length - 1\n    ) {\n      const remainingCapacity = this.chunkSize - this.pointerSiblings.length\n      const toInsertCount = Math.min(remainingCapacity, leaves.length)\n\n      if (toInsertCount > 0) {\n        const leavesToInsert = leaves.splice(0, toInsertCount)\n        this.rawInsertAfter(leavesToInsert, beforeDepth)\n      }\n\n      this.exitChunk()\n      beforeDepth++\n    }\n\n    if (leaves.length === 0) return\n\n    // Save the pointer so that we can come back here after inserting leaves\n    // into the starts of subsequent blocks\n    const rawInsertPointer = this.savePointer()\n\n    // If leaves are inserted into the start of a subsequent block, then we\n    // eventually need to restore the pointer to the last such inserted leaf\n    let finalPointer: SavedPointer | null = null\n\n    // Move the pointer into the chunk containing the next leaf, if it exists\n    if (this.readLeaf()) {\n      // While at the start of a chunk, insert any leaves that will fit, and\n      // then exit the chunk\n      while (this.pointerChunk.type === 'chunk' && this.pointerIndex === 0) {\n        const remainingCapacity = this.chunkSize - this.pointerSiblings.length\n        const toInsertCount = Math.min(remainingCapacity, leaves.length)\n\n        if (toInsertCount > 0) {\n          const leavesToInsert = leaves.splice(-toInsertCount, toInsertCount)\n\n          // Insert the leaves at the start of the chunk\n          this.pointerIndex = -1\n          this.cachedPointerNode = undefined\n          this.rawInsertAfter(leavesToInsert, afterDepth)\n\n          // If this is the first batch of insertions at the start of a\n          // subsequent chunk, set the final pointer to the last inserted leaf\n          if (!finalPointer) {\n            finalPointer = this.savePointer()\n          }\n        }\n\n        this.exitChunk()\n        afterDepth++\n      }\n    }\n\n    this.restorePointer(rawInsertPointer)\n\n    // If there are leaves left to insert, insert them between the end of the\n    // previous chunk and the start of the first subsequent chunk, or wherever\n    // the pointer ended up after the first batch of insertions\n    const minDepth = Math.max(beforeDepth, afterDepth)\n    this.rawInsertAfter(leaves, minDepth)\n\n    if (finalPointer) {\n      this.restorePointer(finalPointer)\n    }\n\n    this.validateState()\n  }\n\n  /**\n   * Remove the current node and decrement the pointer, deleting any ancestor\n   * chunk that becomes empty as a result\n   */\n  public remove() {\n    this.pointerSiblings.splice(this.pointerIndex--, 1)\n    this.cachedPointerNode = undefined\n\n    if (\n      this.pointerSiblings.length === 0 &&\n      this.pointerChunk.type === 'chunk'\n    ) {\n      this.exitChunk()\n      this.remove()\n    } else {\n      this.invalidateChunk()\n    }\n\n    this.validateState()\n  }\n\n  /**\n   * Add the current chunk and all ancestor chunks to the list of modified\n   * chunks\n   */\n  public invalidateChunk() {\n    for (let c = this.pointerChunk; c.type === 'chunk'; c = c.parent) {\n      this.root.modifiedChunks.add(c)\n    }\n  }\n\n  /**\n   * Whether the pointer is at the start of the tree\n   */\n  private get atStart() {\n    return this.pointerChunk.type === 'root' && this.pointerIndex === -1\n  }\n\n  /**\n   * The siblings of the current node\n   */\n  private get pointerSiblings(): ChunkDescendant[] {\n    return this.pointerChunk.children\n  }\n\n  /**\n   * Get the current node (uncached)\n   *\n   * If the pointer is at the start or end of the document, returns null.\n   *\n   * Usually, the current node is a chunk leaf, although it can be a chunk\n   * while insertions are in progress.\n   */\n  private getPointerNode(): ChunkDescendant | null {\n    if (this.reachedEnd || this.pointerIndex === -1) {\n      return null\n    }\n\n    return this.pointerSiblings[this.pointerIndex]\n  }\n\n  /**\n   * Cached getter for the current node\n   */\n  private get pointerNode(): ChunkDescendant | null {\n    if (this.cachedPointerNode !== undefined) return this.cachedPointerNode\n    const pointerNode = this.getPointerNode()\n    this.cachedPointerNode = pointerNode\n    return pointerNode\n  }\n\n  /**\n   * Get the path of a chunk relative to the root, returning null if the chunk\n   * is not connected to the root\n   */\n  private getChunkPath(chunk: ChunkAncestor): number[] | null {\n    const path: number[] = []\n\n    for (let c = chunk; c.type === 'chunk'; c = c.parent) {\n      const index = c.parent.children.indexOf(c)\n\n      // istanbul ignore next\n      if (index === -1) {\n        return null\n      }\n\n      path.unshift(index)\n    }\n\n    return path\n  }\n\n  /**\n   * Save the current pointer to be restored later\n   */\n  private savePointer(): SavedPointer {\n    if (this.atStart) return 'start'\n\n    // istanbul ignore next\n    if (!this.pointerNode) {\n      throw new Error('Cannot save pointer when pointerNode is null')\n    }\n\n    return {\n      chunk: this.pointerChunk,\n      node: this.pointerNode,\n    }\n  }\n\n  /**\n   * Restore the pointer to a previous state\n   */\n  private restorePointer(savedPointer: SavedPointer) {\n    if (savedPointer === 'start') {\n      this.pointerChunk = this.root\n      this.pointerIndex = -1\n      this.pointerIndexStack = []\n      this.reachedEnd = false\n      this.cachedPointerNode = undefined\n      return\n    }\n\n    // Since nodes may have been inserted or removed prior to the saved\n    // pointer since it was saved, the index and index stack must be\n    // recomputed. This is slow, but this is fine since restoring a pointer is\n    // not a frequent operation.\n\n    const { chunk, node } = savedPointer\n    const index = chunk.children.indexOf(node)\n\n    // istanbul ignore next\n    if (index === -1) {\n      throw new Error(\n        'Cannot restore point because saved node is no longer in saved chunk'\n      )\n    }\n\n    const indexStack = this.getChunkPath(chunk)\n\n    // istanbul ignore next\n    if (!indexStack) {\n      throw new Error(\n        'Cannot restore point because saved chunk is no longer connected to root'\n      )\n    }\n\n    this.pointerChunk = chunk\n    this.pointerIndex = index\n    this.pointerIndexStack = indexStack\n    this.reachedEnd = false\n    this.cachedPointerNode = node\n    this.validateState()\n  }\n\n  /**\n   * Assuming the current node is a chunk, move the pointer into that chunk\n   *\n   * @param end If true, place the pointer on the last node of the chunk.\n   * Otherwise, place the pointer on the first node.\n   */\n  private enterChunk(end: boolean) {\n    // istanbul ignore next\n    if (this.pointerNode?.type !== 'chunk') {\n      throw new Error('Cannot enter non-chunk')\n    }\n\n    this.pointerIndexStack.push(this.pointerIndex)\n    this.pointerChunk = this.pointerNode\n    this.pointerIndex = end ? this.pointerSiblings.length - 1 : 0\n    this.cachedPointerNode = undefined\n    this.validateState()\n\n    // istanbul ignore next\n    if (this.pointerChunk.children.length === 0) {\n      throw new Error('Cannot enter empty chunk')\n    }\n  }\n\n  /**\n   * Assuming the current node is a chunk, move the pointer into that chunk\n   * repeatedly until the current node is a leaf\n   *\n   * @param end If true, place the pointer on the last node of the chunk.\n   * Otherwise, place the pointer on the first node.\n   */\n  private enterChunkUntilLeaf(end: boolean) {\n    while (this.pointerNode?.type === 'chunk') {\n      this.enterChunk(end)\n    }\n  }\n\n  /**\n   * Move the pointer to the parent chunk\n   */\n  private exitChunk() {\n    // istanbul ignore next\n    if (this.pointerChunk.type === 'root') {\n      throw new Error('Cannot exit root')\n    }\n\n    const previousPointerChunk = this.pointerChunk\n    this.pointerChunk = previousPointerChunk.parent\n    this.pointerIndex = this.pointerIndexStack.pop()!\n    this.cachedPointerNode = undefined\n    this.validateState()\n  }\n\n  /**\n   * Insert leaves immediately after the current node, leaving the pointer on\n   * the last inserted leaf\n   *\n   * Leaves are chunked according to the number of nodes already in the parent\n   * plus the number of nodes being inserted, or the minimum depth if larger\n   */\n  private rawInsertAfter(leaves: ChunkLeaf[], minDepth: number) {\n    if (leaves.length === 0) return\n\n    const groupIntoChunks = (\n      leaves: ChunkLeaf[],\n      parent: ChunkAncestor,\n      perChunk: number\n    ): ChunkDescendant[] => {\n      if (perChunk === 1) return leaves\n      const chunks: Chunk[] = []\n\n      for (let i = 0; i < this.chunkSize; i++) {\n        const chunkNodes = leaves.slice(i * perChunk, (i + 1) * perChunk)\n        if (chunkNodes.length === 0) break\n\n        const chunk: Chunk = {\n          type: 'chunk',\n          key: new Key(),\n          parent,\n          children: [],\n        }\n\n        chunk.children = groupIntoChunks(\n          chunkNodes,\n          chunk,\n          perChunk / this.chunkSize\n        )\n        chunks.push(chunk)\n      }\n\n      return chunks\n    }\n\n    // Determine the chunking depth based on the number of existing nodes in\n    // the chunk and the number of nodes being inserted\n    const newTotal = this.pointerSiblings.length + leaves.length\n    let depthForTotal = 0\n\n    for (let i = this.chunkSize; i < newTotal; i *= this.chunkSize) {\n      depthForTotal++\n    }\n\n    // A depth of 0 means no chunking\n    const depth = Math.max(depthForTotal, minDepth)\n    const perTopLevelChunk = Math.pow(this.chunkSize, depth)\n\n    const chunks = groupIntoChunks(leaves, this.pointerChunk, perTopLevelChunk)\n    this.pointerSiblings.splice(this.pointerIndex + 1, 0, ...chunks)\n    this.pointerIndex += chunks.length\n    this.cachedPointerNode = undefined\n    this.invalidateChunk()\n    this.validateState()\n  }\n\n  /**\n   * If debug mode is enabled, ensure that the state is internally consistent\n   */\n  // istanbul ignore next\n  private validateState() {\n    if (!this.debug) return\n\n    const validateDescendant = (node: ChunkDescendant) => {\n      if (node.type === 'chunk') {\n        const { parent, children } = node\n\n        if (!parent.children.includes(node)) {\n          throw new Error(\n            `Debug: Chunk ${node.key.id} has an incorrect parent property`\n          )\n        }\n\n        children.forEach(validateDescendant)\n      }\n    }\n\n    this.root.children.forEach(validateDescendant)\n\n    if (\n      this.cachedPointerNode !== undefined &&\n      this.cachedPointerNode !== this.getPointerNode()\n    ) {\n      throw new Error(\n        'Debug: The cached pointer is incorrect and has not been invalidated'\n      )\n    }\n\n    const actualIndexStack = this.getChunkPath(this.pointerChunk)\n\n    if (!actualIndexStack) {\n      throw new Error('Debug: The pointer chunk is not connected to the root')\n    }\n\n    if (!Path.equals(this.pointerIndexStack, actualIndexStack)) {\n      throw new Error(\n        `Debug: The cached index stack [${this.pointerIndexStack.join(\n          ', '\n        )}] does not match the path of the pointer chunk [${actualIndexStack.join(\n          ', '\n        )}]`\n      )\n    }\n  }\n}\n","import { Editor, Descendant } from 'slate'\nimport { Key } from 'slate-dom'\nimport { ChunkLeaf } from './types'\nimport { ReactEditor } from '../plugin/react-editor'\n\n/**\n * Traverse an array of children, providing helpers useful for reconciling the\n * children array with a chunk tree\n */\nexport class ChildrenHelper {\n  private editor: Editor\n  private children: Descendant[]\n\n  /**\n   * Sparse array of Slate node keys, each index corresponding to an index in\n   * the children array\n   *\n   * Fetching the key for a Slate node is expensive, so we cache them here.\n   */\n  private cachedKeys: Array<Key | undefined>\n\n  /**\n   * The index of the next node to be read in the children array\n   */\n  public pointerIndex: number\n\n  constructor(editor: Editor, children: Descendant[]) {\n    this.editor = editor\n    this.children = children\n    this.cachedKeys = new Array(children.length)\n    this.pointerIndex = 0\n  }\n\n  /**\n   * Read a given number of nodes, advancing the pointer by that amount\n   */\n  public read(n: number): Descendant[] {\n    // PERF: If only one child was requested (the most common case), use array\n    // indexing instead of slice\n    if (n === 1) {\n      return [this.children[this.pointerIndex++]]\n    }\n\n    const slicedChildren = this.remaining(n)\n    this.pointerIndex += n\n\n    return slicedChildren\n  }\n\n  /**\n   * Get the remaining children without advancing the pointer\n   *\n   * @param [maxChildren] Limit the number of children returned.\n   */\n  public remaining(maxChildren?: number): Descendant[] {\n    if (maxChildren === undefined) {\n      return this.children.slice(this.pointerIndex)\n    }\n\n    return this.children.slice(\n      this.pointerIndex,\n      this.pointerIndex + maxChildren\n    )\n  }\n\n  /**\n   * Whether all children have been read\n   */\n  public get reachedEnd() {\n    return this.pointerIndex >= this.children.length\n  }\n\n  /**\n   * Determine whether a node with a given key appears in the unread part of the\n   * children array, and return its index relative to the current pointer if so\n   *\n   * Searching for the node object itself using indexOf is most efficient, but\n   * will fail to locate nodes that have been modified. In this case, nodes\n   * should be identified by their keys instead.\n   *\n   * Searching an array of keys using indexOf is very inefficient since fetching\n   * the keys for all children in advance is very slow. Insead, if the node\n   * search fails to return a value, fetch the keys of each remaining child one\n   * by one and compare it to the known key.\n   */\n  public lookAhead(node: Descendant, key: Key) {\n    const elementResult = this.children.indexOf(node, this.pointerIndex)\n    if (elementResult > -1) return elementResult - this.pointerIndex\n\n    for (let i = this.pointerIndex; i < this.children.length; i++) {\n      const candidateNode = this.children[i]\n      const candidateKey = this.findKey(candidateNode, i)\n      if (candidateKey === key) return i - this.pointerIndex\n    }\n\n    return -1\n  }\n\n  /**\n   * Convert an array of Slate nodes to an array of chunk leaves, each\n   * containing the node and its key\n   */\n  public toChunkLeaves(nodes: Descendant[], startIndex: number): ChunkLeaf[] {\n    return nodes.map((node, i) => ({\n      type: 'leaf',\n      node,\n      key: this.findKey(node, startIndex + i),\n      index: startIndex + i,\n    }))\n  }\n\n  /**\n   * Get the key for a Slate node, cached using the node's index\n   */\n  private findKey(node: Descendant, index: number): Key {\n    const cachedKey = this.cachedKeys[index]\n    if (cachedKey) return cachedKey\n    const key = ReactEditor.findKey(this.editor, node)\n    this.cachedKeys[index] = key\n    return key\n  }\n}\n","import { Editor, Descendant } from 'slate'\nimport { ChunkTree, ChunkLeaf } from './types'\nimport { ChunkTreeHelper, ChunkTreeHelperOptions } from './chunk-tree-helper'\nimport { ChildrenHelper } from './children-helper'\n\nexport interface ReconcileOptions extends ChunkTreeHelperOptions {\n  chunkTree: ChunkTree\n  children: Descendant[]\n  chunkSize: number\n  rerenderChildren?: number[]\n  onInsert?: (node: Descendant, index: number) => void\n  onUpdate?: (node: Descendant, index: number) => void\n  onIndexChange?: (node: Descendant, index: number) => void\n  debug?: boolean\n}\n\n/**\n * Update the chunk tree to match the children array, inserting, removing and\n * updating differing nodes\n */\nexport const reconcileChildren = (\n  editor: Editor,\n  {\n    chunkTree,\n    children,\n    chunkSize,\n    rerenderChildren = [],\n    onInsert,\n    onUpdate,\n    onIndexChange,\n    debug,\n  }: ReconcileOptions\n) => {\n  chunkTree.modifiedChunks.clear()\n\n  const chunkTreeHelper = new ChunkTreeHelper(chunkTree, { chunkSize, debug })\n  const childrenHelper = new ChildrenHelper(editor, children)\n\n  let treeLeaf: ChunkLeaf | null\n\n  // Read leaves from the tree one by one, each one representing a single Slate\n  // node. Each leaf from the tree is compared to the current node in the\n  // children array to determine whether nodes have been inserted, removed or\n  // updated.\n  while ((treeLeaf = chunkTreeHelper.readLeaf())) {\n    // Check where the tree node appears in the children array. In the most\n    // common case (where no insertions or removals have occurred), this will be\n    // 0. If the node has been removed, this will be -1. If new nodes have been\n    // inserted before the node, or if the node has been moved to a later\n    // position in the same children array, this will be a positive number.\n    const lookAhead = childrenHelper.lookAhead(treeLeaf.node, treeLeaf.key)\n\n    // If the node was moved, we want to remove it and insert it later, rather\n    // then re-inserting all intermediate nodes before it.\n    const wasMoved = lookAhead > 0 && chunkTree.movedNodeKeys.has(treeLeaf.key)\n\n    // If the tree leaf was moved or removed, remove it\n    if (lookAhead === -1 || wasMoved) {\n      chunkTreeHelper.remove()\n      continue\n    }\n\n    // Get the matching Slate node and any nodes that may have been inserted\n    // prior to it. Insert these into the chunk tree.\n    const insertedChildrenStartIndex = childrenHelper.pointerIndex\n    const insertedChildren = childrenHelper.read(lookAhead + 1)\n    const matchingChild = insertedChildren.pop()!\n\n    if (insertedChildren.length) {\n      const leavesToInsert = childrenHelper.toChunkLeaves(\n        insertedChildren,\n        insertedChildrenStartIndex\n      )\n\n      chunkTreeHelper.insertBefore(leavesToInsert)\n\n      insertedChildren.forEach((node, relativeIndex) => {\n        onInsert?.(node, insertedChildrenStartIndex + relativeIndex)\n      })\n    }\n\n    const matchingChildIndex = childrenHelper.pointerIndex - 1\n\n    // Make sure the chunk tree contains the most recent version of the Slate\n    // node\n    if (treeLeaf.node !== matchingChild) {\n      treeLeaf.node = matchingChild\n      chunkTreeHelper.invalidateChunk()\n      onUpdate?.(matchingChild, matchingChildIndex)\n    }\n\n    // Update the index if it has changed\n    if (treeLeaf.index !== matchingChildIndex) {\n      treeLeaf.index = matchingChildIndex\n      onIndexChange?.(matchingChild, matchingChildIndex)\n    }\n\n    // Manually invalidate chunks containing specific children that we want to\n    // re-render\n    if (rerenderChildren.includes(matchingChildIndex)) {\n      chunkTreeHelper.invalidateChunk()\n    }\n  }\n\n  // If there are still Slate nodes remaining from the children array that were\n  // not matched to nodes in the tree, insert them at the end of the tree\n  if (!childrenHelper.reachedEnd) {\n    const remainingChildren = childrenHelper.remaining()\n\n    const leavesToInsert = childrenHelper.toChunkLeaves(\n      remainingChildren,\n      childrenHelper.pointerIndex\n    )\n\n    // Move the pointer back to the final leaf in the tree, or the start of the\n    // tree if the tree is currently empty\n    chunkTreeHelper.returnToPreviousLeaf()\n\n    chunkTreeHelper.insertAfter(leavesToInsert)\n\n    remainingChildren.forEach((node, relativeIndex) => {\n      onInsert?.(node, childrenHelper.pointerIndex + relativeIndex)\n    })\n  }\n\n  chunkTree.movedNodeKeys.clear()\n}\n","import { Ancestor, Editor } from 'slate'\nimport { Key } from 'slate-dom'\nimport { ChunkTree } from './types'\nimport { ReconcileOptions, reconcileChildren } from './reconcile-children'\nimport { ReactEditor } from '../plugin/react-editor'\n\nexport const KEY_TO_CHUNK_TREE = new WeakMap<Key, ChunkTree>()\n\n/**\n * Get or create the chunk tree for a Slate node\n *\n * If the reconcile option is provided, the chunk tree will be updated to\n * match the current children of the node. The children are chunked\n * automatically using the given chunk size.\n */\nexport const getChunkTreeForNode = (\n  editor: Editor,\n  node: Ancestor,\n  // istanbul ignore next\n  options: {\n    reconcile?: Omit<ReconcileOptions, 'chunkTree' | 'children'> | false\n  } = {}\n) => {\n  const key = ReactEditor.findKey(editor, node)\n  let chunkTree = KEY_TO_CHUNK_TREE.get(key)\n\n  if (!chunkTree) {\n    chunkTree = {\n      type: 'root',\n      movedNodeKeys: new Set(),\n      modifiedChunks: new Set(),\n      children: [],\n    }\n\n    KEY_TO_CHUNK_TREE.set(key, chunkTree)\n  }\n\n  if (options.reconcile) {\n    reconcileChildren(editor, {\n      chunkTree,\n      children: node.children,\n      ...options.reconcile,\n    })\n  }\n\n  return chunkTree\n}\n","import React, { Fragment } from 'react'\nimport { Element } from 'slate'\nimport { Key } from 'slate-dom'\nimport { RenderChunkProps } from './editable'\nimport {\n  Chunk as TChunk,\n  ChunkAncestor as TChunkAncestor,\n  ChunkTree as TChunkTree,\n} from '../chunking'\n\nconst defaultRenderChunk = ({ children }: RenderChunkProps) => children\n\nconst ChunkAncestor = <C extends TChunkAncestor>(props: {\n  root: TChunkTree\n  ancestor: C\n  renderElement: (node: Element, index: number, key: Key) => JSX.Element\n  renderChunk?: (props: RenderChunkProps) => JSX.Element\n}) => {\n  const {\n    root,\n    ancestor,\n    renderElement,\n    renderChunk = defaultRenderChunk,\n  } = props\n\n  return ancestor.children.map(chunkNode => {\n    if (chunkNode.type === 'chunk') {\n      const key = chunkNode.key.id\n\n      const renderedChunk = renderChunk({\n        highest: ancestor === root,\n        lowest: chunkNode.children.some(c => c.type === 'leaf'),\n        attributes: { 'data-slate-chunk': true },\n        children: (\n          <MemoizedChunk\n            root={root}\n            ancestor={chunkNode}\n            renderElement={renderElement}\n            renderChunk={renderChunk}\n          />\n        ),\n      })\n\n      return <Fragment key={key}>{renderedChunk}</Fragment>\n    }\n\n    // Only blocks containing no inlines are chunked\n    const element = chunkNode.node as Element\n\n    return renderElement(element, chunkNode.index, chunkNode.key)\n  })\n}\n\nconst ChunkTree = ChunkAncestor<TChunkTree>\n\nconst MemoizedChunk = React.memo(\n  ChunkAncestor<TChunk>,\n  (prev, next) =>\n    prev.root === next.root &&\n    prev.renderElement === next.renderElement &&\n    prev.renderChunk === next.renderChunk &&\n    !next.root.modifiedChunks.has(next.ancestor)\n)\n\nexport default ChunkTree\n","import { createContext, useContext } from 'react'\nimport { Element } from 'slate'\n\nexport const ElementContext = createContext<Element | null>(null)\n\n/**\n * Get the current element.\n */\n\nexport const useElement = (): Element => {\n  const context = useContext(ElementContext)\n\n  if (!context) {\n    throw new Error(\n      'The `useElement` hook must be used inside `renderElement`.'\n    )\n  }\n\n  return context\n}\n\n/**\n * Get the current element, or return null if not inside `renderElement`.\n */\nexport const useElementIf = () => useContext(ElementContext)\n","import React, { useCallback, useRef } from 'react'\nimport { Ancestor, Editor, Element, DecoratedRange, Text } from 'slate'\nimport { Key, isElementDecorationsEqual } from 'slate-dom'\nimport {\n  RenderChunkProps,\n  RenderElementProps,\n  RenderLeafProps,\n  RenderPlaceholderProps,\n  RenderTextProps,\n} from '../components/editable'\n\nimport ElementComponent from '../components/element'\nimport TextComponent from '../components/text'\nimport { ReactEditor } from '../plugin/react-editor'\nimport {\n  IS_NODE_MAP_DIRTY,\n  NODE_TO_INDEX,\n  NODE_TO_PARENT,\n  splitDecorationsByChild,\n} from 'slate-dom'\nimport { useSlateStatic } from './use-slate-static'\nimport { getChunkTreeForNode } from '../chunking'\nimport ChunkTree from '../components/chunk-tree'\nimport { ElementContext } from './use-element'\n\n/**\n * Children.\n */\n\nconst useChildren = (props: {\n  decorations: DecoratedRange[]\n  node: Ancestor\n  renderElement?: (props: RenderElementProps) => JSX.Element\n  renderChunk?: (props: RenderChunkProps) => JSX.Element\n  renderPlaceholder: (props: RenderPlaceholderProps) => JSX.Element\n  renderText?: (props: RenderTextProps) => JSX.Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n}) => {\n  const {\n    decorations,\n    node,\n    renderElement,\n    renderChunk,\n    renderPlaceholder,\n    renderText,\n    renderLeaf,\n  } = props\n  const editor = useSlateStatic()\n  IS_NODE_MAP_DIRTY.set(editor as ReactEditor, false)\n\n  const isEditor = Editor.isEditor(node)\n  const isBlock = !isEditor && Element.isElement(node) && !editor.isInline(node)\n  const isLeafBlock = isBlock && Editor.hasInlines(editor, node)\n  const chunkSize = isLeafBlock ? null : editor.getChunkSize(node)\n  const chunking = !!chunkSize\n\n  const { decorationsByChild, childrenToRedecorate } = useDecorationsByChild(\n    editor,\n    node,\n    decorations\n  )\n\n  // Update the index and parent of each child.\n  // PERF: If chunking is enabled, this is done while traversing the chunk tree\n  // instead to eliminate unnecessary weak map operations.\n  if (!chunking) {\n    node.children.forEach((n, i) => {\n      NODE_TO_INDEX.set(n, i)\n      NODE_TO_PARENT.set(n, node)\n    })\n  }\n\n  const renderElementComponent = useCallback(\n    (n: Element, i: number, cachedKey?: Key) => {\n      const key = cachedKey ?? ReactEditor.findKey(editor, n)\n\n      return (\n        <ElementContext.Provider key={`provider-${key.id}`} value={n}>\n          <ElementComponent\n            decorations={decorationsByChild[i]}\n            element={n}\n            key={key.id}\n            renderElement={renderElement}\n            renderChunk={renderChunk}\n            renderPlaceholder={renderPlaceholder}\n            renderLeaf={renderLeaf}\n            renderText={renderText}\n          />\n        </ElementContext.Provider>\n      )\n    },\n    [\n      editor,\n      decorationsByChild,\n      renderElement,\n      renderChunk,\n      renderPlaceholder,\n      renderLeaf,\n      renderText,\n    ]\n  )\n\n  const renderTextComponent = (n: Text, i: number) => {\n    const key = ReactEditor.findKey(editor, n)\n\n    return (\n      <TextComponent\n        decorations={decorationsByChild[i]}\n        key={key.id}\n        isLast={i === node.children.length - 1}\n        parent={node}\n        renderPlaceholder={renderPlaceholder}\n        renderLeaf={renderLeaf}\n        renderText={renderText}\n        text={n}\n      />\n    )\n  }\n\n  if (!chunking) {\n    return node.children.map((n, i) =>\n      Text.isText(n) ? renderTextComponent(n, i) : renderElementComponent(n, i)\n    )\n  }\n\n  const chunkTree = getChunkTreeForNode(editor, node, {\n    reconcile: {\n      chunkSize,\n      rerenderChildren: childrenToRedecorate,\n      onInsert: (n, i) => {\n        NODE_TO_INDEX.set(n, i)\n        NODE_TO_PARENT.set(n, node)\n      },\n      onUpdate: (n, i) => {\n        NODE_TO_INDEX.set(n, i)\n        NODE_TO_PARENT.set(n, node)\n      },\n      onIndexChange: (n, i) => {\n        NODE_TO_INDEX.set(n, i)\n      },\n    },\n  })\n\n  return (\n    <ChunkTree\n      root={chunkTree}\n      ancestor={chunkTree}\n      renderElement={renderElementComponent}\n      renderChunk={renderChunk}\n    />\n  )\n}\n\nconst useDecorationsByChild = (\n  editor: Editor,\n  node: Ancestor,\n  decorations: DecoratedRange[]\n) => {\n  const decorationsByChild = splitDecorationsByChild(editor, node, decorations)\n\n  // The value we return is a mutable array of `DecoratedRange[]` arrays. This\n  // lets us avoid passing an immutable array of decorations for each child into\n  // `ChunkTree` using props. Each `DecoratedRange[]` is only updated if the\n  // decorations at that index have changed, which speeds up the equality check\n  // for the `decorations` prop in the memoized `Element` and `Text` components.\n  const mutableDecorationsByChild = useRef(decorationsByChild).current\n\n  // Track the list of child indices whose decorations have changed, so that we\n  // can tell the chunk tree to re-render these children.\n  const childrenToRedecorate: number[] = []\n\n  // Resize the mutable array to match the latest result\n  mutableDecorationsByChild.length = decorationsByChild.length\n\n  for (let i = 0; i < decorationsByChild.length; i++) {\n    const decorations = decorationsByChild[i]\n\n    const previousDecorations: DecoratedRange[] | null =\n      mutableDecorationsByChild[i] ?? null\n\n    if (!isElementDecorationsEqual(previousDecorations, decorations)) {\n      mutableDecorationsByChild[i] = decorations\n      childrenToRedecorate.push(i)\n    }\n  }\n\n  return { decorationsByChild: mutableDecorationsByChild, childrenToRedecorate }\n}\n\nexport default useChildren\n","import { createContext, useContext } from 'react'\n\n/**\n * A React context for sharing the `readOnly` state of the editor.\n */\n\nexport const ReadOnlyContext = createContext(false)\n\n/**\n * Get the current `readOnly` state of the editor.\n */\n\nexport const useReadOnly = (): boolean => {\n  return useContext(ReadOnlyContext)\n}\n","import { createContext, useCallback, useContext, useMemo, useRef } from 'react'\nimport { Editor } from 'slate'\nimport { useIsomorphicLayoutEffect } from './use-isomorphic-layout-effect'\nimport { useSlateStatic } from './use-slate-static'\nimport { useGenericSelector } from './use-generic-selector'\n\ntype Callback = () => void\n\nexport interface SlateSelectorOptions {\n  /**\n   * If true, defer calling the selector function until after `Editable` has\n   * finished rendering. This ensures that `ReactEditor.findPath` won't return\n   * an outdated path if called inside the selector.\n   */\n  deferred?: boolean\n}\n\n/**\n * A React context for sharing the editor selector context in a way to control\n * re-renders.\n */\n\nexport const SlateSelectorContext = createContext<{\n  addEventListener: (\n    callback: Callback,\n    options?: SlateSelectorOptions\n  ) => () => void\n  flushDeferred: () => void\n}>({} as any)\n\nconst refEquality = (a: any, b: any) => a === b\n\n/**\n * Use redux style selectors to prevent re-rendering on every keystroke.\n *\n * Bear in mind re-rendering can only prevented if the returned value is a value\n * type or for reference types (e.g. objects and arrays) add a custom equality\n * function.\n *\n * If `selector` is memoized using `useCallback`, then it will only be called\n * when it or the editor state changes. Otherwise, `selector` will be called\n * every time the component renders.\n *\n * @example\n * const isSelectionActive = useSlateSelector(editor => Boolean(editor.selection))\n */\n\nexport function useSlateSelector<T>(\n  selector: (editor: Editor) => T,\n  equalityFn: (a: T | null, b: T) => boolean = refEquality,\n  { deferred }: SlateSelectorOptions = {}\n): T {\n  const context = useContext(SlateSelectorContext)\n  if (!context) {\n    throw new Error(\n      `The \\`useSlateSelector\\` hook must be used inside the <Slate> component's context.`\n    )\n  }\n  const { addEventListener } = context\n\n  const editor = useSlateStatic()\n  const genericSelector = useCallback(\n    () => selector(editor),\n    [editor, selector]\n  )\n  const [selectedState, update] = useGenericSelector(\n    genericSelector,\n    equalityFn\n  )\n\n  useIsomorphicLayoutEffect(() => {\n    const unsubscribe = addEventListener(update, { deferred })\n    update()\n    return unsubscribe\n  }, [addEventListener, update, deferred])\n\n  return selectedState\n}\n\n/**\n * Create selector context with editor updating on every editor change\n */\nexport function useSelectorContext() {\n  const eventListeners = useRef(new Set<Callback>())\n  const deferredEventListeners = useRef(new Set<Callback>())\n\n  const onChange = useCallback(() => {\n    eventListeners.current.forEach(listener => listener())\n  }, [])\n\n  const flushDeferred = useCallback(() => {\n    deferredEventListeners.current.forEach(listener => listener())\n    deferredEventListeners.current.clear()\n  }, [])\n\n  const addEventListener = useCallback(\n    (\n      callbackProp: Callback,\n      { deferred = false }: SlateSelectorOptions = {}\n    ) => {\n      const callback = deferred\n        ? () => deferredEventListeners.current.add(callbackProp)\n        : callbackProp\n\n      eventListeners.current.add(callback)\n\n      return () => {\n        eventListeners.current.delete(callback)\n      }\n    },\n    []\n  )\n\n  const selectorContext = useMemo(\n    () => ({\n      addEventListener,\n      flushDeferred,\n    }),\n    [addEventListener, flushDeferred]\n  )\n\n  return { selectorContext, onChange }\n}\n\nexport function useFlushDeferredSelectorsOnRender() {\n  const { flushDeferred } = useContext(SlateSelectorContext)\n  useIsomorphicLayoutEffect(flushDeferred)\n}\n","import { MutableRefObject, useContext, useMemo, useReducer } from 'react'\nimport { Editor } from 'slate'\nimport { SlateSelectorContext } from './use-slate-selector'\nimport { useSlateStatic } from './use-slate-static'\nimport { useIsomorphicLayoutEffect } from './use-isomorphic-layout-effect'\n\n/**\n * Get the current editor object and re-render whenever it changes.\n */\n\nexport const useSlate = (): Editor => {\n  const { addEventListener } = useContext(SlateSelectorContext)\n  const [, forceRender] = useReducer(s => s + 1, 0)\n\n  if (!addEventListener) {\n    throw new Error(\n      `The \\`useSlate\\` hook must be used inside the <Slate> component's context.`\n    )\n  }\n\n  useIsomorphicLayoutEffect(\n    () => addEventListener(forceRender),\n    [addEventListener]\n  )\n\n  return useSlateStatic()\n}\n\nconst EDITOR_TO_V = new WeakMap<Editor, MutableRefObject<number>>()\n\nconst getEditorVersionRef = (editor: Editor): MutableRefObject<number> => {\n  let v = EDITOR_TO_V.get(editor)\n\n  if (v) {\n    return v\n  }\n\n  v = { current: 0 }\n  EDITOR_TO_V.set(editor, v)\n\n  // Register the `onChange` handler exactly once per editor\n  const { onChange } = editor\n\n  editor.onChange = options => {\n    v!.current++\n    onChange(options)\n  }\n\n  return v\n}\n\n/**\n * Get the current editor object and its version, which increments on every\n * change.\n *\n * @deprecated The `v` counter is no longer used except for this hook, and may\n * be removed in a future version.\n */\n\nexport const useSlateWithV = (): { editor: Editor; v: number } => {\n  const editor = useSlate()\n  const vRef = useMemo(() => getEditorVersionRef(editor), [editor])\n  return { editor, v: vRef.current }\n}\n","import { useCallback, useEffect, useRef } from 'react'\nimport { ReactEditor } from '../plugin/react-editor'\nimport { useSlateStatic } from './use-slate-static'\n\nexport function useTrackUserInput() {\n  const editor = useSlateStatic()\n\n  const receivedUserInput = useRef<boolean>(false)\n  const animationFrameIdRef = useRef<number>(0)\n\n  const onUserInput = useCallback(() => {\n    if (receivedUserInput.current) {\n      return\n    }\n\n    receivedUserInput.current = true\n\n    const window = ReactEditor.getWindow(editor)\n    window.cancelAnimationFrame(animationFrameIdRef.current)\n\n    animationFrameIdRef.current = window.requestAnimationFrame(() => {\n      receivedUserInput.current = false\n    })\n  }, [editor])\n\n  useEffect(() => () => cancelAnimationFrame(animationFrameIdRef.current), [])\n\n  return {\n    receivedUserInput,\n    onUserInput,\n  }\n}\n","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nmodule.exports = _assertThisInitialized, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _setPrototypeOf(o, p);\n}\nmodule.exports = _setPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\nmodule.exports = _inherits, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}\nmodule.exports = _possibleConstructorReturn, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _getPrototypeOf(o);\n}\nmodule.exports = _getPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import { RefObject } from 'react'\nimport { ReactEditor } from '../../plugin/react-editor'\nimport { isTrackedMutation } from 'slate-dom'\n\nexport type RestoreDOMManager = {\n  registerMutations: (mutations: MutationRecord[]) => void\n  restoreDOM: () => void\n  clear: () => void\n}\n\nexport const createRestoreDomManager = (\n  editor: ReactEditor,\n  receivedUserInput: RefObject<boolean>\n): RestoreDOMManager => {\n  let bufferedMutations: MutationRecord[] = []\n\n  const clear = () => {\n    bufferedMutations = []\n  }\n\n  const registerMutations = (mutations: MutationRecord[]) => {\n    if (!receivedUserInput.current) {\n      return\n    }\n\n    const trackedMutations = mutations.filter(mutation =>\n      isTrackedMutation(editor, mutation, mutations)\n    )\n\n    bufferedMutations.push(...trackedMutations)\n  }\n\n  function restoreDOM() {\n    if (bufferedMutations.length > 0) {\n      bufferedMutations.reverse().forEach(mutation => {\n        if (mutation.type === 'characterData') {\n          // We don't want to restore the DOM for characterData mutations\n          // because this interrupts the composition.\n          return\n        }\n\n        mutation.removedNodes.forEach(node => {\n          mutation.target.insertBefore(node, mutation.nextSibling)\n        })\n\n        mutation.addedNodes.forEach(node => {\n          mutation.target.removeChild(node)\n        })\n      })\n\n      // Clear buffered mutations to ensure we don't undo them twice\n      clear()\n    }\n  }\n\n  return {\n    registerMutations,\n    restoreDOM,\n    clear,\n  }\n}\n","import React, {\n  Component,\n  ComponentType,\n  ContextType,\n  ReactNode,\n  RefObject,\n} from 'react'\nimport { EditorContext } from '../../hooks/use-slate-static'\nimport { IS_ANDROID } from 'slate-dom'\nimport {\n  createRestoreDomManager,\n  RestoreDOMManager,\n} from './restore-dom-manager'\n\nconst MUTATION_OBSERVER_CONFIG: MutationObserverInit = {\n  subtree: true,\n  childList: true,\n  characterData: true,\n  characterDataOldValue: true,\n}\n\ntype RestoreDOMProps = {\n  children?: ReactNode\n  receivedUserInput: RefObject<boolean>\n  node: RefObject<HTMLDivElement>\n}\n\n// We have to use a class component here since we rely on `getSnapshotBeforeUpdate` which has no FC equivalent\n// to run code synchronously immediately before react commits the component update to the DOM.\nclass RestoreDOMComponent extends Component<RestoreDOMProps> {\n  static contextType = EditorContext\n  context: ContextType<typeof EditorContext> = null\n\n  private manager: RestoreDOMManager | null = null\n  private mutationObserver: MutationObserver | null = null\n\n  observe() {\n    const { node } = this.props\n    if (!node.current) {\n      throw new Error('Failed to attach MutationObserver, `node` is undefined')\n    }\n\n    this.mutationObserver?.observe(node.current, MUTATION_OBSERVER_CONFIG)\n  }\n\n  componentDidMount() {\n    const { receivedUserInput } = this.props\n    const editor = this.context!\n\n    this.manager = createRestoreDomManager(editor, receivedUserInput)\n    this.mutationObserver = new MutationObserver(this.manager.registerMutations)\n\n    this.observe()\n  }\n\n  getSnapshotBeforeUpdate() {\n    const pendingMutations = this.mutationObserver?.takeRecords()\n    if (pendingMutations?.length) {\n      this.manager?.registerMutations(pendingMutations)\n    }\n\n    this.mutationObserver?.disconnect()\n    this.manager?.restoreDOM()\n\n    return null\n  }\n\n  componentDidUpdate() {\n    this.manager?.clear()\n    this.observe()\n  }\n\n  componentWillUnmount() {\n    this.mutationObserver?.disconnect()\n  }\n\n  render() {\n    return this.props.children\n  }\n}\n\nexport const RestoreDOM: ComponentType<RestoreDOMProps> = IS_ANDROID\n  ? RestoreDOMComponent\n  : ({ children }) => <>{children}</>\n","import { createContext, useContext } from 'react'\n\n/**\n * A React context for sharing the `composing` state of the editor.\n */\n\nexport const ComposingContext = createContext(false)\n\n/**\n * Get the current `composing` state of the editor.\n */\n\nexport const useComposing = (): boolean => {\n  return useContext(ComposingContext)\n}\n","import getDirection from 'direction'\nimport debounce from 'lodash/debounce'\nimport throttle from 'lodash/throttle'\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useReducer,\n  useRef,\n  useState,\n  forwardRef,\n  ForwardedRef,\n} from 'react'\nimport { JSX } from 'react'\nimport scrollIntoView from 'scroll-into-view-if-needed'\nimport {\n  Editor,\n  Element,\n  Node,\n  NodeEntry,\n  Path,\n  Range,\n  Text,\n  Transforms,\n  DecoratedRange,\n  LeafPosition,\n} from 'slate'\nimport { useAndroidInputManager } from '../hooks/android-input-manager/use-android-input-manager'\nimport useChildren from '../hooks/use-children'\nimport { DecorateContext, useDecorateContext } from '../hooks/use-decorations'\nimport { useIsomorphicLayoutEffect } from '../hooks/use-isomorphic-layout-effect'\nimport { ReadOnlyContext } from '../hooks/use-read-only'\nimport { useSlate } from '../hooks/use-slate'\nimport { useTrackUserInput } from '../hooks/use-track-user-input'\nimport { ReactEditor } from '../plugin/react-editor'\nimport { TRIPLE_CLICK } from 'slate-dom'\nimport {\n  DOMElement,\n  DOMRange,\n  DOMText,\n  getActiveElement,\n  getDefaultView,\n  getSelection,\n  isDOMElement,\n  isDOMNode,\n  isPlainTextOnlyPaste,\n} from 'slate-dom'\nimport {\n  CAN_USE_DOM,\n  HAS_BEFORE_INPUT_SUPPORT,\n  IS_ANDROID,\n  IS_CHROME,\n  IS_FIREFOX,\n  IS_FIREFOX_LEGACY,\n  IS_IOS,\n  IS_WEBKIT,\n  IS_UC_MOBILE,\n  IS_WECHATBROWSER,\n} from 'slate-dom'\nimport { Hotkeys } from 'slate-dom'\nimport {\n  IS_NODE_MAP_DIRTY,\n  EDITOR_TO_ELEMENT,\n  EDITOR_TO_FORCE_RENDER,\n  EDITOR_TO_PENDING_INSERTION_MARKS,\n  EDITOR_TO_USER_MARKS,\n  EDITOR_TO_USER_SELECTION,\n  EDITOR_TO_WINDOW,\n  ELEMENT_TO_NODE,\n  IS_COMPOSING,\n  IS_FOCUSED,\n  IS_READ_ONLY,\n  MARK_PLACEHOLDER_SYMBOL,\n  NODE_TO_ELEMENT,\n  PLACEHOLDER_SYMBOL,\n} from 'slate-dom'\nimport { RestoreDOM } from './restore-dom/restore-dom'\nimport { AndroidInputManager } from '../hooks/android-input-manager/android-input-manager'\nimport { ComposingContext } from '../hooks/use-composing'\nimport { useFlushDeferredSelectorsOnRender } from '../hooks/use-slate-selector'\n\ntype DeferredOperation = () => void\n\nconst Children = (props: Parameters<typeof useChildren>[0]) => (\n  <React.Fragment>{useChildren(props)}</React.Fragment>\n)\n\n/**\n * `RenderElementProps` are passed to the `renderElement` handler.\n */\n\nexport interface RenderElementProps {\n  children: any\n  element: Element\n  attributes: {\n    'data-slate-node': 'element'\n    'data-slate-inline'?: true\n    'data-slate-void'?: true\n    dir?: 'rtl'\n    ref: any\n  }\n}\n\n/**\n * `RenderChunkProps` are passed to the `renderChunk` handler\n */\nexport interface RenderChunkProps {\n  highest: boolean\n  lowest: boolean\n  children: any\n  attributes: {\n    'data-slate-chunk': true\n  }\n}\n\n/**\n * `RenderLeafProps` are passed to the `renderLeaf` handler.\n */\n\nexport interface RenderLeafProps {\n  children: any\n  /**\n   * The leaf node with any applied decorations.\n   * If no decorations are applied, it will be identical to the `text` property.\n   */\n  leaf: Text\n  text: Text\n  attributes: {\n    'data-slate-leaf': true\n  }\n  /**\n   * The position of the leaf within the Text node, only present when the text node is split by decorations.\n   */\n  leafPosition?: LeafPosition\n}\n\n/**\n * `RenderTextProps` are passed to the `renderText` handler.\n */\nexport interface RenderTextProps {\n  text: Text\n  children: any\n  attributes: {\n    'data-slate-node': 'text'\n    ref: any\n  }\n}\n\n/**\n * `EditableProps` are passed to the `<Editable>` component.\n */\n\nexport type EditableProps = {\n  decorate?: (entry: NodeEntry) => DecoratedRange[]\n  onDOMBeforeInput?: (event: InputEvent) => void\n  placeholder?: string\n  readOnly?: boolean\n  role?: string\n  style?: React.CSSProperties\n  renderElement?: (props: RenderElementProps) => JSX.Element\n  renderChunk?: (props: RenderChunkProps) => JSX.Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n  renderText?: (props: RenderTextProps) => JSX.Element\n  renderPlaceholder?: (props: RenderPlaceholderProps) => JSX.Element\n  scrollSelectionIntoView?: (editor: ReactEditor, domRange: DOMRange) => void\n  as?: React.ElementType\n  disableDefaultStyles?: boolean\n} & React.TextareaHTMLAttributes<HTMLDivElement>\n\n/**\n * Editable.\n */\n\nexport const Editable = forwardRef(\n  (props: EditableProps, forwardedRef: ForwardedRef<HTMLDivElement>) => {\n    const defaultRenderPlaceholder = useCallback(\n      (props: RenderPlaceholderProps) => <DefaultPlaceholder {...props} />,\n      []\n    )\n    const {\n      autoFocus,\n      decorate = defaultDecorate,\n      onDOMBeforeInput: propsOnDOMBeforeInput,\n      placeholder,\n      readOnly = false,\n      renderElement,\n      renderChunk,\n      renderLeaf,\n      renderText,\n      renderPlaceholder = defaultRenderPlaceholder,\n      scrollSelectionIntoView = defaultScrollSelectionIntoView,\n      style: userStyle = {},\n      as: Component = 'div',\n      disableDefaultStyles = false,\n      ...attributes\n    } = props\n    const editor = useSlate()\n    // Rerender editor when composition status changed\n    const [isComposing, setIsComposing] = useState(false)\n    const ref = useRef<HTMLDivElement | null>(null)\n    const deferredOperations = useRef<DeferredOperation[]>([])\n    const [placeholderHeight, setPlaceholderHeight] = useState<\n      number | undefined\n    >()\n    const processing = useRef(false)\n\n    const { onUserInput, receivedUserInput } = useTrackUserInput()\n\n    const [, forceRender] = useReducer(s => s + 1, 0)\n    EDITOR_TO_FORCE_RENDER.set(editor, forceRender)\n\n    // Update internal state on each render.\n    IS_READ_ONLY.set(editor, readOnly)\n\n    // Keep track of some state for the event handler logic.\n    const state = useMemo(\n      () => ({\n        isDraggingInternally: false,\n        isUpdatingSelection: false,\n        latestElement: null as DOMElement | null,\n        hasMarkPlaceholder: false,\n      }),\n      []\n    )\n\n    // The autoFocus TextareaHTMLAttribute doesn't do anything on a div, so it\n    // needs to be manually focused.\n    //\n    // If this stops working in Firefox, make sure nothing is causing this\n    // component to re-render during the initial mount. If the DOM selection is\n    // set by `useIsomorphicLayoutEffect` before `onDOMSelectionChange` updates\n    // `editor.selection`, the DOM selection can be removed accidentally.\n    useEffect(() => {\n      if (ref.current && autoFocus) {\n        ref.current.focus()\n      }\n    }, [autoFocus])\n\n    /**\n     * The AndroidInputManager object has a cyclical dependency on onDOMSelectionChange\n     *\n     * It is defined as a reference to simplify hook dependencies and clarify that\n     * it needs to be initialized.\n     */\n    const androidInputManagerRef = useRef<\n      AndroidInputManager | null | undefined\n    >()\n\n    // Listen on the native `selectionchange` event to be able to update any time\n    // the selection changes. This is required because React's `onSelect` is leaky\n    // and non-standard so it doesn't fire until after a selection has been\n    // released. This causes issues in situations where another change happens\n    // while a selection is being dragged.\n    const onDOMSelectionChange = useMemo(\n      () =>\n        throttle(() => {\n          if (IS_NODE_MAP_DIRTY.get(editor)) {\n            onDOMSelectionChange()\n            return\n          }\n\n          const el = ReactEditor.toDOMNode(editor, editor)\n          const root = el.getRootNode()\n\n          if (!processing.current && IS_WEBKIT && root instanceof ShadowRoot) {\n            processing.current = true\n\n            const active = getActiveElement()\n\n            if (active) {\n              document.execCommand('indent')\n            } else {\n              Transforms.deselect(editor)\n            }\n\n            processing.current = false\n            return\n          }\n\n          const androidInputManager = androidInputManagerRef.current\n          if (\n            (IS_ANDROID || !ReactEditor.isComposing(editor)) &&\n            (!state.isUpdatingSelection || androidInputManager?.isFlushing()) &&\n            !state.isDraggingInternally\n          ) {\n            const root = ReactEditor.findDocumentOrShadowRoot(editor)\n            const { activeElement } = root\n            const el = ReactEditor.toDOMNode(editor, editor)\n            const domSelection = getSelection(root)\n\n            if (activeElement === el) {\n              state.latestElement = activeElement\n              IS_FOCUSED.set(editor, true)\n            } else {\n              IS_FOCUSED.delete(editor)\n            }\n\n            if (!domSelection) {\n              return Transforms.deselect(editor)\n            }\n\n            const { anchorNode, focusNode } = domSelection\n\n            const anchorNodeSelectable =\n              ReactEditor.hasEditableTarget(editor, anchorNode) ||\n              ReactEditor.isTargetInsideNonReadonlyVoid(editor, anchorNode)\n\n            const focusNodeInEditor = ReactEditor.hasTarget(editor, focusNode)\n\n            if (anchorNodeSelectable && focusNodeInEditor) {\n              const range = ReactEditor.toSlateRange(editor, domSelection, {\n                exactMatch: false,\n                suppressThrow: true,\n              })\n\n              if (range) {\n                if (\n                  !ReactEditor.isComposing(editor) &&\n                  !androidInputManager?.hasPendingChanges() &&\n                  !androidInputManager?.isFlushing()\n                ) {\n                  Transforms.select(editor, range)\n                } else {\n                  androidInputManager?.handleUserSelect(range)\n                }\n              }\n            }\n\n            // Deselect the editor if the dom selection is not selectable in readonly mode\n            if (readOnly && (!anchorNodeSelectable || !focusNodeInEditor)) {\n              Transforms.deselect(editor)\n            }\n          }\n        }, 100),\n      [editor, readOnly, state]\n    )\n\n    const scheduleOnDOMSelectionChange = useMemo(\n      () => debounce(onDOMSelectionChange, 0),\n      [onDOMSelectionChange]\n    )\n\n    androidInputManagerRef.current = useAndroidInputManager({\n      node: ref,\n      onDOMSelectionChange,\n      scheduleOnDOMSelectionChange,\n    })\n\n    useIsomorphicLayoutEffect(() => {\n      // Update element-related weak maps with the DOM element ref.\n      let window\n      if (ref.current && (window = getDefaultView(ref.current))) {\n        EDITOR_TO_WINDOW.set(editor, window)\n        EDITOR_TO_ELEMENT.set(editor, ref.current)\n        NODE_TO_ELEMENT.set(editor, ref.current)\n        ELEMENT_TO_NODE.set(ref.current, editor)\n      } else {\n        NODE_TO_ELEMENT.delete(editor)\n      }\n\n      // Make sure the DOM selection state is in sync.\n      const { selection } = editor\n      const root = ReactEditor.findDocumentOrShadowRoot(editor)\n      const domSelection = getSelection(root)\n\n      if (\n        !domSelection ||\n        !ReactEditor.isFocused(editor) ||\n        androidInputManagerRef.current?.hasPendingAction()\n      ) {\n        return\n      }\n\n      const setDomSelection = (forceChange?: boolean) => {\n        const hasDomSelection = domSelection.type !== 'None'\n\n        // If the DOM selection is properly unset, we're done.\n        if (!selection && !hasDomSelection) {\n          return\n        }\n\n        // Get anchorNode and focusNode\n        const focusNode = domSelection.focusNode\n        let anchorNode\n\n        // COMPAT: In firefox the normal selection way does not work\n        // (https://github.com/ianstormtaylor/slate/pull/5486#issue-1820720223)\n        if (IS_FIREFOX && domSelection.rangeCount > 1) {\n          const firstRange = domSelection.getRangeAt(0)\n          const lastRange = domSelection.getRangeAt(domSelection.rangeCount - 1)\n\n          // Right to left\n          if (firstRange.startContainer === focusNode) {\n            anchorNode = lastRange.endContainer\n          } else {\n            // Left to right\n            anchorNode = firstRange.startContainer\n          }\n        } else {\n          anchorNode = domSelection.anchorNode\n        }\n\n        // verify that the dom selection is in the editor\n        const editorElement = EDITOR_TO_ELEMENT.get(editor)!\n        let hasDomSelectionInEditor = false\n        if (\n          editorElement.contains(anchorNode) &&\n          editorElement.contains(focusNode)\n        ) {\n          hasDomSelectionInEditor = true\n        }\n\n        // If the DOM selection is in the editor and the editor selection is already correct, we're done.\n        if (\n          hasDomSelection &&\n          hasDomSelectionInEditor &&\n          selection &&\n          !forceChange\n        ) {\n          const slateRange = ReactEditor.toSlateRange(editor, domSelection, {\n            exactMatch: true,\n\n            // domSelection is not necessarily a valid Slate range\n            // (e.g. when clicking on contentEditable:false element)\n            suppressThrow: true,\n          })\n\n          if (slateRange && Range.equals(slateRange, selection)) {\n            if (!state.hasMarkPlaceholder) {\n              return\n            }\n\n            // Ensure selection is inside the mark placeholder\n            if (\n              anchorNode?.parentElement?.hasAttribute(\n                'data-slate-mark-placeholder'\n              )\n            ) {\n              return\n            }\n          }\n        }\n\n        // when <Editable/> is being controlled through external value\n        // then its children might just change - DOM responds to it on its own\n        // but Slate's value is not being updated through any operation\n        // and thus it doesn't transform selection on its own\n        if (selection && !ReactEditor.hasRange(editor, selection)) {\n          editor.selection = ReactEditor.toSlateRange(editor, domSelection, {\n            exactMatch: false,\n            suppressThrow: true,\n          })\n          return\n        }\n\n        // Otherwise the DOM selection is out of sync, so update it.\n        state.isUpdatingSelection = true\n\n        let newDomRange: DOMRange | null = null\n\n        try {\n          newDomRange = selection && ReactEditor.toDOMRange(editor, selection)\n        } catch (e) {\n          // Ignore, dom and state might be out of sync\n        }\n\n        if (newDomRange) {\n          if (ReactEditor.isComposing(editor) && !IS_ANDROID) {\n            domSelection.collapseToEnd()\n          } else if (Range.isBackward(selection!)) {\n            domSelection.setBaseAndExtent(\n              newDomRange.endContainer,\n              newDomRange.endOffset,\n              newDomRange.startContainer,\n              newDomRange.startOffset\n            )\n          } else {\n            domSelection.setBaseAndExtent(\n              newDomRange.startContainer,\n              newDomRange.startOffset,\n              newDomRange.endContainer,\n              newDomRange.endOffset\n            )\n          }\n          scrollSelectionIntoView(editor, newDomRange)\n        } else {\n          domSelection.removeAllRanges()\n        }\n\n        return newDomRange\n      }\n\n      // In firefox if there is more then 1 range and we call setDomSelection we remove the ability to select more cells in a table\n      if (domSelection.rangeCount <= 1) {\n        setDomSelection()\n      }\n\n      const ensureSelection =\n        androidInputManagerRef.current?.isFlushing() === 'action'\n\n      if (!IS_ANDROID || !ensureSelection) {\n        setTimeout(() => {\n          state.isUpdatingSelection = false\n        })\n        return\n      }\n\n      let timeoutId: ReturnType<typeof setTimeout> | null = null\n      const animationFrameId = requestAnimationFrame(() => {\n        if (ensureSelection) {\n          const ensureDomSelection = (forceChange?: boolean) => {\n            try {\n              const el = ReactEditor.toDOMNode(editor, editor)\n              el.focus()\n\n              setDomSelection(forceChange)\n            } catch (e) {\n              // Ignore, dom and state might be out of sync\n            }\n          }\n\n          // Compat: Android IMEs try to force their selection by manually re-applying it even after we set it.\n          // This essentially would make setting the slate selection during an update meaningless, so we force it\n          // again here. We can't only do it in the setTimeout after the animation frame since that would cause a\n          // visible flicker.\n          ensureDomSelection()\n\n          timeoutId = setTimeout(() => {\n            // COMPAT: While setting the selection in an animation frame visually correctly sets the selection,\n            // it doesn't update GBoards spellchecker state. We have to manually trigger a selection change after\n            // the animation frame to ensure it displays the correct state.\n            ensureDomSelection(true)\n            state.isUpdatingSelection = false\n          })\n        }\n      })\n\n      return () => {\n        cancelAnimationFrame(animationFrameId)\n        if (timeoutId) {\n          clearTimeout(timeoutId)\n        }\n      }\n    })\n\n    // Listen on the native `beforeinput` event to get real \"Level 2\" events. This\n    // is required because React's `beforeinput` is fake and never really attaches\n    // to the real event sadly. (2019/11/01)\n    // https://github.com/facebook/react/issues/11211\n    const onDOMBeforeInput = useCallback(\n      (event: InputEvent) => {\n        handleNativeHistoryEvents(editor, event)\n        const el = ReactEditor.toDOMNode(editor, editor)\n        const root = el.getRootNode()\n\n        if (processing?.current && IS_WEBKIT && root instanceof ShadowRoot) {\n          const ranges = event.getTargetRanges()\n          const range = ranges[0]\n\n          const newRange = new window.Range()\n\n          newRange.setStart(range.startContainer, range.startOffset)\n          newRange.setEnd(range.endContainer, range.endOffset)\n\n          // Translate the DOM Range into a Slate Range\n          const slateRange = ReactEditor.toSlateRange(editor, newRange, {\n            exactMatch: false,\n            suppressThrow: false,\n          })\n\n          Transforms.select(editor, slateRange)\n\n          event.preventDefault()\n          event.stopImmediatePropagation()\n          return\n        }\n        onUserInput()\n\n        if (\n          !readOnly &&\n          ReactEditor.hasEditableTarget(editor, event.target) &&\n          !isDOMEventHandled(event, propsOnDOMBeforeInput)\n        ) {\n          // COMPAT: BeforeInput events aren't cancelable on android, so we have to handle them differently using the android input manager.\n          if (androidInputManagerRef.current) {\n            return androidInputManagerRef.current.handleDOMBeforeInput(event)\n          }\n\n          // Some IMEs/Chrome extensions like e.g. Grammarly set the selection immediately before\n          // triggering a `beforeinput` expecting the change to be applied to the immediately before\n          // set selection.\n          scheduleOnDOMSelectionChange.flush()\n          onDOMSelectionChange.flush()\n\n          const { selection } = editor\n          const { inputType: type } = event\n          const data = (event as any).dataTransfer || event.data || undefined\n\n          const isCompositionChange =\n            type === 'insertCompositionText' || type === 'deleteCompositionText'\n\n          // COMPAT: use composition change events as a hint to where we should insert\n          // composition text if we aren't composing to work around https://github.com/ianstormtaylor/slate/issues/5038\n          if (isCompositionChange && ReactEditor.isComposing(editor)) {\n            return\n          }\n\n          let native = false\n          if (\n            type === 'insertText' &&\n            selection &&\n            Range.isCollapsed(selection) &&\n            // Only use native character insertion for single characters a-z or space for now.\n            // Long-press events (hold a + press 4 = ä) to choose a special character otherwise\n            // causes duplicate inserts.\n            event.data &&\n            event.data.length === 1 &&\n            /[a-z ]/i.test(event.data) &&\n            // Chrome has issues correctly editing the start of nodes: https://bugs.chromium.org/p/chromium/issues/detail?id=1249405\n            // When there is an inline element, e.g. a link, and you select\n            // right after it (the start of the next node).\n            selection.anchor.offset !== 0\n          ) {\n            native = true\n\n            // Skip native if there are marks, as\n            // `insertText` will insert a node, not just text.\n            if (editor.marks) {\n              native = false\n            }\n\n            // If the NODE_MAP is dirty, we can't trust the selection anchor (eg ReactEditor.toDOMPoint)\n            if (!IS_NODE_MAP_DIRTY.get(editor)) {\n              // Chrome also has issues correctly editing the end of anchor elements: https://bugs.chromium.org/p/chromium/issues/detail?id=1259100\n              // Therefore we don't allow native events to insert text at the end of anchor nodes.\n              const { anchor } = selection\n\n              const [node, offset] = ReactEditor.toDOMPoint(editor, anchor)\n              const anchorNode = node.parentElement?.closest('a')\n\n              const window = ReactEditor.getWindow(editor)\n\n              if (\n                native &&\n                anchorNode &&\n                ReactEditor.hasDOMNode(editor, anchorNode)\n              ) {\n                // Find the last text node inside the anchor.\n                const lastText = window?.document\n                  .createTreeWalker(anchorNode, NodeFilter.SHOW_TEXT)\n                  .lastChild() as DOMText | null\n\n                if (\n                  lastText === node &&\n                  lastText.textContent?.length === offset\n                ) {\n                  native = false\n                }\n              }\n\n              // Chrome has issues with the presence of tab characters inside elements with whiteSpace = 'pre'\n              // causing abnormal insert behavior: https://bugs.chromium.org/p/chromium/issues/detail?id=1219139\n              if (\n                native &&\n                node.parentElement &&\n                window?.getComputedStyle(node.parentElement)?.whiteSpace ===\n                  'pre'\n              ) {\n                const block = Editor.above(editor, {\n                  at: anchor.path,\n                  match: n => Element.isElement(n) && Editor.isBlock(editor, n),\n                })\n\n                if (block && Node.string(block[0]).includes('\\t')) {\n                  native = false\n                }\n              }\n            }\n          }\n          // COMPAT: For the deleting forward/backward input types we don't want\n          // to change the selection because it is the range that will be deleted,\n          // and those commands determine that for themselves.\n          // If the NODE_MAP is dirty, we can't trust the selection anchor (eg ReactEditor.toDOMPoint via ReactEditor.toSlateRange)\n          if (\n            (!type.startsWith('delete') || type.startsWith('deleteBy')) &&\n            !IS_NODE_MAP_DIRTY.get(editor)\n          ) {\n            const [targetRange] = (event as any).getTargetRanges()\n\n            if (targetRange) {\n              const range = ReactEditor.toSlateRange(editor, targetRange, {\n                exactMatch: false,\n                suppressThrow: false,\n              })\n\n              if (!selection || !Range.equals(selection, range)) {\n                native = false\n\n                const selectionRef =\n                  !isCompositionChange &&\n                  editor.selection &&\n                  Editor.rangeRef(editor, editor.selection)\n\n                Transforms.select(editor, range)\n\n                if (selectionRef) {\n                  EDITOR_TO_USER_SELECTION.set(editor, selectionRef)\n                }\n              }\n            }\n          }\n\n          // Composition change types occur while a user is composing text and can't be\n          // cancelled. Let them through and wait for the composition to end.\n          if (isCompositionChange) {\n            return\n          }\n\n          if (!native) {\n            event.preventDefault()\n          }\n\n          // COMPAT: If the selection is expanded, even if the command seems like\n          // a delete forward/backward command it should delete the selection.\n          if (\n            selection &&\n            Range.isExpanded(selection) &&\n            type.startsWith('delete')\n          ) {\n            const direction = type.endsWith('Backward') ? 'backward' : 'forward'\n            Editor.deleteFragment(editor, { direction })\n            return\n          }\n\n          switch (type) {\n            case 'deleteByComposition':\n            case 'deleteByCut':\n            case 'deleteByDrag': {\n              Editor.deleteFragment(editor)\n              break\n            }\n\n            case 'deleteContent':\n            case 'deleteContentForward': {\n              Editor.deleteForward(editor)\n              break\n            }\n\n            case 'deleteContentBackward': {\n              Editor.deleteBackward(editor)\n              break\n            }\n\n            case 'deleteEntireSoftLine': {\n              Editor.deleteBackward(editor, { unit: 'line' })\n              Editor.deleteForward(editor, { unit: 'line' })\n              break\n            }\n\n            case 'deleteHardLineBackward': {\n              Editor.deleteBackward(editor, { unit: 'block' })\n              break\n            }\n\n            case 'deleteSoftLineBackward': {\n              Editor.deleteBackward(editor, { unit: 'line' })\n              break\n            }\n\n            case 'deleteHardLineForward': {\n              Editor.deleteForward(editor, { unit: 'block' })\n              break\n            }\n\n            case 'deleteSoftLineForward': {\n              Editor.deleteForward(editor, { unit: 'line' })\n              break\n            }\n\n            case 'deleteWordBackward': {\n              Editor.deleteBackward(editor, { unit: 'word' })\n              break\n            }\n\n            case 'deleteWordForward': {\n              Editor.deleteForward(editor, { unit: 'word' })\n              break\n            }\n\n            case 'insertLineBreak':\n              Editor.insertSoftBreak(editor)\n              break\n\n            case 'insertParagraph': {\n              Editor.insertBreak(editor)\n              break\n            }\n\n            case 'insertFromComposition':\n            case 'insertFromDrop':\n            case 'insertFromPaste':\n            case 'insertFromYank':\n            case 'insertReplacementText':\n            case 'insertText': {\n              if (type === 'insertFromComposition') {\n                // COMPAT: in Safari, `compositionend` is dispatched after the\n                // `beforeinput` for \"insertFromComposition\". But if we wait for it\n                // then we will abort because we're still composing and the selection\n                // won't be updated properly.\n                // https://www.w3.org/TR/input-events-2/\n                if (ReactEditor.isComposing(editor)) {\n                  setIsComposing(false)\n                  IS_COMPOSING.set(editor, false)\n                }\n              }\n\n              // use a weak comparison instead of 'instanceof' to allow\n              // programmatic access of paste events coming from external windows\n              // like cypress where cy.window does not work realibly\n              if (data?.constructor.name === 'DataTransfer') {\n                ReactEditor.insertData(editor, data)\n              } else if (typeof data === 'string') {\n                // Only insertText operations use the native functionality, for now.\n                // Potentially expand to single character deletes, as well.\n                if (native) {\n                  deferredOperations.current.push(() =>\n                    Editor.insertText(editor, data)\n                  )\n                } else {\n                  Editor.insertText(editor, data)\n                }\n              }\n\n              break\n            }\n          }\n\n          // Restore the actual user section if nothing manually set it.\n          const toRestore = EDITOR_TO_USER_SELECTION.get(editor)?.unref()\n          EDITOR_TO_USER_SELECTION.delete(editor)\n\n          if (\n            toRestore &&\n            (!editor.selection || !Range.equals(editor.selection, toRestore))\n          ) {\n            Transforms.select(editor, toRestore)\n          }\n        }\n      },\n      [\n        editor,\n        onDOMSelectionChange,\n        onUserInput,\n        propsOnDOMBeforeInput,\n        readOnly,\n        scheduleOnDOMSelectionChange,\n      ]\n    )\n\n    const callbackRef = useCallback(\n      (node: HTMLDivElement | null) => {\n        if (node == null) {\n          onDOMSelectionChange.cancel()\n          scheduleOnDOMSelectionChange.cancel()\n\n          EDITOR_TO_ELEMENT.delete(editor)\n          NODE_TO_ELEMENT.delete(editor)\n\n          if (ref.current && HAS_BEFORE_INPUT_SUPPORT) {\n            // @ts-ignore The `beforeinput` event isn't recognized.\n            ref.current.removeEventListener('beforeinput', onDOMBeforeInput)\n          }\n        } else {\n          // Attach a native DOM event handler for `beforeinput` events, because React's\n          // built-in `onBeforeInput` is actually a leaky polyfill that doesn't expose\n          // real `beforeinput` events sadly... (2019/11/04)\n          // https://github.com/facebook/react/issues/11211\n          if (HAS_BEFORE_INPUT_SUPPORT) {\n            // @ts-ignore The `beforeinput` event isn't recognized.\n            node.addEventListener('beforeinput', onDOMBeforeInput)\n          }\n        }\n\n        ref.current = node\n        if (typeof forwardedRef === 'function') {\n          forwardedRef(node)\n        } else if (forwardedRef) {\n          forwardedRef.current = node\n        }\n      },\n      [\n        onDOMSelectionChange,\n        scheduleOnDOMSelectionChange,\n        editor,\n        onDOMBeforeInput,\n        forwardedRef,\n      ]\n    )\n\n    useIsomorphicLayoutEffect(() => {\n      const window = ReactEditor.getWindow(editor)\n\n      // COMPAT: In Chrome, `selectionchange` events can fire when <input> and\n      // <textarea> elements are appended to the DOM, causing\n      // `editor.selection` to be overwritten in some circumstances.\n      // (2025/01/16) https://issues.chromium.org/issues/389368412\n      const onSelectionChange = ({ target }: Event) => {\n        const targetElement = target instanceof HTMLElement ? target : null\n        const targetTagName = targetElement?.tagName\n        if (targetTagName === 'INPUT' || targetTagName === 'TEXTAREA') {\n          return\n        }\n        scheduleOnDOMSelectionChange()\n      }\n\n      // Attach a native DOM event handler for `selectionchange`, because React's\n      // built-in `onSelect` handler doesn't fire for all selection changes. It's\n      // a leaky polyfill that only fires on keypresses or clicks. Instead, we\n      // want to fire for any change to the selection inside the editor.\n      // (2019/11/04) https://github.com/facebook/react/issues/5785\n      window.document.addEventListener('selectionchange', onSelectionChange)\n\n      // Listen for dragend and drop globally. In Firefox, if a drop handler\n      // initiates an operation that causes the originally dragged element to\n      // unmount, that element will not emit a dragend event. (2024/06/21)\n      const stoppedDragging = () => {\n        state.isDraggingInternally = false\n      }\n      window.document.addEventListener('dragend', stoppedDragging)\n      window.document.addEventListener('drop', stoppedDragging)\n\n      return () => {\n        window.document.removeEventListener(\n          'selectionchange',\n          onSelectionChange\n        )\n        window.document.removeEventListener('dragend', stoppedDragging)\n        window.document.removeEventListener('drop', stoppedDragging)\n      }\n    }, [scheduleOnDOMSelectionChange, state])\n\n    const decorations = decorate([editor, []])\n    const decorateContext = useDecorateContext(decorate)\n\n    const showPlaceholder =\n      placeholder &&\n      editor.children.length === 1 &&\n      Array.from(Node.texts(editor)).length === 1 &&\n      Node.string(editor) === '' &&\n      !isComposing\n\n    const placeHolderResizeHandler = useCallback(\n      (placeholderEl: HTMLElement | null) => {\n        if (placeholderEl && showPlaceholder) {\n          setPlaceholderHeight(placeholderEl.getBoundingClientRect()?.height)\n        } else {\n          setPlaceholderHeight(undefined)\n        }\n      },\n      [showPlaceholder]\n    )\n\n    if (showPlaceholder) {\n      const start = Editor.start(editor, [])\n      decorations.push({\n        [PLACEHOLDER_SYMBOL]: true,\n        placeholder,\n        onPlaceholderResize: placeHolderResizeHandler,\n        anchor: start,\n        focus: start,\n      })\n    }\n\n    const { marks } = editor\n    state.hasMarkPlaceholder = false\n\n    if (editor.selection && Range.isCollapsed(editor.selection) && marks) {\n      const { anchor } = editor.selection\n      const leaf = Node.leaf(editor, anchor.path)\n      const { text, ...rest } = leaf\n\n      // While marks isn't a 'complete' text, we can still use loose Text.equals\n      // here which only compares marks anyway.\n      if (!Text.equals(leaf, marks as Text, { loose: true })) {\n        state.hasMarkPlaceholder = true\n\n        const unset = Object.fromEntries(\n          Object.keys(rest).map(mark => [mark, null])\n        )\n\n        decorations.push({\n          [MARK_PLACEHOLDER_SYMBOL]: true,\n          ...unset,\n          ...marks,\n\n          anchor,\n          focus: anchor,\n        })\n      }\n    }\n\n    // Update EDITOR_TO_MARK_PLACEHOLDER_MARKS in setTimeout useEffect to ensure we don't set it\n    // before we receive the composition end event.\n    useEffect(() => {\n      setTimeout(() => {\n        const { selection } = editor\n        if (selection) {\n          const { anchor } = selection\n          const text = Node.leaf(editor, anchor.path)\n\n          // While marks isn't a 'complete' text, we can still use loose Text.equals\n          // here which only compares marks anyway.\n          if (marks && !Text.equals(text, marks as Text, { loose: true })) {\n            EDITOR_TO_PENDING_INSERTION_MARKS.set(editor, marks)\n            return\n          }\n        }\n\n        EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor)\n      })\n    })\n\n    useFlushDeferredSelectorsOnRender()\n\n    return (\n      <ReadOnlyContext.Provider value={readOnly}>\n        <ComposingContext.Provider value={isComposing}>\n          <DecorateContext.Provider value={decorateContext}>\n            <RestoreDOM node={ref} receivedUserInput={receivedUserInput}>\n              <Component\n                role={readOnly ? undefined : 'textbox'}\n                aria-multiline={readOnly ? undefined : true}\n                {...attributes}\n                // COMPAT: Certain browsers don't support the `beforeinput` event, so we'd\n                // have to use hacks to make these replacement-based features work.\n                // For SSR situations HAS_BEFORE_INPUT_SUPPORT is false and results in prop\n                // mismatch warning app moves to browser. Pass-through consumer props when\n                // not CAN_USE_DOM (SSR) and default to falsy value\n                spellCheck={\n                  HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM\n                    ? attributes.spellCheck\n                    : false\n                }\n                autoCorrect={\n                  HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM\n                    ? attributes.autoCorrect\n                    : 'false'\n                }\n                autoCapitalize={\n                  HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM\n                    ? attributes.autoCapitalize\n                    : 'false'\n                }\n                data-slate-editor\n                data-slate-node=\"value\"\n                // explicitly set this\n                contentEditable={!readOnly}\n                // in some cases, a decoration needs access to the range / selection to decorate a text node,\n                // then you will select the whole text node when you select part the of text\n                // this magic zIndex=\"-1\" will fix it\n                zindex={-1}\n                suppressContentEditableWarning\n                ref={callbackRef}\n                style={{\n                  ...(disableDefaultStyles\n                    ? {}\n                    : {\n                        // Allow positioning relative to the editable element.\n                        position: 'relative',\n                        // Preserve adjacent whitespace and new lines.\n                        whiteSpace: 'pre-wrap',\n                        // Allow words to break if they are too long.\n                        wordWrap: 'break-word',\n                        // Make the minimum height that of the placeholder.\n                        ...(placeholderHeight\n                          ? { minHeight: placeholderHeight }\n                          : {}),\n                      }),\n                  // Allow for passed-in styles to override anything.\n                  ...userStyle,\n                }}\n                onBeforeInput={useCallback(\n                  (event: React.FormEvent<HTMLDivElement>) => {\n                    // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n                    // fall back to React's leaky polyfill instead just for it. It\n                    // only works for the `insertText` input type.\n                    if (\n                      !HAS_BEFORE_INPUT_SUPPORT &&\n                      !readOnly &&\n                      !isEventHandled(event, attributes.onBeforeInput) &&\n                      ReactEditor.hasSelectableTarget(editor, event.target)\n                    ) {\n                      event.preventDefault()\n                      if (!ReactEditor.isComposing(editor)) {\n                        const text = (event as any).data as string\n                        Editor.insertText(editor, text)\n                      }\n                    }\n                  },\n                  [attributes.onBeforeInput, editor, readOnly]\n                )}\n                onInput={useCallback(\n                  (event: React.FormEvent<HTMLDivElement>) => {\n                    if (isEventHandled(event, attributes.onInput)) {\n                      return\n                    }\n\n                    if (androidInputManagerRef.current) {\n                      androidInputManagerRef.current.handleInput()\n                      return\n                    }\n\n                    // Flush native operations, as native events will have propogated\n                    // and we can correctly compare DOM text values in components\n                    // to stop rendering, so that browser functions like autocorrect\n                    // and spellcheck work as expected.\n                    for (const op of deferredOperations.current) {\n                      op()\n                    }\n                    deferredOperations.current = []\n\n                    // COMPAT: Since `beforeinput` doesn't fully `preventDefault`,\n                    // there's a chance that content might be placed in the browser's undo stack.\n                    // This means undo can be triggered even when the div is not focused,\n                    // and it only triggers the input event for the node. (2024/10/09)\n                    if (!ReactEditor.isFocused(editor)) {\n                      handleNativeHistoryEvents(\n                        editor,\n                        event.nativeEvent as InputEvent\n                      )\n                    }\n                  },\n                  [attributes.onInput, editor]\n                )}\n                onBlur={useCallback(\n                  (event: React.FocusEvent<HTMLDivElement>) => {\n                    if (\n                      readOnly ||\n                      state.isUpdatingSelection ||\n                      !ReactEditor.hasSelectableTarget(editor, event.target) ||\n                      isEventHandled(event, attributes.onBlur)\n                    ) {\n                      return\n                    }\n\n                    // COMPAT: If the current `activeElement` is still the previous\n                    // one, this is due to the window being blurred when the tab\n                    // itself becomes unfocused, so we want to abort early to allow to\n                    // editor to stay focused when the tab becomes focused again.\n                    const root = ReactEditor.findDocumentOrShadowRoot(editor)\n                    if (state.latestElement === root.activeElement) {\n                      return\n                    }\n\n                    const { relatedTarget } = event\n                    const el = ReactEditor.toDOMNode(editor, editor)\n\n                    // COMPAT: The event should be ignored if the focus is returning\n                    // to the editor from an embedded editable element (eg. an <input>\n                    // element inside a void node).\n                    if (relatedTarget === el) {\n                      return\n                    }\n\n                    // COMPAT: The event should be ignored if the focus is moving from\n                    // the editor to inside a void node's spacer element.\n                    if (\n                      isDOMElement(relatedTarget) &&\n                      relatedTarget.hasAttribute('data-slate-spacer')\n                    ) {\n                      return\n                    }\n\n                    // COMPAT: The event should be ignored if the focus is moving to a\n                    // non- editable section of an element that isn't a void node (eg.\n                    // a list item of the check list example).\n                    if (\n                      relatedTarget != null &&\n                      isDOMNode(relatedTarget) &&\n                      ReactEditor.hasDOMNode(editor, relatedTarget)\n                    ) {\n                      const node = ReactEditor.toSlateNode(\n                        editor,\n                        relatedTarget\n                      )\n\n                      if (Element.isElement(node) && !editor.isVoid(node)) {\n                        return\n                      }\n                    }\n\n                    // COMPAT: Safari doesn't always remove the selection even if the content-\n                    // editable element no longer has focus. Refer to:\n                    // https://stackoverflow.com/questions/12353247/force-contenteditable-div-to-stop-accepting-input-after-it-loses-focus-under-web\n                    if (IS_WEBKIT) {\n                      const domSelection = getSelection(root)\n                      domSelection?.removeAllRanges()\n                    }\n\n                    IS_FOCUSED.delete(editor)\n                  },\n                  [\n                    readOnly,\n                    state.isUpdatingSelection,\n                    state.latestElement,\n                    editor,\n                    attributes.onBlur,\n                  ]\n                )}\n                onClick={useCallback(\n                  (event: React.MouseEvent<HTMLDivElement>) => {\n                    if (\n                      ReactEditor.hasTarget(editor, event.target) &&\n                      !isEventHandled(event, attributes.onClick) &&\n                      isDOMNode(event.target)\n                    ) {\n                      const node = ReactEditor.toSlateNode(editor, event.target)\n                      const path = ReactEditor.findPath(editor, node)\n\n                      // At this time, the Slate document may be arbitrarily different,\n                      // because onClick handlers can change the document before we get here.\n                      // Therefore we must check that this path actually exists,\n                      // and that it still refers to the same node.\n                      if (\n                        !Editor.hasPath(editor, path) ||\n                        Node.get(editor, path) !== node\n                      ) {\n                        return\n                      }\n\n                      if (event.detail === TRIPLE_CLICK && path.length >= 1) {\n                        let blockPath = path\n                        if (\n                          !(\n                            Element.isElement(node) &&\n                            Editor.isBlock(editor, node)\n                          )\n                        ) {\n                          const block = Editor.above(editor, {\n                            match: n =>\n                              Element.isElement(n) && Editor.isBlock(editor, n),\n                            at: path,\n                          })\n\n                          blockPath = block?.[1] ?? path.slice(0, 1)\n                        }\n\n                        const range = Editor.range(editor, blockPath)\n                        Transforms.select(editor, range)\n                        return\n                      }\n\n                      if (readOnly) {\n                        return\n                      }\n\n                      const start = Editor.start(editor, path)\n                      const end = Editor.end(editor, path)\n                      const startVoid = Editor.void(editor, { at: start })\n                      const endVoid = Editor.void(editor, { at: end })\n\n                      if (\n                        startVoid &&\n                        endVoid &&\n                        Path.equals(startVoid[1], endVoid[1])\n                      ) {\n                        const range = Editor.range(editor, start)\n                        Transforms.select(editor, range)\n                      }\n                    }\n                  },\n                  [editor, attributes.onClick, readOnly]\n                )}\n                onCompositionEnd={useCallback(\n                  (event: React.CompositionEvent<HTMLDivElement>) => {\n                    if (ReactEditor.hasSelectableTarget(editor, event.target)) {\n                      if (ReactEditor.isComposing(editor)) {\n                        Promise.resolve().then(() => {\n                          setIsComposing(false)\n                          IS_COMPOSING.set(editor, false)\n                        })\n                      }\n\n                      androidInputManagerRef.current?.handleCompositionEnd(\n                        event\n                      )\n\n                      if (\n                        isEventHandled(event, attributes.onCompositionEnd) ||\n                        IS_ANDROID\n                      ) {\n                        return\n                      }\n\n                      // COMPAT: In Chrome, `beforeinput` events for compositions\n                      // aren't correct and never fire the \"insertFromComposition\"\n                      // type that we need. So instead, insert whenever a composition\n                      // ends since it will already have been committed to the DOM.\n                      if (\n                        !IS_WEBKIT &&\n                        !IS_FIREFOX_LEGACY &&\n                        !IS_IOS &&\n                        !IS_WECHATBROWSER &&\n                        !IS_UC_MOBILE &&\n                        event.data\n                      ) {\n                        const placeholderMarks =\n                          EDITOR_TO_PENDING_INSERTION_MARKS.get(editor)\n                        EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor)\n\n                        // Ensure we insert text with the marks the user was actually seeing\n                        if (placeholderMarks !== undefined) {\n                          EDITOR_TO_USER_MARKS.set(editor, editor.marks)\n                          editor.marks = placeholderMarks\n                        }\n\n                        Editor.insertText(editor, event.data)\n\n                        const userMarks = EDITOR_TO_USER_MARKS.get(editor)\n                        EDITOR_TO_USER_MARKS.delete(editor)\n                        if (userMarks !== undefined) {\n                          editor.marks = userMarks\n                        }\n                      }\n                    }\n                  },\n                  [attributes.onCompositionEnd, editor]\n                )}\n                onCompositionUpdate={useCallback(\n                  (event: React.CompositionEvent<HTMLDivElement>) => {\n                    if (\n                      ReactEditor.hasSelectableTarget(editor, event.target) &&\n                      !isEventHandled(event, attributes.onCompositionUpdate)\n                    ) {\n                      if (!ReactEditor.isComposing(editor)) {\n                        setIsComposing(true)\n                        IS_COMPOSING.set(editor, true)\n                      }\n                    }\n                  },\n                  [attributes.onCompositionUpdate, editor]\n                )}\n                onCompositionStart={useCallback(\n                  (event: React.CompositionEvent<HTMLDivElement>) => {\n                    if (ReactEditor.hasSelectableTarget(editor, event.target)) {\n                      androidInputManagerRef.current?.handleCompositionStart(\n                        event\n                      )\n\n                      if (\n                        isEventHandled(event, attributes.onCompositionStart) ||\n                        IS_ANDROID\n                      ) {\n                        return\n                      }\n\n                      setIsComposing(true)\n\n                      const { selection } = editor\n                      if (selection && Range.isExpanded(selection)) {\n                        Editor.deleteFragment(editor)\n                        return\n                      }\n                    }\n                  },\n                  [attributes.onCompositionStart, editor]\n                )}\n                onCopy={useCallback(\n                  (event: React.ClipboardEvent<HTMLDivElement>) => {\n                    if (\n                      ReactEditor.hasSelectableTarget(editor, event.target) &&\n                      !isEventHandled(event, attributes.onCopy) &&\n                      !isDOMEventTargetInput(event)\n                    ) {\n                      event.preventDefault()\n                      ReactEditor.setFragmentData(\n                        editor,\n                        event.clipboardData,\n                        'copy'\n                      )\n                    }\n                  },\n                  [attributes.onCopy, editor]\n                )}\n                onCut={useCallback(\n                  (event: React.ClipboardEvent<HTMLDivElement>) => {\n                    if (\n                      !readOnly &&\n                      ReactEditor.hasSelectableTarget(editor, event.target) &&\n                      !isEventHandled(event, attributes.onCut) &&\n                      !isDOMEventTargetInput(event)\n                    ) {\n                      event.preventDefault()\n                      ReactEditor.setFragmentData(\n                        editor,\n                        event.clipboardData,\n                        'cut'\n                      )\n                      const { selection } = editor\n\n                      if (selection) {\n                        if (Range.isExpanded(selection)) {\n                          Editor.deleteFragment(editor)\n                        } else {\n                          const node = Node.parent(\n                            editor,\n                            selection.anchor.path\n                          )\n                          if (Editor.isVoid(editor, node)) {\n                            Transforms.delete(editor)\n                          }\n                        }\n                      }\n                    }\n                  },\n                  [readOnly, editor, attributes.onCut]\n                )}\n                onDragOver={useCallback(\n                  (event: React.DragEvent<HTMLDivElement>) => {\n                    if (\n                      ReactEditor.hasTarget(editor, event.target) &&\n                      !isEventHandled(event, attributes.onDragOver)\n                    ) {\n                      // Only when the target is void, call `preventDefault` to signal\n                      // that drops are allowed. Editable content is droppable by\n                      // default, and calling `preventDefault` hides the cursor.\n                      const node = ReactEditor.toSlateNode(editor, event.target)\n\n                      if (\n                        Element.isElement(node) &&\n                        Editor.isVoid(editor, node)\n                      ) {\n                        event.preventDefault()\n                      }\n                    }\n                  },\n                  [attributes.onDragOver, editor]\n                )}\n                onDragStart={useCallback(\n                  (event: React.DragEvent<HTMLDivElement>) => {\n                    if (\n                      !readOnly &&\n                      ReactEditor.hasTarget(editor, event.target) &&\n                      !isEventHandled(event, attributes.onDragStart)\n                    ) {\n                      const node = ReactEditor.toSlateNode(editor, event.target)\n                      const path = ReactEditor.findPath(editor, node)\n                      const voidMatch =\n                        (Element.isElement(node) &&\n                          Editor.isVoid(editor, node)) ||\n                        Editor.void(editor, { at: path, voids: true })\n\n                      // If starting a drag on a void node, make sure it is selected\n                      // so that it shows up in the selection's fragment.\n                      if (voidMatch) {\n                        const range = Editor.range(editor, path)\n                        Transforms.select(editor, range)\n                      }\n\n                      state.isDraggingInternally = true\n\n                      ReactEditor.setFragmentData(\n                        editor,\n                        event.dataTransfer,\n                        'drag'\n                      )\n                    }\n                  },\n                  [readOnly, editor, attributes.onDragStart, state]\n                )}\n                onDrop={useCallback(\n                  (event: React.DragEvent<HTMLDivElement>) => {\n                    if (\n                      !readOnly &&\n                      ReactEditor.hasTarget(editor, event.target) &&\n                      !isEventHandled(event, attributes.onDrop)\n                    ) {\n                      event.preventDefault()\n\n                      // Keep a reference to the dragged range before updating selection\n                      const draggedRange = editor.selection\n\n                      // Find the range where the drop happened\n                      const range = ReactEditor.findEventRange(editor, event)\n                      const data = event.dataTransfer\n\n                      Transforms.select(editor, range)\n\n                      if (state.isDraggingInternally) {\n                        if (\n                          draggedRange &&\n                          !Range.equals(draggedRange, range) &&\n                          !Editor.void(editor, { at: range, voids: true })\n                        ) {\n                          Transforms.delete(editor, {\n                            at: draggedRange,\n                          })\n                        }\n                      }\n\n                      ReactEditor.insertData(editor, data)\n\n                      // When dragging from another source into the editor, it's possible\n                      // that the current editor does not have focus.\n                      if (!ReactEditor.isFocused(editor)) {\n                        ReactEditor.focus(editor)\n                      }\n                    }\n                  },\n                  [readOnly, editor, attributes.onDrop, state]\n                )}\n                onDragEnd={useCallback(\n                  (event: React.DragEvent<HTMLDivElement>) => {\n                    if (\n                      !readOnly &&\n                      state.isDraggingInternally &&\n                      attributes.onDragEnd &&\n                      ReactEditor.hasTarget(editor, event.target)\n                    ) {\n                      attributes.onDragEnd(event)\n                    }\n                  },\n                  [readOnly, state, attributes, editor]\n                )}\n                onFocus={useCallback(\n                  (event: React.FocusEvent<HTMLDivElement>) => {\n                    if (\n                      !readOnly &&\n                      !state.isUpdatingSelection &&\n                      ReactEditor.hasEditableTarget(editor, event.target) &&\n                      !isEventHandled(event, attributes.onFocus)\n                    ) {\n                      const el = ReactEditor.toDOMNode(editor, editor)\n                      const root = ReactEditor.findDocumentOrShadowRoot(editor)\n                      state.latestElement = root.activeElement\n\n                      // COMPAT: If the editor has nested editable elements, the focus\n                      // can go to them. In Firefox, this must be prevented because it\n                      // results in issues with keyboard navigation. (2017/03/30)\n                      if (IS_FIREFOX && event.target !== el) {\n                        el.focus()\n                        return\n                      }\n\n                      IS_FOCUSED.set(editor, true)\n                    }\n                  },\n                  [readOnly, state, editor, attributes.onFocus]\n                )}\n                onKeyDown={useCallback(\n                  (event: React.KeyboardEvent<HTMLDivElement>) => {\n                    if (\n                      !readOnly &&\n                      ReactEditor.hasEditableTarget(editor, event.target)\n                    ) {\n                      androidInputManagerRef.current?.handleKeyDown(event)\n\n                      const { nativeEvent } = event\n\n                      // COMPAT: The composition end event isn't fired reliably in all browsers,\n                      // so we sometimes might end up stuck in a composition state even though we\n                      // aren't composing any more.\n                      if (\n                        ReactEditor.isComposing(editor) &&\n                        nativeEvent.isComposing === false\n                      ) {\n                        IS_COMPOSING.set(editor, false)\n                        setIsComposing(false)\n                      }\n\n                      if (\n                        isEventHandled(event, attributes.onKeyDown) ||\n                        ReactEditor.isComposing(editor)\n                      ) {\n                        return\n                      }\n\n                      const { selection } = editor\n                      const element =\n                        editor.children[\n                          selection !== null ? selection.focus.path[0] : 0\n                        ]\n                      const isRTL = getDirection(Node.string(element)) === 'rtl'\n\n                      // COMPAT: Since we prevent the default behavior on\n                      // `beforeinput` events, the browser doesn't think there's ever\n                      // any history stack to undo or redo, so we have to manage these\n                      // hotkeys ourselves. (2019/11/06)\n                      if (Hotkeys.isRedo(nativeEvent)) {\n                        event.preventDefault()\n                        const maybeHistoryEditor: any = editor\n\n                        if (typeof maybeHistoryEditor.redo === 'function') {\n                          maybeHistoryEditor.redo()\n                        }\n\n                        return\n                      }\n\n                      if (Hotkeys.isUndo(nativeEvent)) {\n                        event.preventDefault()\n                        const maybeHistoryEditor: any = editor\n\n                        if (typeof maybeHistoryEditor.undo === 'function') {\n                          maybeHistoryEditor.undo()\n                        }\n\n                        return\n                      }\n\n                      // COMPAT: Certain browsers don't handle the selection updates\n                      // properly. In Chrome, the selection isn't properly extended.\n                      // And in Firefox, the selection isn't properly collapsed.\n                      // (2017/10/17)\n                      if (Hotkeys.isMoveLineBackward(nativeEvent)) {\n                        event.preventDefault()\n                        Transforms.move(editor, { unit: 'line', reverse: true })\n                        return\n                      }\n\n                      if (Hotkeys.isMoveLineForward(nativeEvent)) {\n                        event.preventDefault()\n                        Transforms.move(editor, { unit: 'line' })\n                        return\n                      }\n\n                      if (Hotkeys.isExtendLineBackward(nativeEvent)) {\n                        event.preventDefault()\n                        Transforms.move(editor, {\n                          unit: 'line',\n                          edge: 'focus',\n                          reverse: true,\n                        })\n                        return\n                      }\n\n                      if (Hotkeys.isExtendLineForward(nativeEvent)) {\n                        event.preventDefault()\n                        Transforms.move(editor, { unit: 'line', edge: 'focus' })\n                        return\n                      }\n\n                      // COMPAT: If a void node is selected, or a zero-width text node\n                      // adjacent to an inline is selected, we need to handle these\n                      // hotkeys manually because browsers won't be able to skip over\n                      // the void node with the zero-width space not being an empty\n                      // string.\n                      if (Hotkeys.isMoveBackward(nativeEvent)) {\n                        event.preventDefault()\n\n                        if (selection && Range.isCollapsed(selection)) {\n                          Transforms.move(editor, { reverse: !isRTL })\n                        } else {\n                          Transforms.collapse(editor, {\n                            edge: isRTL ? 'end' : 'start',\n                          })\n                        }\n\n                        return\n                      }\n\n                      if (Hotkeys.isMoveForward(nativeEvent)) {\n                        event.preventDefault()\n\n                        if (selection && Range.isCollapsed(selection)) {\n                          Transforms.move(editor, { reverse: isRTL })\n                        } else {\n                          Transforms.collapse(editor, {\n                            edge: isRTL ? 'start' : 'end',\n                          })\n                        }\n\n                        return\n                      }\n\n                      if (Hotkeys.isMoveWordBackward(nativeEvent)) {\n                        event.preventDefault()\n\n                        if (selection && Range.isExpanded(selection)) {\n                          Transforms.collapse(editor, { edge: 'focus' })\n                        }\n\n                        Transforms.move(editor, {\n                          unit: 'word',\n                          reverse: !isRTL,\n                        })\n                        return\n                      }\n\n                      if (Hotkeys.isMoveWordForward(nativeEvent)) {\n                        event.preventDefault()\n\n                        if (selection && Range.isExpanded(selection)) {\n                          Transforms.collapse(editor, { edge: 'focus' })\n                        }\n\n                        Transforms.move(editor, {\n                          unit: 'word',\n                          reverse: isRTL,\n                        })\n                        return\n                      }\n\n                      // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n                      // fall back to guessing at the input intention for hotkeys.\n                      // COMPAT: In iOS, some of these hotkeys are handled in the\n                      if (!HAS_BEFORE_INPUT_SUPPORT) {\n                        // We don't have a core behavior for these, but they change the\n                        // DOM if we don't prevent them, so we have to.\n                        if (\n                          Hotkeys.isBold(nativeEvent) ||\n                          Hotkeys.isItalic(nativeEvent) ||\n                          Hotkeys.isTransposeCharacter(nativeEvent)\n                        ) {\n                          event.preventDefault()\n                          return\n                        }\n\n                        if (Hotkeys.isSoftBreak(nativeEvent)) {\n                          event.preventDefault()\n                          Editor.insertSoftBreak(editor)\n                          return\n                        }\n\n                        if (Hotkeys.isSplitBlock(nativeEvent)) {\n                          event.preventDefault()\n                          Editor.insertBreak(editor)\n                          return\n                        }\n\n                        if (Hotkeys.isDeleteBackward(nativeEvent)) {\n                          event.preventDefault()\n\n                          if (selection && Range.isExpanded(selection)) {\n                            Editor.deleteFragment(editor, {\n                              direction: 'backward',\n                            })\n                          } else {\n                            Editor.deleteBackward(editor)\n                          }\n\n                          return\n                        }\n\n                        if (Hotkeys.isDeleteForward(nativeEvent)) {\n                          event.preventDefault()\n\n                          if (selection && Range.isExpanded(selection)) {\n                            Editor.deleteFragment(editor, {\n                              direction: 'forward',\n                            })\n                          } else {\n                            Editor.deleteForward(editor)\n                          }\n\n                          return\n                        }\n\n                        if (Hotkeys.isDeleteLineBackward(nativeEvent)) {\n                          event.preventDefault()\n\n                          if (selection && Range.isExpanded(selection)) {\n                            Editor.deleteFragment(editor, {\n                              direction: 'backward',\n                            })\n                          } else {\n                            Editor.deleteBackward(editor, { unit: 'line' })\n                          }\n\n                          return\n                        }\n\n                        if (Hotkeys.isDeleteLineForward(nativeEvent)) {\n                          event.preventDefault()\n\n                          if (selection && Range.isExpanded(selection)) {\n                            Editor.deleteFragment(editor, {\n                              direction: 'forward',\n                            })\n                          } else {\n                            Editor.deleteForward(editor, { unit: 'line' })\n                          }\n\n                          return\n                        }\n\n                        if (Hotkeys.isDeleteWordBackward(nativeEvent)) {\n                          event.preventDefault()\n\n                          if (selection && Range.isExpanded(selection)) {\n                            Editor.deleteFragment(editor, {\n                              direction: 'backward',\n                            })\n                          } else {\n                            Editor.deleteBackward(editor, { unit: 'word' })\n                          }\n\n                          return\n                        }\n\n                        if (Hotkeys.isDeleteWordForward(nativeEvent)) {\n                          event.preventDefault()\n\n                          if (selection && Range.isExpanded(selection)) {\n                            Editor.deleteFragment(editor, {\n                              direction: 'forward',\n                            })\n                          } else {\n                            Editor.deleteForward(editor, { unit: 'word' })\n                          }\n\n                          return\n                        }\n                      } else {\n                        if (IS_CHROME || IS_WEBKIT) {\n                          // COMPAT: Chrome and Safari support `beforeinput` event but do not fire\n                          // an event when deleting backwards in a selected void inline node\n                          if (\n                            selection &&\n                            (Hotkeys.isDeleteBackward(nativeEvent) ||\n                              Hotkeys.isDeleteForward(nativeEvent)) &&\n                            Range.isCollapsed(selection)\n                          ) {\n                            const currentNode = Node.parent(\n                              editor,\n                              selection.anchor.path\n                            )\n\n                            if (\n                              Element.isElement(currentNode) &&\n                              Editor.isVoid(editor, currentNode) &&\n                              (Editor.isInline(editor, currentNode) ||\n                                Editor.isBlock(editor, currentNode))\n                            ) {\n                              event.preventDefault()\n                              Editor.deleteBackward(editor, { unit: 'block' })\n\n                              return\n                            }\n                          }\n                        }\n                      }\n                    }\n                  },\n                  [readOnly, editor, attributes.onKeyDown]\n                )}\n                onPaste={useCallback(\n                  (event: React.ClipboardEvent<HTMLDivElement>) => {\n                    if (\n                      !readOnly &&\n                      ReactEditor.hasEditableTarget(editor, event.target) &&\n                      !isEventHandled(event, attributes.onPaste)\n                    ) {\n                      // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n                      // fall back to React's `onPaste` here instead.\n                      // COMPAT: Firefox, Chrome and Safari don't emit `beforeinput` events\n                      // when \"paste without formatting\" is used, so fallback. (2020/02/20)\n                      // COMPAT: Safari InputEvents generated by pasting won't include\n                      // application/x-slate-fragment items, so use the\n                      // ClipboardEvent here. (2023/03/15)\n                      if (\n                        !HAS_BEFORE_INPUT_SUPPORT ||\n                        isPlainTextOnlyPaste(event.nativeEvent) ||\n                        IS_WEBKIT\n                      ) {\n                        event.preventDefault()\n                        ReactEditor.insertData(editor, event.clipboardData)\n                      }\n                    }\n                  },\n                  [readOnly, editor, attributes.onPaste]\n                )}\n              >\n                <Children\n                  decorations={decorations}\n                  node={editor}\n                  renderElement={renderElement}\n                  renderChunk={renderChunk}\n                  renderPlaceholder={renderPlaceholder}\n                  renderLeaf={renderLeaf}\n                  renderText={renderText}\n                />\n              </Component>\n            </RestoreDOM>\n          </DecorateContext.Provider>\n        </ComposingContext.Provider>\n      </ReadOnlyContext.Provider>\n    )\n  }\n)\n\n/**\n * The props that get passed to renderPlaceholder\n */\nexport type RenderPlaceholderProps = {\n  children: any\n  attributes: {\n    'data-slate-placeholder': boolean\n    dir?: 'rtl'\n    contentEditable: boolean\n    ref: React.RefCallback<any>\n    style: React.CSSProperties\n  }\n}\n\n/**\n * The default placeholder element\n */\n\nexport const DefaultPlaceholder = ({\n  attributes,\n  children,\n}: RenderPlaceholderProps) => (\n  // COMPAT: Artificially add a line-break to the end on the placeholder element\n  // to prevent Android IMEs to pick up its content in autocorrect and to auto-capitalize the first letter\n  <span {...attributes}>\n    {children}\n    {IS_ANDROID && <br />}\n  </span>\n)\n\n/**\n * A default memoized decorate function.\n */\n\nexport const defaultDecorate: (entry: NodeEntry) => DecoratedRange[] = () => []\n\n/**\n * A default implement to scroll dom range into view.\n */\n\nexport const defaultScrollSelectionIntoView = (\n  editor: ReactEditor,\n  domRange: DOMRange\n) => {\n  // This was affecting the selection of multiple blocks and dragging behavior,\n  // so enabled only if the selection has been collapsed.\n  if (\n    domRange.getBoundingClientRect &&\n    (!editor.selection ||\n      (editor.selection && Range.isCollapsed(editor.selection)))\n  ) {\n    const leafEl = domRange.startContainer.parentElement!\n\n    // COMPAT: In Chrome, domRange.getBoundingClientRect() can return zero dimensions for valid ranges (e.g. line breaks).\n    // When this happens, do not scroll like most editors do.\n    const domRect = domRange.getBoundingClientRect()\n    const isZeroDimensionRect =\n      domRect.width === 0 &&\n      domRect.height === 0 &&\n      domRect.x === 0 &&\n      domRect.y === 0\n\n    if (isZeroDimensionRect) {\n      const leafRect = leafEl.getBoundingClientRect()\n      const leafHasDimensions = leafRect.width > 0 || leafRect.height > 0\n\n      if (leafHasDimensions) {\n        return\n      }\n    }\n\n    // Default behavior: use domRange's getBoundingClientRect\n    leafEl.getBoundingClientRect = domRange.getBoundingClientRect.bind(domRange)\n    scrollIntoView(leafEl, {\n      scrollMode: 'if-needed',\n    })\n\n    // @ts-expect-error an unorthodox delete D:\n    delete leafEl.getBoundingClientRect\n  }\n}\n\n/**\n * Check if an event is overrided by a handler.\n */\n\nexport const isEventHandled = <\n  EventType extends React.SyntheticEvent<unknown, unknown>,\n>(\n  event: EventType,\n  handler?: (event: EventType) => void | boolean\n) => {\n  if (!handler) {\n    return false\n  }\n  // The custom event handler may return a boolean to specify whether the event\n  // shall be treated as being handled or not.\n  const shouldTreatEventAsHandled = handler(event)\n\n  if (shouldTreatEventAsHandled != null) {\n    return shouldTreatEventAsHandled\n  }\n\n  return event.isDefaultPrevented() || event.isPropagationStopped()\n}\n\n/**\n * Check if the event's target is an input element\n */\nexport const isDOMEventTargetInput = <\n  EventType extends React.SyntheticEvent<unknown, unknown>,\n>(\n  event: EventType\n) => {\n  return (\n    isDOMNode(event.target) &&\n    (event.target instanceof HTMLInputElement ||\n      event.target instanceof HTMLTextAreaElement)\n  )\n}\n\n/**\n * Check if a DOM event is overrided by a handler.\n */\n\nexport const isDOMEventHandled = <E extends Event>(\n  event: E,\n  handler?: (event: E) => void | boolean\n) => {\n  if (!handler) {\n    return false\n  }\n\n  // The custom event handler may return a boolean to specify whether the event\n  // shall be treated as being handled or not.\n  const shouldTreatEventAsHandled = handler(event)\n\n  if (shouldTreatEventAsHandled != null) {\n    return shouldTreatEventAsHandled\n  }\n\n  return event.defaultPrevented\n}\n\nconst handleNativeHistoryEvents = (editor: Editor, event: InputEvent) => {\n  const maybeHistoryEditor: any = editor\n  if (\n    event.inputType === 'historyUndo' &&\n    typeof maybeHistoryEditor.undo === 'function'\n  ) {\n    maybeHistoryEditor.undo()\n    return\n  }\n  if (\n    event.inputType === 'historyRedo' &&\n    typeof maybeHistoryEditor.redo === 'function'\n  ) {\n    maybeHistoryEditor.redo()\n    return\n  }\n}\n","import { createContext, useContext } from 'react'\n\n/**\n * A React context for sharing the `focused` state of the editor.\n */\n\nexport const FocusedContext = createContext(false)\n\n/**\n * Get the current `focused` state of the editor.\n */\n\nexport const useFocused = (): boolean => {\n  return useContext(FocusedContext)\n}\n","import React from 'react'\n\nexport const REACT_MAJOR_VERSION = parseInt(React.version.split('.')[0], 10)\n","import React, { useCallback, useEffect, useState } from 'react'\nimport { Descendant, Editor, Node, Operation, Scrubber, Selection } from 'slate'\nimport { EDITOR_TO_ON_CHANGE } from 'slate-dom'\nimport { FocusedContext } from '../hooks/use-focused'\nimport { useIsomorphicLayoutEffect } from '../hooks/use-isomorphic-layout-effect'\nimport {\n  useSelectorContext,\n  SlateSelectorContext,\n} from '../hooks/use-slate-selector'\nimport { EditorContext } from '../hooks/use-slate-static'\nimport { ReactEditor } from '../plugin/react-editor'\nimport { REACT_MAJOR_VERSION } from '../utils/environment'\n\n/**\n * A wrapper around the provider to handle `onChange` events, because the editor\n * is a mutable singleton so it won't ever register as \"changed\" otherwise.\n */\n\nexport const Slate = (props: {\n  editor: ReactEditor\n  initialValue: Descendant[]\n  children: React.ReactNode\n  onChange?: (value: Descendant[]) => void\n  onSelectionChange?: (selection: Selection) => void\n  onValueChange?: (value: Descendant[]) => void\n}) => {\n  const {\n    editor,\n    children,\n    onChange,\n    onSelectionChange,\n    onValueChange,\n    initialValue,\n    ...rest\n  } = props\n\n  // Run once on first mount, but before `useEffect` or render\n  React.useState(() => {\n    if (!Node.isNodeList(initialValue)) {\n      throw new Error(\n        `[Slate] initialValue is invalid! Expected a list of elements but got: ${Scrubber.stringify(\n          initialValue\n        )}`\n      )\n    }\n\n    if (!Editor.isEditor(editor)) {\n      throw new Error(\n        `[Slate] editor is invalid! You passed: ${Scrubber.stringify(editor)}`\n      )\n    }\n\n    editor.children = initialValue\n    Object.assign(editor, rest)\n  })\n\n  const { selectorContext, onChange: handleSelectorChange } =\n    useSelectorContext()\n\n  const onContextChange = useCallback(\n    (options?: { operation?: Operation }) => {\n      if (onChange) {\n        onChange(editor.children)\n      }\n\n      switch (options?.operation?.type) {\n        case 'set_selection':\n          onSelectionChange?.(editor.selection)\n          break\n        default:\n          onValueChange?.(editor.children)\n      }\n\n      handleSelectorChange()\n    },\n    [editor, handleSelectorChange, onChange, onSelectionChange, onValueChange]\n  )\n\n  useEffect(() => {\n    EDITOR_TO_ON_CHANGE.set(editor, onContextChange)\n\n    return () => {\n      EDITOR_TO_ON_CHANGE.set(editor, () => {})\n    }\n  }, [editor, onContextChange])\n\n  const [isFocused, setIsFocused] = useState(ReactEditor.isFocused(editor))\n\n  useEffect(() => {\n    setIsFocused(ReactEditor.isFocused(editor))\n  }, [editor])\n\n  useIsomorphicLayoutEffect(() => {\n    const fn = () => setIsFocused(ReactEditor.isFocused(editor))\n    if (REACT_MAJOR_VERSION >= 17) {\n      // In React >= 17 onFocus and onBlur listen to the focusin and focusout events during the bubbling phase.\n      // Therefore in order for <Editable />'s handlers to run first, which is necessary for ReactEditor.isFocused(editor)\n      // to return the correct value, we have to listen to the focusin and focusout events without useCapture here.\n      document.addEventListener('focusin', fn)\n      document.addEventListener('focusout', fn)\n      return () => {\n        document.removeEventListener('focusin', fn)\n        document.removeEventListener('focusout', fn)\n      }\n    } else {\n      document.addEventListener('focus', fn, true)\n      document.addEventListener('blur', fn, true)\n      return () => {\n        document.removeEventListener('focus', fn, true)\n        document.removeEventListener('blur', fn, true)\n      }\n    }\n  }, [])\n\n  return (\n    <SlateSelectorContext.Provider value={selectorContext}>\n      <EditorContext.Provider value={editor}>\n        <FocusedContext.Provider value={isFocused}>\n          {children}\n        </FocusedContext.Provider>\n      </EditorContext.Provider>\n    </SlateSelectorContext.Provider>\n  )\n}\n","import { useContext } from 'react'\n\nimport { EditorContext } from './use-slate-static'\n\n/**\n * Get the current editor object from the React context.\n * @deprecated Use useSlateStatic instead.\n */\n\nexport const useEditor = () => {\n  const editor = useContext(EditorContext)\n\n  if (!editor) {\n    throw new Error(\n      `The \\`useEditor\\` hook must be used inside the <Slate> component's context.`\n    )\n  }\n\n  return editor\n}\n","import { useCallback } from 'react'\nimport { Editor, Range } from 'slate'\nimport { useElementIf } from './use-element'\nimport { useSlateSelector } from './use-slate-selector'\nimport { ReactEditor } from '../plugin/react-editor'\n\n/**\n * Get the current `selected` state of an element.\n */\n\nexport const useSelected = (): boolean => {\n  const element = useElementIf()\n\n  // Breaking the rules of hooks is fine here since `!element` will remain true\n  // or false for the entire lifetime of the component this hook is called from.\n  // TODO: Decide if we want to throw an error instead when calling\n  // `useSelected` outside of an element (potentially a breaking change).\n  if (!element) return false\n\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  const selector = useCallback(\n    (editor: Editor) => {\n      if (!editor.selection) return false\n      const path = ReactEditor.findPath(editor, element)\n      const range = Editor.range(editor, path)\n      return !!Range.intersection(range, editor.selection)\n    },\n    [element]\n  )\n\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  return useSlateSelector(selector, undefined, {\n    // Defer the selector until after `Editable` has rendered so that the path\n    // will be accurate.\n    deferred: true,\n  })\n}\n","import { BaseSelection, Range } from 'slate'\n\nimport { useSlateSelector } from './use-slate-selector'\n\n/**\n * Get the current slate selection.\n * Only triggers a rerender when the selection actually changes\n */\nexport const useSlateSelection = () => {\n  return useSlateSelector(editor => editor.selection, isSelectionEqual)\n}\n\nconst isSelectionEqual = (a: BaseSelection, b: BaseSelection) => {\n  if (!a && !b) return true\n  if (!a || !b) return false\n  return Range.equals(a, b)\n}\n","import ReactDOM from 'react-dom'\nimport { BaseEditor, Node } from 'slate'\nimport { withDOM, IS_ANDROID, EDITOR_TO_PENDING_SELECTION } from 'slate-dom'\nimport { ReactEditor } from './react-editor'\nimport { REACT_MAJOR_VERSION } from '../utils/environment'\nimport { getChunkTreeForNode } from '../chunking'\n\n/**\n * `withReact` adds React and DOM specific behaviors to the editor.\n *\n * If you are using TypeScript, you must extend Slate's CustomTypes to use\n * this plugin.\n *\n * See https://docs.slatejs.org/concepts/11-typescript to learn how.\n */\nexport const withReact = <T extends BaseEditor>(\n  editor: T,\n  clipboardFormatKey = 'x-slate-fragment'\n): T & ReactEditor => {\n  let e = editor as T & ReactEditor\n\n  e = withDOM(e, clipboardFormatKey)\n\n  const { onChange, apply, insertText } = e\n\n  e.getChunkSize = () => null\n\n  if (IS_ANDROID) {\n    e.insertText = (text, options) => {\n      // COMPAT: Android devices, specifically Samsung devices, experience cursor jumping.\n      // This issue occurs when the ⁠insertText function is called immediately after typing.\n      // The problem arises because typing schedules a selection change.\n      // However, this selection change is only executed after the ⁠insertText function.\n      // As a result, the already obsolete selection is applied, leading to incorrect\n      // final cursor position.\n      EDITOR_TO_PENDING_SELECTION.delete(e)\n\n      return insertText(text, options)\n    }\n  }\n\n  e.onChange = options => {\n    // COMPAT: React < 18 doesn't batch `setState` hook calls, which means\n    // that the children and selection can get out of sync for one render\n    // pass. So we have to use this unstable API to ensure it batches them.\n    // (2019/12/03)\n    // https://github.com/facebook/react/issues/14259#issuecomment-439702367\n    const maybeBatchUpdates =\n      REACT_MAJOR_VERSION < 18\n        ? ReactDOM.unstable_batchedUpdates\n        : (callback: () => void) => callback()\n\n    maybeBatchUpdates(() => {\n      onChange(options)\n    })\n  }\n\n  // On move_node, if the chunking optimization is enabled for the parent of the\n  // node being moved, add the moved node to the movedNodeKeys set of the\n  // parent's chunk tree.\n  e.apply = operation => {\n    if (operation.type === 'move_node') {\n      const parent = Node.parent(e, operation.path)\n      const chunking = !!e.getChunkSize(parent)\n\n      if (chunking) {\n        const node = Node.get(e, operation.path)\n        const chunkTree = getChunkTreeForNode(e, parent)\n        const key = ReactEditor.findKey(e, node)\n        chunkTree.movedNodeKeys.add(key)\n      }\n    }\n\n    apply(operation)\n  }\n\n  return e\n}\n"],"names":["require$$0","EditorContext","createContext","useSlateStatic","editor","useContext","Error","ReactEditor","DOMEditor","RESOLVE_DELAY","FLUSH_DELAY","debug","isDataTransfer","value","constructor","name","createAndroidInputManager","_ref","scheduleOnDOMSelectionChange","onDOMSelectionChange","flushing","compositionEndTimeoutId","flushTimeoutId","actionTimeoutId","idCounter","insertPositionHint","applyPendingSelection","pendingSelection","EDITOR_TO_PENDING_SELECTION","get","selection","normalized","normalizeRange","Range","equals","Transforms","select","performAction","action","EDITOR_TO_PENDING_ACTION","at","target","Point","isPoint","normalizePoint","targetRange","Editor","range","run","flush","clearTimeout","hasPendingDiffs","hasPendingAction","setTimeout","selectionRef","rangeRef","affinity","EDITOR_TO_USER_MARKS","set","marks","EDITOR_TO_PENDING_DIFFS","scheduleSelectionChange","diff","_EDITOR_TO_PENDING_DI","_EDITOR_TO_PENDING_DI2","pendingMarks","EDITOR_TO_PENDING_INSERTION_MARKS","undefined","text","insertText","deleteFragment","filter","_ref2","id","verifyDiffState","cancel","unref","userMarks","onChange","handleCompositionEnd","_event","IS_COMPOSING","handleCompositionStart","updatePlaceholderVisibility","forceHide","arguments","length","placeholderElement","EDITOR_TO_PLACEHOLDER_ELEMENT","style","display","removeProperty","storeDiff","path","_EDITOR_TO_PENDING_DI3","pendingDiffs","Node","leaf","idx","findIndex","change","Path","normalizeStringDiff","push","merged","mergeStringDiffs","splice","_objectSpread","scheduleAction","_ref3","handleDOMBeforeInput","event","_targetRange2","IS_NODE_MAP_DIRTY","type","inputType","data","dataTransfer","_event$getTargetRange","getTargetRanges","_event$getTargetRange2","_slicedToArray","nativeTargetRange","toSlateRange","exactMatch","suppressThrow","window","getWindow","domSelection","getSelection","canStoreDiff","startsWith","direction","endsWith","_Range$edges","edges","_Range$edges2","start","end","_Editor$leaf","_Editor$leaf2","isExpanded","offset","next","match","Text","isText","anchor","focus","_next","relevantPendingDiffs","find","diffs","applyStringDiff","apply","concat","point","handleUserSelect","_targetRange3","isCollapsed","targetNode","deleteForward","_nativeTargetRange","_targetRange4","nativeCollapsed","isDOMSelection","collapsed","deleteBackward","unit","insertSoftBreak","insertBreak","insertData","replace","test","slice","includes","parts","split","forEach","line","i","_Range$edges3","_Range$edges4","hintPosition","search","diffPosition","scheduleFlush","currentSelection","newPoint","_EDITOR_TO_PENDING_DI4","hasPendingChanges","isFlushing","pathChanged","parentPathChanged","handleInput","handleKeyDown","_","handleDomMutations","mutations","some","mutation","isTrackedMutation","_EDITOR_TO_FORCE_REND","EDITOR_TO_FORCE_RENDER","useIsMounted","isMountedRef","useRef","useEffect","current","useIsomorphicLayoutEffect","CAN_USE_DOM","useLayoutEffect","useMutationObserver","node","callback","options","_useState","useState","MutationObserver","_useState2","mutationObserver","takeRecords","observe","disconnect","MUTATION_OBSERVER_CONFIG","subtree","childList","characterData","useAndroidInputManager","IS_ANDROID","_objectWithoutProperties","_excluded","isMounted","inputManager","EDITOR_TO_SCHEDULE_FLUSH","String","props","isLast","parent","findPath","parentPath","isMarkPlaceholder","Boolean","MARK_PLACEHOLDER_SYMBOL","isVoid","React","createElement","ZeroWidthString","string","children","isInline","isLineBreak","TextString","isTrailing","_props$isTrailing","ref","getTextContent","initialText","textWithTrailing","textContent","MemoizedText","memo","forwardRef","_props$length","_props$isLineBreak","_props$isMarkPlacehol","attributes","PLACEHOLDER_DELAY","disconnectPlaceholderResizeObserver","placeholderResizeObserver","releaseObserver","clearTimeoutRef","timeoutRef","defaultRenderLeaf","DefaultLeaf","Leaf","renderPlaceholder","_props$renderLeaf","renderLeaf","leafPosition","placeholderRef","showPlaceholder","setShowPlaceholder","showPlaceholderTimeoutRef","callbackPlaceholderRef","useCallback","placeholderEl","_leaf$onPlaceholderRe","onPlaceholderResize","call","ResizeObserver","ResizeObserverPolyfill","_leaf$onPlaceholderRe2","leafIsPlaceholder","PLACEHOLDER_SYMBOL","placeholderProps","placeholder","position","top","pointerEvents","width","maxWidth","opacity","userSelect","textDecoration","WebkitUserModify","IS_WEBKIT","contentEditable","Fragment","MemoizedLeaf","prev","useGenericSelector","selector","equalityFn","_useReducer","useReducer","s","_useReducer2","forceRender","latestSubscriptionCallbackError","latestSelector","latestSelectedState","selectedState","selectorResult","err","isError","message","stack","update","newSelectedState","error","DecorateContext","useDecorations","parentDecorations","_useContext","decorate","addEventListener","isTextDecorationsEqual","isElementDecorationsEqual","_useGenericSelector","_useGenericSelector2","decorations","unsubscribe","useMemo","_toConsumableArray","useDecorateContext","decorateProp","eventListeners","Set","latestDecorate","listener","entry","add","defaultRenderText","DefaultText","_props$renderText","renderText","decoratedLeaves","SlateText","key","findKey","_decoratedLeaves$i","callbackRef","span","KEY_TO_ELEMENT","EDITOR_TO_KEY_TO_ELEMENT","NODE_TO_ELEMENT","ELEMENT_TO_NODE","defaultRenderElement","DefaultElement","Element","element","_props$renderElement","renderElement","renderChunk","readOnly","useReadOnly","useChildren","hasInlines","dir","getDirection","Tag","_Node$texts","texts","_Node$texts2","_Node$texts2$","height","color","outline","NODE_TO_INDEX","NODE_TO_PARENT","MemoizedElement","ChunkTreeHelper","chunkTree","chunkSize","_classCallCheck","_defineProperty","root","pointerChunk","pointerIndex","pointerIndexStack","reachedEnd","validateState","_createClass","readLeaf","pointerSiblings","cachedPointerNode","exitChunk","enterChunkUntilLeaf","pointerNode","returnToPreviousLeaf","insertBefore","leaves","insertAfter","beforeDepth","afterDepth","remainingCapacity","toInsertCount","Math","min","leavesToInsert","rawInsertAfter","rawInsertPointer","savePointer","finalPointer","restorePointer","minDepth","max","remove","invalidateChunk","c","modifiedChunks","getPointerNode","getChunkPath","chunk","index","indexOf","unshift","atStart","savedPointer","indexStack","enterChunk","_this$pointerNode","_this$pointerNode2","previousPointerChunk","pop","_this","_this$pointerSiblings","groupIntoChunks","perChunk","chunks","chunkNodes","Key","newTotal","depthForTotal","depth","perTopLevelChunk","pow","validateDescendant","actualIndexStack","join","ChildrenHelper","cachedKeys","Array","read","n","slicedChildren","remaining","maxChildren","lookAhead","elementResult","candidateNode","candidateKey","toChunkLeaves","nodes","startIndex","map","cachedKey","reconcileChildren","_ref$rerenderChildren","rerenderChildren","onInsert","onUpdate","onIndexChange","clear","chunkTreeHelper","childrenHelper","treeLeaf","_loop","wasMoved","movedNodeKeys","has","insertedChildrenStartIndex","insertedChildren","matchingChild","relativeIndex","matchingChildIndex","remainingChildren","KEY_TO_CHUNK_TREE","WeakMap","getChunkTreeForNode","reconcile","defaultRenderChunk","ChunkAncestor","ancestor","_props$renderChunk","chunkNode","renderedChunk","highest","lowest","MemoizedChunk","ChunkTree","ElementContext","useElement","context","useElementIf","isEditor","isBlock","isElement","isLeafBlock","getChunkSize","chunking","_useDecorationsByChil","useDecorationsByChild","decorationsByChild","childrenToRedecorate","renderElementComponent","Provider","ElementComponent","renderTextComponent","TextComponent","splitDecorationsByChild","mutableDecorationsByChild","_mutableDecorationsBy","previousDecorations","ReadOnlyContext","SlateSelectorContext","refEquality","a","b","useSlateSelector","deferred","genericSelector","useSelectorContext","deferredEventListeners","flushDeferred","callbackProp","_ref2$deferred","selectorContext","useFlushDeferredSelectorsOnRender","useSlate","EDITOR_TO_V","getEditorVersionRef","v","useSlateWithV","vRef","useTrackUserInput","receivedUserInput","animationFrameIdRef","onUserInput","cancelAnimationFrame","requestAnimationFrame","createRestoreDomManager","bufferedMutations","registerMutations","_bufferedMutations","trackedMutations","restoreDOM","reverse","removedNodes","nextSibling","addedNodes","removeChild","characterDataOldValue","RestoreDOMComponent","_Component","_inherits","_super","_createSuper","_len","args","_key","_assertThisInitialized","_this$mutationObserve","componentDidMount","manager","getSnapshotBeforeUpdate","_this$mutationObserve2","_this$mutationObserve3","_this$manager2","pendingMutations","_this$manager","componentDidUpdate","_this$manager3","componentWillUnmount","_this$mutationObserve4","render","Component","RestoreDOM","ComposingContext","useComposing","Children","Editable","forwardedRef","defaultRenderPlaceholder","DefaultPlaceholder","autoFocus","_props$decorate","defaultDecorate","propsOnDOMBeforeInput","onDOMBeforeInput","_props$readOnly","_props$renderPlacehol","_props$scrollSelectio","scrollSelectionIntoView","defaultScrollSelectionIntoView","_props$style","userStyle","_props$as","as","_props$disableDefault","disableDefaultStyles","isComposing","setIsComposing","deferredOperations","_useState3","_useState4","placeholderHeight","setPlaceholderHeight","processing","_useTrackUserInput","IS_READ_ONLY","state","isDraggingInternally","isUpdatingSelection","latestElement","hasMarkPlaceholder","androidInputManagerRef","throttle","el","toDOMNode","getRootNode","ShadowRoot","active","getActiveElement","document","execCommand","deselect","androidInputManager","findDocumentOrShadowRoot","activeElement","IS_FOCUSED","anchorNode","focusNode","anchorNodeSelectable","hasEditableTarget","isTargetInsideNonReadonlyVoid","focusNodeInEditor","hasTarget","debounce","_androidInputManagerR","_androidInputManagerR2","getDefaultView","EDITOR_TO_WINDOW","EDITOR_TO_ELEMENT","isFocused","setDomSelection","forceChange","hasDomSelection","IS_FIREFOX","rangeCount","firstRange","getRangeAt","lastRange","startContainer","endContainer","editorElement","hasDomSelectionInEditor","contains","slateRange","_anchorNode","parentElement","hasAttribute","hasRange","newDomRange","toDOMRange","e","collapseToEnd","isBackward","setBaseAndExtent","endOffset","startOffset","removeAllRanges","ensureSelection","timeoutId","animationFrameId","ensureDomSelection","handleNativeHistoryEvents","ranges","newRange","setStart","setEnd","preventDefault","stopImmediatePropagation","isDOMEventHandled","_EDITOR_TO_USER_SELEC","isCompositionChange","native","_node$parentElement","_window$getComputedSt","_ReactEditor$toDOMPoi","toDOMPoint","_ReactEditor$toDOMPoi2","closest","hasDOMNode","_lastText$textContent","lastText","createTreeWalker","NodeFilter","SHOW_TEXT","lastChild","getComputedStyle","whiteSpace","block","above","EDITOR_TO_USER_SELECTION","toRestore","HAS_BEFORE_INPUT_SUPPORT","removeEventListener","onSelectionChange","targetElement","HTMLElement","targetTagName","tagName","stoppedDragging","decorateContext","from","placeHolderResizeHandler","_placeholderEl$getBou","getBoundingClientRect","_decorations$push","rest","_excluded2","loose","unset","Object","fromEntries","keys","mark","role","spellCheck","autoCorrect","autoCapitalize","zindex","suppressContentEditableWarning","wordWrap","minHeight","onBeforeInput","isEventHandled","hasSelectableTarget","onInput","_iterator","_createForOfIteratorHelper","_step","done","op","f","nativeEvent","onBlur","relatedTarget","isDOMElement","isDOMNode","toSlateNode","onClick","hasPath","detail","TRIPLE_CLICK","blockPath","_block$","startVoid","endVoid","onCompositionEnd","_androidInputManagerR3","Promise","resolve","then","IS_FIREFOX_LEGACY","IS_IOS","IS_WECHATBROWSER","IS_UC_MOBILE","placeholderMarks","onCompositionUpdate","onCompositionStart","_androidInputManagerR4","onCopy","isDOMEventTargetInput","setFragmentData","clipboardData","onCut","onDragOver","onDragStart","voidMatch","voids","onDrop","draggedRange","findEventRange","onDragEnd","onFocus","onKeyDown","_androidInputManagerR5","isRTL","Hotkeys","isRedo","maybeHistoryEditor","redo","isUndo","undo","isMoveLineBackward","move","isMoveLineForward","isExtendLineBackward","edge","isExtendLineForward","isMoveBackward","collapse","isMoveForward","isMoveWordBackward","isMoveWordForward","isBold","isItalic","isTransposeCharacter","isSoftBreak","isSplitBlock","isDeleteBackward","isDeleteForward","isDeleteLineBackward","isDeleteLineForward","isDeleteWordBackward","isDeleteWordForward","IS_CHROME","currentNode","onPaste","isPlainTextOnlyPaste","domRange","leafEl","domRect","isZeroDimensionRect","x","y","leafRect","leafHasDimensions","bind","scrollIntoView","scrollMode","handler","shouldTreatEventAsHandled","isDefaultPrevented","isPropagationStopped","HTMLInputElement","HTMLTextAreaElement","defaultPrevented","FocusedContext","useFocused","REACT_MAJOR_VERSION","parseInt","version","Slate","onValueChange","initialValue","isNodeList","Scrubber","stringify","assign","_useSelectorContext","handleSelectorChange","onContextChange","_options$operation","operation","EDITOR_TO_ON_CHANGE","setIsFocused","fn","useEditor","useSelected","intersection","useSlateSelection","isSelectionEqual","withReact","clipboardFormatKey","withDOM","_e","maybeBatchUpdates","ReactDOM","unstable_batchedUpdates"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,21,22,23,24,29,30,42,43,44,45,46]}